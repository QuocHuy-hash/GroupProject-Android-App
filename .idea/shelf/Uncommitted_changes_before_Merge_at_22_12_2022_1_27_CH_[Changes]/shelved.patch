Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_10_2022_3_16_PM_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_10_2022_3_16_PM_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_10_2022_3_16_PM_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_10_2022_3_16_PM_[Changes]/shelved.patch	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,968 +0,0 @@
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]/shelved.patch	(revision 8b4f3a7e9bb8a509b027a6bcf436e71b0b66f431)
-+++ /dev/null	(revision 8b4f3a7e9bb8a509b027a6bcf436e71b0b66f431)
-@@ -1,949 +0,0 @@
--Index: app/src/main/java/com/example/duan1/model/thoiTrangNews.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1.model;\r\n\r\nimport android.net.Uri;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class thoiTrangNews {\r\n    private int id;\r\n    private String titlePost;\r\n    private String descriptionPost;\r\n    private String typeproduct;\r\n\r\n    private double price;\r\n    private String address;\r\n\r\n    public thoiTrangNews() {\r\n    }\r\n\r\n    public thoiTrangNews(int id, String titlePost, String descriptionPost, String typeproduct, double price, String address) {\r\n        this.id = id;\r\n        this.titlePost = titlePost;\r\n        this.descriptionPost = descriptionPost;\r\n        this.typeproduct = typeproduct;\r\n        this.price = price;\r\n        this.address = address;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTitlePost() {\r\n        return titlePost;\r\n    }\r\n\r\n    public void setTitlePost(String titlePost) {\r\n        this.titlePost = titlePost;\r\n    }\r\n\r\n    public String getDescriptionPost() {\r\n        return descriptionPost;\r\n    }\r\n\r\n    public void setDescriptionPost(String descriptionPost) {\r\n        this.descriptionPost = descriptionPost;\r\n    }\r\n\r\n    public String getTypeproduct() {\r\n        return typeproduct;\r\n    }\r\n\r\n    public void setTypeproduct(String typeproduct) {\r\n        this.typeproduct = typeproduct;\r\n    }\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(double price) {\r\n        this.price = price;\r\n    }\r\n\r\n    public String getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public void setAddress(String address) {\r\n        this.address = address;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/model/thoiTrangNews.java b/app/src/main/java/com/example/duan1/model/thoiTrangNews.java
----- a/app/src/main/java/com/example/duan1/model/thoiTrangNews.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/model/thoiTrangNews.java	(date 1670002689168)
--@@ -10,20 +10,40 @@
--     private String titlePost;
--     private String descriptionPost;
--     private String typeproduct;
---
--     private double price;
--     private String address;
--+    private int idUser;
--+    private String nameUser;
-- 
--     public thoiTrangNews() {
--     }
-- 
---    public thoiTrangNews(int id, String titlePost, String descriptionPost, String typeproduct, double price, String address) {
--+    public thoiTrangNews(int id, String titlePost, String descriptionPost, String typeproduct
--+            , double price, String address, int idUser, String nameUser) {
--         this.id = id;
--         this.titlePost = titlePost;
--         this.descriptionPost = descriptionPost;
--         this.typeproduct = typeproduct;
--         this.price = price;
--         this.address = address;
--+        this.idUser = idUser;
--+        this.nameUser = nameUser;
--+    }
--+
--+    public int getIdUser() {
--+        return idUser;
--+    }
--+
--+    public void setIdUser(int idUser) {
--+        this.idUser = idUser;
--+    }
--+
--+    public String getNameUser() {
--+        return nameUser;
--+    }
--+
--+    public void setNameUser(String nameUser) {
--+        this.nameUser = nameUser;
--     }
-- 
--     public int getId() {
--Index: app/src/main/java/com/example/duan1/chonDanhMucThoiTrangAcrivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\n\r\nimport com.example.duan1.Adapter.dmucBatDongSanAdapter;\r\nimport com.example.duan1.Adapter.dmucThoiTrangAdapter;\r\nimport com.example.duan1.model.danhMucBatDongSan;\r\nimport com.example.duan1.model.thoiTrang;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class chonDanhMucThoiTrangAcrivity extends AppCompatActivity {\r\n    ImageView backPage;\r\n    RecyclerView rcvChonDanhMuc;\r\n    List<thoiTrang> listTT;\r\n    dmucThoiTrangAdapter dmucThoiTrangAdapter;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_chon_danh_muc_thoi_trang_acrivity);\r\n        initUi();\r\n        clickBackPage();\r\n\r\n        listTT = new ArrayList<>();\r\n        dmucThoiTrangAdapter = new dmucThoiTrangAdapter(getApplicationContext() , getList());\r\n\r\n        rcvChonDanhMuc.setAdapter(dmucThoiTrangAdapter);\r\n        rcvChonDanhMuc.setLayoutManager(new LinearLayoutManager(this));\r\n    }\r\n\r\n    private List<thoiTrang> getList() {\r\n        listTT.add(new thoiTrang(\"Quần áo\"));\r\n        listTT.add(new thoiTrang(\"Đồng hồ\"));\r\n        listTT.add(new thoiTrang(\"Giày dép\"));\r\n        listTT.add(new thoiTrang(\"Túi xách\"));\r\n        listTT.add(new thoiTrang(\"Nước hoa\"));\r\n        listTT.add(new thoiTrang(\"Phụ kiện khác\"));\r\n        return listTT;\r\n    }\r\n\r\n    private void clickBackPage() {\r\n        backPage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void initUi() {\r\n        backPage = findViewById(R.id.icon_back);\r\n        rcvChonDanhMuc = findViewById(R.id.rcvChonDanhMucThoiTrang);\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/chonDanhMucThoiTrangAcrivity.java b/app/src/main/java/com/example/duan1/chonDanhMucThoiTrangAcrivity.java
----- a/app/src/main/java/com/example/duan1/chonDanhMucThoiTrangAcrivity.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/chonDanhMucThoiTrangAcrivity.java	(date 1670001863314)
--@@ -4,13 +4,13 @@
-- import androidx.recyclerview.widget.LinearLayoutManager;
-- import androidx.recyclerview.widget.RecyclerView;
-- 
--+import android.content.Intent;
-- import android.os.Bundle;
-- import android.view.View;
-- import android.widget.ImageView;
--+import android.widget.Toast;
-- 
---import com.example.duan1.Adapter.dmucBatDongSanAdapter;
-- import com.example.duan1.Adapter.dmucThoiTrangAdapter;
---import com.example.duan1.model.danhMucBatDongSan;
-- import com.example.duan1.model.thoiTrang;
-- 
-- import java.util.ArrayList;
--@@ -21,13 +21,16 @@
--     RecyclerView rcvChonDanhMuc;
--     List<thoiTrang> listTT;
--     dmucThoiTrangAdapter dmucThoiTrangAdapter;
--+    public static int IdUser = 0;
--+    public static String nameUser = "";
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
--         setContentView(R.layout.activity_chon_danh_muc_thoi_trang_acrivity);
--         initUi();
--         clickBackPage();
---
--+        getNameUser();
--+        getIdUser();
--         listTT = new ArrayList<>();
--         dmucThoiTrangAdapter = new dmucThoiTrangAdapter(getApplicationContext() , getList());
-- 
--@@ -35,6 +38,8 @@
--         rcvChonDanhMuc.setLayoutManager(new LinearLayoutManager(this));
--     }
-- 
--+
--+
--     private List<thoiTrang> getList() {
--         listTT.add(new thoiTrang("Quần áo"));
--         listTT.add(new thoiTrang("Đồng hồ"));
--@@ -58,4 +63,16 @@
--         backPage = findViewById(R.id.icon_back);
--         rcvChonDanhMuc = findViewById(R.id.rcvChonDanhMucThoiTrang);
--     }
--+    public int getIdUser() {
--+        Intent intent = getIntent();
--+        Bundle bundle = intent.getExtras();
--+        int id = bundle.getInt("Id");
--+        return IdUser = id;
--+    }
--+    public String getNameUser() {
--+        Intent intent = getIntent();
--+        Bundle bundle = intent.getExtras();
--+        String name = bundle.getString("Name");
--+        return nameUser =  name;
--+    }
-- }
--\ No newline at end of file
--Index: app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1;\r\n\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\n\r\nimport android.Manifest;\r\nimport android.app.AlertDialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.photoAdapter;\r\nimport com.example.duan1.model.Users;\r\nimport com.example.duan1.model.product_type;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\n\r\npublic class dangTinThoiTrangActivity extends AppCompatActivity implements photoAdapter.CountOfImageWhenRemove {\r\n    private TextView tvTenDanhMuc;\r\n    private ImageView imgBackPage, addImageProduct;\r\n    private Spinner spn_product_type;\r\n    private EditText edtTitlePost, edtDescription, edtPrice, edtAddress;\r\n    private Button btnDangTin;\r\n    private com.example.duan1.Adapter.photoAdapter photoAdapter;\r\n    private RecyclerView rcvView_select_img_fashion;\r\n    StorageReference imageFolder;\r\n    private String strTitlePost, strDescription, strPrice, strLoaiSanPham, strAddress;\r\n    private double dbPrice;\r\n\r\n\r\n    private int REQUEST_PERMISSION_CODE = 35;\r\n    private int PICK_IMAGE = 1;\r\n    private int update_count = 0 , maxID = 0;\r\n    private ArrayList<Uri> imageUri;\r\n    private ProgressDialog progressDialog;\r\n    DatabaseReference myData;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_dang_tin_thoi_trang);\r\n        imageFolder = FirebaseStorage.getInstance().getReference().child(\"Image.jpg\");\r\n        myData = FirebaseDatabase.getInstance().getReference(\"Tin\");\r\n        initUi();\r\n        clickBAckPage();\r\n        eventClickSPN();\r\n        clickAddImageFashion();\r\n        clickDangTin();\r\n\r\n    }\r\n\r\n    public void getId() {\r\n        myData.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot.exists()){\r\n                    maxID = (int) snapshot.getChildrenCount();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickDangTin() {\r\n        Intent intent = getIntent();\r\n        String tenDanhMuc = intent.getStringExtra(\"tenDanhMuc\");\r\n\r\n\r\n        btnDangTin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog = new ProgressDialog(dangTinThoiTrangActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n                getId();\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strPrice = edtPrice.getText().toString();\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n                } catch(Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n\r\n                strLoaiSanPham = spn_product_type.getSelectedItem().toString();\r\n                strAddress = edtAddress.getText().toString();\r\n\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dangTinThoiTrangActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n                    for (update_count = 0; update_count < imageUri.size(); update_count++) {\r\n                        Uri indexImage = imageUri.get(update_count);\r\n                        StorageReference imageName = imageFolder.child(\"Image \" + indexImage.getLastPathSegment());\r\n                        imageName.child(strTitlePost).putFile(indexImage).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                            @Override\r\n                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                                imageName.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                    @Override\r\n                                    public void onSuccess(Uri uri) {\r\n                                        String Url = String.valueOf(uri);\r\n                                        StoreLick(Url);\r\n\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                    String strId = String.valueOf(maxID);\r\n                    myData.child(tenDanhMuc).child(strId).setValue(new thoiTrangNews(maxID,\r\n                                    strTitlePost,\r\n                                    strDescription,\r\n                                    strLoaiSanPham,\r\n                                    dbPrice,\r\n                                    strAddress))\r\n                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dangTinThoiTrangActivity.this, \"Đăng tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void StoreLick(String url) {\r\n        DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference().child(\"List Image\");\r\n        HashMap<String, String> hashMap = new HashMap<>();\r\n        hashMap.put(\"Imglink\", url);\r\n        databaseReference.push().setValue(hashMap);\r\n\r\n    }\r\n//    private List<thoiTrangNews> getListFashion() {\r\n//        List<thoiTrangNews> listFashion = new ArrayList<>();\r\n//        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n//        DatabaseReference databaseReference = firebaseDatabase.getReference(\"ThoiTrangNews\");\r\n//        databaseReference.addValueEventListener(new ValueEventListener() {\r\n//            @Override\r\n//            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n//                listFashion.clear();\r\n//                for (DataSnapshot snapshot1 : snapshot.getChildren() ){\r\n//                    thoiTrangNews thoiTrangNews = snapshot1.getValue(thoiTrangNews.class);\r\n//                    listFashion.add(thoiTrangNews);\r\n//                }\r\n//            }\r\n//\r\n//            @Override\r\n//            public void onCancelled(@NonNull DatabaseError error) {\r\n//                Toast.makeText(dangTinThoiTrangActivity.this, \"Load data Error\", Toast.LENGTH_SHORT).show();\r\n//            }\r\n//        });\r\n//\r\n//        return listFashion;\r\n//\r\n//    }\r\n\r\n    /*\r\n     * @Override\r\n     * public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n     *  Task<Uri> urlTask = taskSnapshot.getStorage().getDownloadUrl();\r\n     * while (!urlTask.isSuccessful());\r\n     * Uri downloadUrl = urlTask.getResult();\r\n     *  FriendlyMessage friendlyMessage = new FriendlyMessage(null, mUsername, downloadUrl.toString());\r\n     *  mDatabaseReference.push().setValue(friendlyMessage); }\r\n     * */\r\n    private void clickAddImageFashion() {\r\n        photoAdapter = new photoAdapter(imageUri, this, this);\r\n        rcvView_select_img_fashion.setLayoutManager(new GridLayoutManager(dangTinThoiTrangActivity.this, 6));\r\n        rcvView_select_img_fashion.setAdapter(photoAdapter);\r\n\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n                    REQUEST_PERMISSION_CODE);\r\n            return;\r\n        }\r\n\r\n        addImageProduct.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                intent.setType(\"image/*\");\r\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR2) {\r\n                    intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n                }\r\n                startActivityForResult(Intent.createChooser(intent, \"select Picture\"), PICK_IMAGE);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == PICK_IMAGE && resultCode == RESULT_OK && data != null) {\r\n            if (data.getClipData() != null) {\r\n                int count = data.getClipData().getItemCount();\r\n\r\n                for (int i = 0; i < count; i++) {\r\n                    if (imageUri.size() < 9) {\r\n                        Uri imgUri = (data.getClipData().getItemAt(i).getUri());\r\n                        imageUri.add(imgUri);\r\n                    } else {\r\n                        Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                photoAdapter.notifyDataSetChanged();\r\n            } else {\r\n                if (imageUri.size() < 9) {\r\n                    Uri imgUri = data.getData();\r\n                    imageUri.add(imgUri);\r\n                } else {\r\n                    Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n\r\n            }\r\n            photoAdapter.notifyDataSetChanged();\r\n        } else {\r\n            Toast.makeText(this, \"you haven't pick any Image\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void eventClickSPN() {\r\n        product_type[] product_type = dangTinThoiTrangActivity.productType.getProductType();\r\n        ArrayAdapter<product_type> adapter = new ArrayAdapter<product_type>(this, android.R.layout.simple_spinner_item, product_type);\r\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spn_product_type.setAdapter(adapter);\r\n\r\n        spn_product_type.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                Toast.makeText(dangTinThoiTrangActivity.this, \"Loại sản phẩm \" + i, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickBAckPage() {\r\n        imgBackPage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void initUi() {\r\n        tvTenDanhMuc = findViewById(R.id.tvTenDanhMucTT);\r\n        Intent intent = getIntent();\r\n        tvTenDanhMuc.setText(\"Danh Mục - \" + intent.getStringExtra(\"tenDanhMuc\"));\r\n        imgBackPage = findViewById(R.id.icon_backTT);\r\n        spn_product_type = findViewById(R.id.spn_product_type);\r\n        edtTitlePost = findViewById(R.id.title_postTT);\r\n        edtDescription = findViewById(R.id.description_postTT);\r\n        edtPrice = findViewById(R.id.priceTT);\r\n        edtAddress = findViewById(R.id.addressTT);\r\n        btnDangTin = findViewById(R.id.btnDangTinTT);\r\n        rcvView_select_img_fashion = findViewById(R.id.rcvView_select_img_fashion);\r\n        addImageProduct = findViewById(R.id.addImageProductTT);\r\n\r\n\r\n        imageUri = new ArrayList<>();\r\n    }\r\n\r\n    @Override\r\n    public void clicked(int getSize) {\r\n\r\n    }\r\n\r\n    public static class productType {\r\n        public static product_type[] getProductType() {\r\n            product_type prd1 = new product_type(\"Nam\");\r\n            product_type prd2 = new product_type(\"Nữ\");\r\n            product_type prd3 = new product_type(\"Cả hai\");\r\n            return new product_type[]{prd1, prd2, prd3};\r\n\r\n\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java b/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java
----- a/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java	(date 1670004570259)
--@@ -11,14 +11,12 @@
-- 
-- 
-- import android.Manifest;
---import android.app.AlertDialog;
-- import android.app.ProgressDialog;
-- import android.content.Intent;
-- import android.content.pm.PackageManager;
-- import android.net.Uri;
-- import android.os.Build;
-- import android.os.Bundle;
---import android.util.Log;
-- import android.view.View;
-- import android.widget.AdapterView;
-- import android.widget.ArrayAdapter;
--@@ -30,7 +28,6 @@
-- import android.widget.Toast;
-- 
-- import com.example.duan1.Adapter.photoAdapter;
---import com.example.duan1.model.Users;
-- import com.example.duan1.model.product_type;
-- import com.example.duan1.model.thoiTrangNews;
-- import com.google.android.gms.tasks.OnSuccessListener;
--@@ -45,7 +42,6 @@
-- 
-- import java.util.ArrayList;
-- import java.util.HashMap;
---import java.util.List;
-- 
-- 
-- public class dangTinThoiTrangActivity extends AppCompatActivity implements photoAdapter.CountOfImageWhenRemove {
--@@ -57,13 +53,15 @@
--     private com.example.duan1.Adapter.photoAdapter photoAdapter;
--     private RecyclerView rcvView_select_img_fashion;
--     StorageReference imageFolder;
---    private String strTitlePost, strDescription, strPrice, strLoaiSanPham, strAddress;
--+    private String strTitlePost, strDescription, strPrice, strLoaiSanPham, strAddress, nameUser;
--+    private int idUser;
--     private double dbPrice;
--+    chonDanhMucThoiTrangAcrivity chonDanhMucThoiTrangAcrivity;
-- 
-- 
--     private int REQUEST_PERMISSION_CODE = 35;
--     private int PICK_IMAGE = 1;
---    private int update_count = 0 , maxID = 0;
--+    private int update_count = 0, maxID;
--     private ArrayList<Uri> imageUri;
--     private ProgressDialog progressDialog;
--     DatabaseReference myData;
--@@ -73,16 +71,23 @@
--         super.onCreate(savedInstanceState);
--         setContentView(R.layout.activity_dang_tin_thoi_trang);
--         imageFolder = FirebaseStorage.getInstance().getReference().child("Image.jpg");
---        myData = FirebaseDatabase.getInstance().getReference("Tin");
--+        myData = FirebaseDatabase.getInstance().getReference("Tin").child("ThoiTrang");
--+
--+        nameUser = chonDanhMucThoiTrangAcrivity.nameUser;
--+        idUser = chonDanhMucThoiTrangAcrivity.IdUser;
--+
--+
--         initUi();
--         clickBAckPage();
--         eventClickSPN();
--         clickAddImageFashion();
--+
--         clickDangTin();
-- 
--     }
-- 
---    public void getId() {
--+
--+    public void getIdIncrement() {
--         myData.addValueEventListener(new ValueEventListener() {
--             @Override
--             public void onDataChange(@NonNull DataSnapshot snapshot) {
--@@ -106,15 +111,17 @@
--         btnDangTin.setOnClickListener(new View.OnClickListener() {
--             @Override
--             public void onClick(View view) {
--+
--+
--                 progressDialog = new ProgressDialog(dangTinThoiTrangActivity.this);
--                 progressDialog.setMessage("Please wait for save");
---                getId();
--+                getIdIncrement();
--                 strTitlePost = edtTitlePost.getText().toString().trim();
--                 strDescription = edtDescription.getText().toString();
--                 strPrice = edtPrice.getText().toString();
--                 try {
--                     dbPrice = Double.parseDouble(strPrice);
---                } catch(Exception e) {
--+                } catch (Exception e) {
--                     System.err.println("Lỗi Parse kiểu dữ liệu");
--                 }
-- 
--@@ -145,12 +152,15 @@
--                         });
--                     }
--                     String strId = String.valueOf(maxID);
---                    myData.child(tenDanhMuc).child(strId).setValue(new thoiTrangNews(maxID,
--+                    Toast.makeText(dangTinThoiTrangActivity.this, "Max ID : " + maxID , Toast.LENGTH_SHORT).show();
--+                    myData.child(tenDanhMuc).child(strId ).setValue(new thoiTrangNews(maxID ,
--                                     strTitlePost,
--                                     strDescription,
--                                     strLoaiSanPham,
--                                     dbPrice,
---                                    strAddress))
--+                                    strAddress ,
--+                                    idUser,
--+                                    nameUser))
--                             .addOnSuccessListener(new OnSuccessListener<Void>() {
--                                 @Override
--                                 public void onSuccess(Void unused) {
--@@ -158,7 +168,6 @@
--                                     progressDialog.dismiss();
--                                 }
--                             });
---
--                 }
--             }
--         });
--Index: app/src/main/java/com/example/duan1/MainActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.fragment.app.FragmentManager;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.app.AlertDialog;\r\nimport android.app.Dialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.view.Gravity;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Fragment.FragmentDaoCho;\r\nimport com.example.duan1.Fragment.FragmentQuanLiTin;\r\nimport com.example.duan1.Fragment.FragmentThem;\r\nimport com.example.duan1.Fragment.FragmentTrangChu;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.android.material.navigation.NavigationBarView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    BottomNavigationView bottomNavigationView;\r\n    FloatingActionButton floatingActionButton;\r\n\r\n    FragmentTrangChu fragmentTrangChu = new FragmentTrangChu();\r\n    FragmentQuanLiTin fragmentQuanLiTin = new FragmentQuanLiTin();\r\n    FragmentDaoCho fragmentDaoCho = new FragmentDaoCho();\r\n    FragmentThem fragmentThem = new FragmentThem();\r\n\r\n\r\n    @SuppressLint(\"MissingInflatedId\")\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        initUi();\r\n\r\n        FirebaseAuth auth = FirebaseAuth.getInstance();\r\n        FirebaseUser user = auth.getCurrentUser();\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference(\"Users\");\r\n\r\n        floatingActionButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                showDialogChooseListProduct();\r\n            }\r\n        });\r\n\r\n        bottomNavigationView.setOnItemSelectedListener(new NavigationBarView.OnItemSelectedListener() {\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                switch (item.getItemId()){\r\n                    case R.id.home:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentTrangChu).commit();\r\n                        return true;\r\n\r\n                    case R.id.believe:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentQuanLiTin).commit();\r\n                        return true;\r\n\r\n                    case R.id.fab:\r\n                        return true;\r\n\r\n                    case R.id.market:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentDaoCho).commit();\r\n                        return true;\r\n\r\n                    case R.id.more:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentThem).commit();\r\n                        return true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n        });\r\n        \r\n    }\r\n\r\n    private void showDialogChooseListProduct() {\r\n        final Dialog dialog = new Dialog(this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.layout_dialog_chon_danh_muc);\r\n\r\n        Window window = dialog.getWindow();\r\n        if(window == null) {\r\n            return;\r\n        }\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.BOTTOM;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        RelativeLayout layout_batDongSan = dialog.findViewById(R.id.layout_batDongSan);\r\n        RelativeLayout layout_XeCo = dialog.findViewById(R.id.layout_XeCo);\r\n        RelativeLayout layout_thoiTrang = dialog.findViewById(R.id.layout_thoiTrang);\r\n        RelativeLayout layout_dienTu = dialog.findViewById(R.id.layout_dienTu);\r\n        RelativeLayout layout_giaiTri = dialog.findViewById(R.id.layout_giaiTri);\r\n        RelativeLayout layout_dienGiaDung = dialog.findViewById(R.id.layout_dienGiaDung);\r\n        ImageView icon_close = dialog.findViewById(R.id.icon_close);\r\n\r\n        icon_close.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n        layout_giaiTri.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucGiaiTriActivity.class));\r\n            }\r\n        });\r\n        layout_dienGiaDung.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucDienMayActivity.class));\r\n\r\n            }\r\n        });\r\n        layout_batDongSan.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(MainActivity.this, \"danh mục batDongSan\", Toast.LENGTH_SHORT).show();\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucBDSActivity.class));\r\n            }\r\n        });\r\n        layout_XeCo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucXeCoActivity.class));\r\n\r\n            }\r\n        });\r\n        layout_thoiTrang.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucThoiTrangAcrivity.class));\r\n\r\n            }\r\n        });\r\n        layout_dienTu.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucDoDienTuActivity.class));\r\n\r\n            }\r\n        });\r\n        dialog.show();\r\n    }\r\n\r\n\r\n    private void initUi() {\r\n        bottomNavigationView = findViewById(R.id.bottomNavigationView);\r\n        floatingActionButton = findViewById(R.id.fab);\r\n\r\n        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentTrangChu).commit();\r\n    }\r\n    public static void showDiaLogWarning(Context context , String text) {\r\n        final AlertDialog.Builder alertDialog = new AlertDialog.Builder(context);\r\n        alertDialog.setMessage(text).setTitle(\"Warning\").setIcon(R.drawable.ic_warning)\r\n                .setNegativeButton(\"Ok\" , null);\r\n        alertDialog.show();\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/MainActivity.java b/app/src/main/java/com/example/duan1/MainActivity.java
----- a/app/src/main/java/com/example/duan1/MainActivity.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/MainActivity.java	(date 1669998235359)
--@@ -2,7 +2,6 @@
-- 
-- import androidx.annotation.NonNull;
-- import androidx.appcompat.app.AppCompatActivity;
---import androidx.fragment.app.FragmentManager;
-- 
-- import android.annotation.SuppressLint;
-- import android.app.AlertDialog;
--@@ -24,13 +23,22 @@
-- import com.example.duan1.Fragment.FragmentQuanLiTin;
-- import com.example.duan1.Fragment.FragmentThem;
-- import com.example.duan1.Fragment.FragmentTrangChu;
--+import com.example.duan1.model.Users;
--+import com.facebook.login.LoginManager;
-- import com.google.android.material.bottomnavigation.BottomNavigationView;
-- import com.google.android.material.floatingactionbutton.FloatingActionButton;
-- import com.google.android.material.navigation.NavigationBarView;
-- import com.google.firebase.auth.FirebaseAuth;
-- import com.google.firebase.auth.FirebaseUser;
--+import com.google.firebase.database.DataSnapshot;
--+import com.google.firebase.database.DatabaseError;
-- import com.google.firebase.database.DatabaseReference;
-- import com.google.firebase.database.FirebaseDatabase;
--+import com.google.firebase.database.ValueEventListener;
--+import com.squareup.picasso.Picasso;
--+
--+import java.util.ArrayList;
--+import java.util.List;
-- 
-- public class MainActivity extends AppCompatActivity {
-- 
--@@ -41,7 +49,12 @@
--     FragmentQuanLiTin fragmentQuanLiTin = new FragmentQuanLiTin();
--     FragmentDaoCho fragmentDaoCho = new FragmentDaoCho();
--     FragmentThem fragmentThem = new FragmentThem();
---
--+    private FirebaseUser currentUser;
--+    private FirebaseAuth mAuth;
--+    private FirebaseDatabase database;
--+    private DatabaseReference myRef;
--+    private String name ;
--+    private int id;
-- 
--     @SuppressLint("MissingInflatedId")
--     @Override
--@@ -49,16 +62,28 @@
--         super.onCreate(savedInstanceState);
--         setContentView(R.layout.activity_main);
--         initUi();
--+//        onPostResume();
-- 
--+
--+        mAuth = FirebaseAuth.getInstance();
--+        currentUser = mAuth.getCurrentUser();
--         FirebaseAuth auth = FirebaseAuth.getInstance();
--         FirebaseUser user = auth.getCurrentUser();
---        FirebaseDatabase database = FirebaseDatabase.getInstance();
---        DatabaseReference myRef = database.getReference("Users");
--+         database = FirebaseDatabase.getInstance();
--+         myRef = database.getReference("Users");
--+
-- 
--         floatingActionButton.setOnClickListener(new View.OnClickListener() {
--             @Override
--             public void onClick(View view) {
---                showDialogChooseListProduct();
--+
--+                currentUser = mAuth.getCurrentUser();
--+                if(currentUser != null) {
--+                    showDialogChooseListProduct();
--+
--+                } else {
--+                    MainActivity.showDiaLogWarning(MainActivity.this , "Vui lòng đăng nhập để có thể đăng bán sản phẩm");
--+                }
--             }
--         });
-- 
--@@ -92,80 +117,140 @@
--         
--     }
-- 
--+
--+
--     private void showDialogChooseListProduct() {
---        final Dialog dialog = new Dialog(this);
---        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
---        dialog.setContentView(R.layout.layout_dialog_chon_danh_muc);
--+        List<Users> mListUser = new ArrayList<>();
--+
--+        String email = currentUser.getEmail();
--+        myRef.addValueEventListener(new ValueEventListener() {
--+            @Override
--+            public void onDataChange(@NonNull DataSnapshot snapshot) {
--+                mListUser.clear();
--+                for (DataSnapshot snapshot1 : snapshot.getChildren()){
--+                    Users user = snapshot1.getValue(Users.class);
--+                    mListUser.add(user);
--+                }
--+
--+                for (int i = 0; i < mListUser.size(); i++){
--+                    if (mListUser.get(i).getEmail().equals(email)){
--+                        name = (mListUser.get(i).getName());
--+                        id = mListUser.get(i).getId();
--+                    }
--+                }
--+            }
--+
--+            @Override
--+            public void onCancelled(@NonNull DatabaseError error) {
--+                Toast.makeText(MainActivity.this, "Error get Id and Name from Firebase", Toast.LENGTH_SHORT).show();
--+            }
--+        });
--+
--+            final Dialog dialog = new Dialog(this);
--+            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
--+            dialog.setContentView(R.layout.layout_dialog_chon_danh_muc);
-- 
---        Window window = dialog.getWindow();
---        if(window == null) {
---            return;
---        }
---        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);
---        dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
---        WindowManager.LayoutParams windowAttributes = window.getAttributes();
---        windowAttributes.gravity = Gravity.BOTTOM;
---        window.setAttributes(windowAttributes);
--+            Window window = dialog.getWindow();
--+            if(window == null) {
--+                return;
--+            }
--+            window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);
--+            dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
--+            WindowManager.LayoutParams windowAttributes = window.getAttributes();
--+            windowAttributes.gravity = Gravity.BOTTOM;
--+            window.setAttributes(windowAttributes);
-- 
---        RelativeLayout layout_batDongSan = dialog.findViewById(R.id.layout_batDongSan);
---        RelativeLayout layout_XeCo = dialog.findViewById(R.id.layout_XeCo);
---        RelativeLayout layout_thoiTrang = dialog.findViewById(R.id.layout_thoiTrang);
---        RelativeLayout layout_dienTu = dialog.findViewById(R.id.layout_dienTu);
---        RelativeLayout layout_giaiTri = dialog.findViewById(R.id.layout_giaiTri);
---        RelativeLayout layout_dienGiaDung = dialog.findViewById(R.id.layout_dienGiaDung);
---        ImageView icon_close = dialog.findViewById(R.id.icon_close);
--+            RelativeLayout layout_batDongSan = dialog.findViewById(R.id.layout_batDongSan);
--+            RelativeLayout layout_XeCo = dialog.findViewById(R.id.layout_XeCo);
--+            RelativeLayout layout_thoiTrang = dialog.findViewById(R.id.layout_thoiTrang);
--+            RelativeLayout layout_dienTu = dialog.findViewById(R.id.layout_dienTu);
--+            RelativeLayout layout_giaiTri = dialog.findViewById(R.id.layout_giaiTri);
--+            RelativeLayout layout_dienGiaDung = dialog.findViewById(R.id.layout_dienGiaDung);
--+            ImageView icon_close = dialog.findViewById(R.id.icon_close);
-- 
---        icon_close.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                dialog.dismiss();
---            }
---        });
---        layout_giaiTri.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                startActivity(new Intent(getApplicationContext() , chonDanhMucGiaiTriActivity.class));
---            }
---        });
---        layout_dienGiaDung.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                startActivity(new Intent(getApplicationContext() , chonDanhMucDienMayActivity.class));
---
---            }
---        });
---        layout_batDongSan.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                Toast.makeText(MainActivity.this, "danh mục batDongSan", Toast.LENGTH_SHORT).show();
---                startActivity(new Intent(getApplicationContext() , chonDanhMucBDSActivity.class));
---            }
---        });
---        layout_XeCo.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                startActivity(new Intent(getApplicationContext() , chonDanhMucXeCoActivity.class));
--+            icon_close.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    dialog.dismiss();
--+                }
--+            });
--+            layout_giaiTri.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucGiaiTriActivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            layout_dienGiaDung.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    Toast.makeText(MainActivity.this, "Id : " +id + " NAme : " + name, Toast.LENGTH_SHORT).show();
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucDienMayActivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            layout_batDongSan.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    Toast.makeText(MainActivity.this, "Id : " +id + " NAme : " + name, Toast.LENGTH_SHORT).show();
--+
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucBDSActivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            layout_XeCo.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    Toast.makeText(MainActivity.this, "Id : " +id + " NAme : " + name, Toast.LENGTH_SHORT).show();
-- 
---            }
---        });
---        layout_thoiTrang.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                startActivity(new Intent(getApplicationContext() , chonDanhMucThoiTrangAcrivity.class));
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucXeCoActivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            layout_thoiTrang.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
-- 
---            }
---        });
---        layout_dienTu.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                startActivity(new Intent(getApplicationContext() , chonDanhMucDoDienTuActivity.class));
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucThoiTrangAcrivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            layout_dienTu.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    Toast.makeText(MainActivity.this, "Id : " +id + " NAme : " + name, Toast.LENGTH_SHORT).show();
-- 
---            }
---        });
---        dialog.show();
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucDoDienTuActivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            dialog.show();
--     }
-- 
---
--     private void initUi() {
--         bottomNavigationView = findViewById(R.id.bottomNavigationView);
--         floatingActionButton = findViewById(R.id.fab);
--Index: app/src/main/res/layout/fragment_quan_li_tin.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".Fragment.FragmentQuanLiTin\"\r\n    android:orientation=\"vertical\"\r\n    android:gravity=\"center\"\r\n    android:background=\"@color/teal_200\"\r\n    >\r\n\r\n    <TextView\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"Fragment Quản lí tin\"\r\n        android:textColor=\"@color/black\"\r\n        android:textSize=\"30dp\"\r\n        />\r\n\r\n</LinearLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/fragment_quan_li_tin.xml b/app/src/main/res/layout/fragment_quan_li_tin.xml
----- a/app/src/main/res/layout/fragment_quan_li_tin.xml	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/res/layout/fragment_quan_li_tin.xml	(date 1669962762987)
--@@ -5,16 +5,47 @@
--     android:layout_height="match_parent"
--     tools:context=".Fragment.FragmentQuanLiTin"
--     android:orientation="vertical"
---    android:gravity="center"
---    android:background="@color/teal_200"
---    >
---
---    <TextView
---        android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
---        android:text="Fragment Quản lí tin"
---        android:textColor="@color/black"
---        android:textSize="30dp"
---        />
--+    >
--+
--+    <RelativeLayout
--+        android:layout_width="match_parent"
--+        android:layout_height="wrap_content"
--+        android:padding="10dp"
--+        android:background="#D8E6AF53"
--+        android:orientation="horizontal" >
--+
--+        <TextView
--+            android:id="@+id/tv_title_dat"
--+            android:layout_width="wrap_content"
--+            android:layout_height="wrap_content"
--+            android:layout_marginEnd="35dp"
--+            android:gravity="center"
--+            android:text="Quản Lí Tin Đăng"
--+            android:textColor="#0B0B0B"
--+            android:textSize="18dp"
--+            android:textStyle="bold" />
--+        <LinearLayout
--+            android:layout_width="wrap_content"
--+            android:layout_height="wrap_content"
--+            android:layout_alignEnd="@+id/tv_title_dat"
--+            android:layout_alignParentRight="true"
--+            android:orientation="horizontal">
--+
--+        <ImageView
--+            android:id="@+id/icon_notifi"
--+            android:layout_width="28dp"
--+            android:layout_height="28dp"
--+            android:layout_marginRight="10dp"
--+            android:src="@drawable/ic_notifi" />
--+
--+            <ImageView
--+                android:layout_width="28dp"
--+                android:layout_height="28dp"
--+                android:layout_marginRight="10dp"
--+                android:src="@drawable/ic_message" />
--+        </LinearLayout>
--+
--+
--+    </RelativeLayout>
-- 
-- </LinearLayout>
--\ No newline at end of file
--Index: app/src/main/res/layout/activity_dang_tin_thoi_trang.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    tools:context=\".dangTinThoiTrangActivity\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:padding=\"10dp\"\r\n        android:background=\"#D8E6AF53\"\r\n        android:orientation=\"horizontal\" >\r\n\r\n        <ImageView\r\n            android:id=\"@+id/icon_backTT\"\r\n            android:layout_width=\"35dp\"\r\n            android:layout_height=\"35dp\"\r\n            android:src=\"@drawable/ic_back_page\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_title_dat\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginEnd=\"35dp\"\r\n            android:layout_toRightOf=\"@+id/icon_back\"\r\n            android:gravity=\"center\"\r\n            android:text=\"Đăng tin\"\r\n            android:textColor=\"#0B0B0B\"\r\n            android:textSize=\"20dp\"\r\n            android:textStyle=\"bold\" />\r\n        <ImageView\r\n            android:id=\"@+id/iconCloser\"\r\n            android:layout_width=\"35dp\"\r\n            android:layout_height=\"35dp\"\r\n            android:src=\"@drawable/ic_close\"\r\n            android:layout_marginLeft=\"10dp\"\r\n            android:layout_alignParentEnd=\"true\"\r\n\r\n            />\r\n    </RelativeLayout>\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"6dp\"\r\n                android:background=\"@drawable/duongvien_goctron\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"Danh mục*\"\r\n                    android:textSize=\"12dp\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/tvTenDanhMucTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"Bất động sản - Nhà ở\"\r\n                    android:textColor=\"#252424\"\r\n                    android:textSize=\"16dp\"\r\n                    android:textStyle=\"bold\" />\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:background=\"@drawable/bg_corner\"\r\n                    android:padding=\"5dp\"\r\n                    android:text=\"TIÊU ĐỀ TIN ĐĂNG VÀ MÔ TẢ CHI TIẾT\"\r\n                    android:textColor=\"#9A9191\"\r\n                    android:textSize=\"16dp\" />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/title_postTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"6dp\"\r\n                    android:background=\"@drawable/bg_input\"\r\n                    android:hint=\"Tiêu đề tin đăng\"\r\n                    android:padding=\"10dp\"\r\n                    tools:ignore=\"DuplicateIds\" />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/description_postTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"6dp\"\r\n                    android:background=\"@drawable/bg_input\"\r\n                    android:hint=\"Mô tả chi tiết Nên co loại quần áo ,\r\n             Nam / Nữ , Kích cỡ , Nhãn hiệu\r\n            , chất liệu , Màu sắc .v.v.\"\r\n                    android:padding=\"10dp\"\r\n                    tools:ignore=\"DuplicateIds\" />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/priceTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"6dp\"\r\n                    android:background=\"@drawable/bg_input\"\r\n                    android:hint=\"Giá\"\r\n                    android:padding=\"10dp\"\r\n                    tools:ignore=\"DuplicateIds\" />\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:padding=\"6dp\"\r\n                    android:text=\"Loại sản phẩm\"\r\n                    android:textSize=\"20dp\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n                <Spinner\r\n                    android:id=\"@+id/spn_product_type\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\" />\r\n            </LinearLayout>\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:background=\"@drawable/bg_corner\"\r\n                android:padding=\"5dp\"\r\n                android:text=\"HÌNH ẢNH SẢN PHẨM\"\r\n                android:textColor=\"#9A9191\"\r\n                android:textSize=\"16dp\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:background=\"@drawable/duongvien_goctron\"\r\n                android:gravity=\"center_horizontal\"\r\n                android:orientation=\"vertical\"\r\n                android:padding=\"10dp\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/addImageProductTT\"\r\n                    android:layout_width=\"40dp\"\r\n                    android:layout_height=\"40dp\"\r\n                    android:src=\"@drawable/ic_camera\" />\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:text=\"Đăng từ 02 đến 05 hình\"\r\n                    android:textColor=\"#7E7A7A\" />\r\n\r\n                <androidx.recyclerview.widget.RecyclerView\r\n                    android:id=\"@+id/rcvView_select_img_fashion\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"start\"\r\n                    android:scrollbarStyle=\"outsideInset\"\r\n                    android:scrollbars=\"horizontal\" />\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:background=\"@drawable/bg_corner\"\r\n                    android:padding=\"5dp\"\r\n                    android:text=\"VỀ NGƯỜI BÁN\"\r\n                    android:textColor=\"#9A9191\"\r\n                    android:textSize=\"16dp\" />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/addressTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:background=\"@drawable/bg_input\"\r\n                    android:hint=\"diaChi\"\r\n                    android:padding=\"10dp\"\r\n                    tools:ignore=\"DuplicateIds\" />\r\n\r\n                <Button\r\n                    android:id=\"@+id/btnDangTinTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_margin=\"10dp\"\r\n                    android:padding=\"10dp\"\r\n                    android:text=\"Đăng tin\" />\r\n\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n    </ScrollView>\r\n</LinearLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/activity_dang_tin_thoi_trang.xml b/app/src/main/res/layout/activity_dang_tin_thoi_trang.xml
----- a/app/src/main/res/layout/activity_dang_tin_thoi_trang.xml	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/res/layout/activity_dang_tin_thoi_trang.xml	(date 1669961879061)
--@@ -25,7 +25,7 @@
--             android:layout_width="match_parent"
--             android:layout_height="wrap_content"
--             android:layout_marginEnd="35dp"
---            android:layout_toRightOf="@+id/icon_back"
--+            android:layout_toRightOf="@+id/icon_backTT"
--             android:gravity="center"
--             android:text="Đăng tin"
--             android:textColor="#0B0B0B"
--Index: app/src/main/java/com/example/duan1/model/Users.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1.model;\r\n\r\nimport com.google.firebase.database.Exclude;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class Users implements Serializable {\r\n\r\n    private int id;\r\n    private String name;\r\n    private String email;\r\n    private String sdt;\r\n    private String image;\r\n    private String password;\r\n\r\n    public Users() {\r\n    }\r\n\r\n    public Users(int id, String name, String email, String sdt, String image, String password) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.email = email;\r\n        this.sdt = sdt;\r\n        this.image = image;\r\n        this.password = password;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getSdt() {\r\n        return sdt;\r\n    }\r\n\r\n    public void setSdt(String sdt) {\r\n        this.sdt = sdt;\r\n    }\r\n\r\n    public String getImage() {\r\n        return image;\r\n    }\r\n\r\n    public void setImage(String image) {\r\n        this.image = image;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    @Exclude\r\n    public Map<String, Object> toMap() {\r\n        HashMap<String, Object> result = new HashMap<>();\r\n        result.put(\"id\", id);\r\n        result.put(\"name\", name);\r\n        result.put(\"email\", email);\r\n        result.put(\"sdt\", sdt);\r\n        result.put(\"image\", image);\r\n        result.put(\"password\", password);\r\n\r\n        return result;\r\n    }\r\n\r\n    @Exclude\r\n    public Map<String, Object> toMapImage() {\r\n        HashMap<String, Object> result = new HashMap<>();\r\n        result.put(\"id\", id);\r\n        result.put(\"name\", name);\r\n        result.put(\"email\", email);\r\n        result.put(\"sdt\", sdt);\r\n        result.put(\"image\", image);\r\n        result.put(\"password\", password);\r\n\r\n        return result;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/model/Users.java b/app/src/main/java/com/example/duan1/model/Users.java
----- a/app/src/main/java/com/example/duan1/model/Users.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/model/Users.java	(date 1669969272856)
--@@ -100,4 +100,16 @@
-- 
--         return result;
--     }
--+
--+    @Override
--+    public String toString() {
--+        return "Users{" +
--+                "id=" + id +
--+                ", name='" + name + '\'' +
--+                ", email='" + email + '\'' +
--+                ", sdt='" + sdt + '\'' +
--+                ", image='" + image + '\'' +
--+                ", password='" + password + '\'' +
--+                '}';
--+    }
-- }
--Index: app/src/main/res/drawable/ic_notifi.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/drawable/ic_notifi.xml b/app/src/main/res/drawable/ic_notifi.xml
--new file mode 100644
----- /dev/null	(date 1669962037513)
--+++ b/app/src/main/res/drawable/ic_notifi.xml	(date 1669962037513)
--@@ -0,0 +1,5 @@
--+<vector android:alpha="0.9" android:height="24dp" android:tint="#2D2929"
--+    android:viewportHeight="24" android:viewportWidth="24"
--+    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
--+    <path android:fillColor="@android:color/white" android:pathData="M12,22c1.1,0 2,-0.9 2,-2h-4c0,1.1 0.89,2 2,2zM18,16v-5c0,-3.07 -1.64,-5.64 -4.5,-6.32L13.5,4c0,-0.83 -0.67,-1.5 -1.5,-1.5s-1.5,0.67 -1.5,1.5v0.68C7.63,5.36 6,7.92 6,11v5l-2,2v1h16v-1l-2,-2z"/>
--+</vector>
--Index: app/src/main/java/com/example/duan1/Login.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1;\r\n\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\n\r\nimport android.os.PersistableBundle;\r\nimport android.text.Editable;\r\nimport android.text.TextUtils;\r\nimport android.text.TextWatcher;\r\nimport android.util.Patterns;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.model.Users;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginManager;\r\nimport com.facebook.login.LoginResult;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\n\r\npublic class Login extends AppCompatActivity {\r\n\r\n    private static final int RC_SIGN_IN = 1000;\r\n    private ImageView imgBack;\r\n    private CircleImageView imgLoginFacebook, imgLoginGoole, imgLoginZalo;\r\n    private TextView tvResetPassword, tvRegister;\r\n    private EditText edtNumberPhone, edtPassword;\r\n    private Button btnLogin;\r\n\r\n    private FirebaseAuth mAuth;\r\n    private CallbackManager callbackManager;\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    private GoogleSignInOptions gso;\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n        initUi();\r\n\r\n        //login Facebook\r\n        callbackManager = CallbackManager.Factory.create();\r\n        LoginManager.getInstance().registerCallback(callbackManager,\r\n                new FacebookCallback<LoginResult>() {\r\n                    @Override\r\n                    public void onSuccess(LoginResult loginResult) {\r\n                        Toast.makeText(Login.this, \"Đăng nhập thành công!\", Toast.LENGTH_SHORT).show();\r\n                        Intent intent = new Intent(Login.this, MainActivity.class);\r\n                        setResult(RESULT_OK,intent );\r\n                        finish();\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancel() {\r\n                        // App code\r\n                    }\r\n\r\n                    @Override\r\n                    public void onError(FacebookException exception) {\r\n                        // App code\r\n                    }\r\n                });\r\n\r\n        //login Goolgle\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n        initListenerClick();\r\n        initListenerTextChange();\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    private void initUi() {\r\n        imgBack = findViewById(R.id.img_back);\r\n        imgLoginFacebook = findViewById(R.id.img_login_facebook);\r\n        imgLoginGoole = findViewById(R.id.img_login_google);\r\n        imgLoginZalo = findViewById(R.id.img_login_zalo);\r\n        tvResetPassword = findViewById(R.id.tv_reset_password);\r\n        tvRegister = findViewById(R.id.tv_register);\r\n        edtNumberPhone = findViewById(R.id.edt_numberphone);\r\n        edtPassword = findViewById(R.id.edt_password);\r\n        btnLogin = findViewById(R.id.btn_login);\r\n\r\n        // Initialize Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n    }\r\n\r\n    private void initListenerClick() {\r\n        //click back\r\n        imgBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code back\r\n                finish();\r\n            }\r\n        });\r\n\r\n        //click login facebook\r\n        imgLoginFacebook.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login facebook\r\n                LoginManager.getInstance().logInWithReadPermissions(Login.this, Arrays.asList(\"public_profile\"));\r\n            }\r\n        });\r\n\r\n        //click login google\r\n        imgLoginGoole.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login google\r\n                LoginGoogle();\r\n            }\r\n        });\r\n\r\n        //click login zalo\r\n        imgLoginZalo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login zalo\r\n                Toast.makeText(Login.this, \"Login zalo from Login\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        //click reset password\r\n        tvResetPassword.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code reset password\r\n                Toast.makeText(Login.this, \"reset Password from Login\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        //click register\r\n        tvRegister.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code register\r\n                startActivity(new Intent(Login.this, Register.class));\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n    private void initListenerTextChange() {\r\n        edtNumberPhone.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n                if (edtNumberPhone.getText().toString().trim().equals(\"\") || edtPassword.getText().toString().trim().equals(\"\")){\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_login);\r\n                    return;\r\n                }else{\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_register);\r\n                    OnLogin();\r\n                }\r\n            }\r\n        });\r\n\r\n        edtPassword.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n                if (edtNumberPhone.getText().toString().trim().equals(\"\") || edtPassword.getText().toString().trim().equals(\"\")){\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_login);\r\n                    return;\r\n                }else{\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_register);\r\n                    OnLogin();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public static boolean isValidEmail(CharSequence target) {\r\n        return (!TextUtils.isEmpty(target) && Patterns.EMAIL_ADDRESS.matcher(target).matches());\r\n    }\r\n\r\n    private void OnLogin(){\r\n\r\n        //click login\r\n        btnLogin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login\r\n                ProgressDialog progressDialog = new ProgressDialog(Login.this);\r\n                String email = edtNumberPhone.getText().toString().trim();\r\n                if (!isValidEmail(email)){\r\n                    edtNumberPhone.setError(\"Email không đúng!\");\r\n                    return;\r\n                }\r\n                String password = edtPassword.getText().toString().trim();\r\n                if (password.length() < 6 ){\r\n                    edtPassword.setError(\"Mật khẩu phải bằng hoặc trên 6 kí tự\");\r\n                    return;\r\n                }\r\n\r\n                progressDialog.setTitle(\"Xin chờ\");\r\n                progressDialog.show();\r\n\r\n                mAuth.signInWithEmailAndPassword(email, password)\r\n                        .addOnCompleteListener(Login.this, new OnCompleteListener<AuthResult>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<AuthResult> task) {\r\n\r\n                                Handler handler = new Handler();\r\n                                handler.postDelayed(new Runnable() {\r\n                                    @Override\r\n                                    public void run() {\r\n\r\n                                        if (task.isSuccessful()) {\r\n                                            // Sign in success, update UI with the signed-in user's information\r\n                                            List<Users> mListUser = new ArrayList<>();\r\n                                            FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                                            DatabaseReference myRef = database.getReference(\"Users\");\r\n                    \r\n                                            myRef.addValueEventListener(new ValueEventListener() {\r\n                                                @Override\r\n                                                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                                    mListUser.clear();\r\n                                                    for (DataSnapshot snapshot1 : snapshot.getChildren()){\r\n                                                        Users user = snapshot1.getValue(Users.class);\r\n                                                        mListUser.add(user);\r\n\r\n                                                    }\r\n                                                    for (int i = 0; i < mListUser.size(); i++){\r\n                                                        if (mListUser.get(i).getEmail().equals(email) && mListUser.get(i).getPassword().equals(password)){\r\n                                                            Toast.makeText(Login.this, \"Đăng nhập thành công!\", Toast.LENGTH_SHORT).show();\r\n                                                            Intent intent = new Intent(Login.this, MainActivity.class);\r\n                                                            setResult(RESULT_OK,intent );\r\n                                                            finish();\r\n\r\n                                                        }\r\n                                                    }\r\n                                                }\r\n\r\n                                                @Override\r\n                                                public void onCancelled(@NonNull DatabaseError error) {\r\n                                                    FirebaseAuth.getInstance().signOut();\r\n                                                    Toast.makeText(Login.this, \"Đăng nhập thất bại!\", Toast.LENGTH_SHORT).show();\r\n                                                }\r\n                                            });\r\n//                                            int dem = 0;\r\n//\r\n//                                            if (dem == 0){\r\n//                                                Toast.makeText(Login.this, \"Đăng nhập thất bại!\", Toast.LENGTH_SHORT).show();\r\n//                                            }\r\n                                        } else {\r\n                                            // If sign in fails, display a message to the user.\r\n                                            Toast.makeText(Login.this, \"Đăng nhập thất bại, tài khoản hoặc mật khẩu không đúng!\", Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                        progressDialog.dismiss();\r\n                                    }\r\n                                },2000);\r\n                            }\r\n                        });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void LoginGoogle() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        // Pass the activity result back to the Facebook SDK\r\n        callbackManager.onActivityResult(requestCode, resultCode, data);\r\n\r\n        //google\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            try {\r\n                task.getResult(ApiException.class);\r\n                Toast.makeText(Login.this, \"Đăng nhập thành công!\", Toast.LENGTH_SHORT).show();\r\n                Intent intent = new Intent(Login.this, MainActivity.class);\r\n                setResult(RESULT_OK,intent);\r\n                finish();\r\n            } catch (ApiException e) {\r\n                Toast.makeText(this, \"signInResult:failed code=\" + e.getStatusCode(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        GoogleSignInAccount account = GoogleSignIn.getLastSignedInAccount(this);\r\n        if (account != null){\r\n            finish();\r\n        }\r\n\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/Login.java b/app/src/main/java/com/example/duan1/Login.java
----- a/app/src/main/java/com/example/duan1/Login.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/Login.java	(date 1669966944057)
--@@ -80,7 +80,7 @@
--                     public void onSuccess(LoginResult loginResult) {
--                         Toast.makeText(Login.this, "Đăng nhập thành công!", Toast.LENGTH_SHORT).show();
--                         Intent intent = new Intent(Login.this, MainActivity.class);
---                        setResult(RESULT_OK,intent );
--+                        setResult(RESULT_OK, intent);
--                         finish();
--                     }
-- 
--@@ -108,7 +108,6 @@
--     }
-- 
-- 
---
--     private void initUi() {
--         imgBack = findViewById(R.id.img_back);
--         imgLoginFacebook = findViewById(R.id.img_login_facebook);
--@@ -181,7 +180,6 @@
--         });
-- 
-- 
---
--     }
-- 
--     private void initListenerTextChange() {
--@@ -198,10 +196,10 @@
-- 
--             @Override
--             public void afterTextChanged(Editable editable) {
---                if (edtNumberPhone.getText().toString().trim().equals("") || edtPassword.getText().toString().trim().equals("")){
--+                if (edtNumberPhone.getText().toString().trim().equals("") || edtPassword.getText().toString().trim().equals("")) {
--                     btnLogin.setBackgroundResource(R.drawable.bg_button_login);
--                     return;
---                }else{
--+                } else {
--                     btnLogin.setBackgroundResource(R.drawable.bg_button_register);
--                     OnLogin();
--                 }
--@@ -221,10 +219,10 @@
-- 
--             @Override
--             public void afterTextChanged(Editable editable) {
---                if (edtNumberPhone.getText().toString().trim().equals("") || edtPassword.getText().toString().trim().equals("")){
--+                if (edtNumberPhone.getText().toString().trim().equals("") || edtPassword.getText().toString().trim().equals("")) {
--                     btnLogin.setBackgroundResource(R.drawable.bg_button_login);
--                     return;
---                }else{
--+                } else {
--                     btnLogin.setBackgroundResource(R.drawable.bg_button_register);
--                     OnLogin();
--                 }
--@@ -236,7 +234,7 @@
--         return (!TextUtils.isEmpty(target) && Patterns.EMAIL_ADDRESS.matcher(target).matches());
--     }
-- 
---    private void OnLogin(){
--+    private void OnLogin() {
-- 
--         //click login
--         btnLogin.setOnClickListener(new View.OnClickListener() {
--@@ -245,12 +243,12 @@
--                 //code login
--                 ProgressDialog progressDialog = new ProgressDialog(Login.this);
--                 String email = edtNumberPhone.getText().toString().trim();
---                if (!isValidEmail(email)){
--+                if (!isValidEmail(email)) {
--                     edtNumberPhone.setError("Email không đúng!");
--                     return;
--                 }
--                 String password = edtPassword.getText().toString().trim();
---                if (password.length() < 6 ){
--+                if (password.length() < 6) {
--                     edtPassword.setError("Mật khẩu phải bằng hoặc trên 6 kí tự");
--                     return;
--                 }
--@@ -273,22 +271,24 @@
--                                             List<Users> mListUser = new ArrayList<>();
--                                             FirebaseDatabase database = FirebaseDatabase.getInstance();
--                                             DatabaseReference myRef = database.getReference("Users");
---                    
--+
--                                             myRef.addValueEventListener(new ValueEventListener() {
--                                                 @Override
--                                                 public void onDataChange(@NonNull DataSnapshot snapshot) {
--                                                     mListUser.clear();
---                                                    for (DataSnapshot snapshot1 : snapshot.getChildren()){
--+                                                    for (DataSnapshot snapshot1 : snapshot.getChildren()) {
--                                                         Users user = snapshot1.getValue(Users.class);
--                                                         mListUser.add(user);
-- 
--                                                     }
---                                                    for (int i = 0; i < mListUser.size(); i++){
---                                                        if (mListUser.get(i).getEmail().equals(email) && mListUser.get(i).getPassword().equals(password)){
--+                                                    for (int i = 0; i < mListUser.size(); i++) {
--+                                                        if (mListUser.get(i).getEmail().equals(email) && mListUser.get(i).getPassword().equals(password)) {
--                                                             Toast.makeText(Login.this, "Đăng nhập thành công!", Toast.LENGTH_SHORT).show();
--                                                             Intent intent = new Intent(Login.this, MainActivity.class);
---                                                            setResult(RESULT_OK,intent );
---                                                            finish();
--+                                                            intent.putExtra("statusLogin", 1);
--+                                                            setResult(RESULT_OK, intent);
--+                                                            startActivity(intent);
--+//                                                            finish();
-- 
--                                                         }
--                                                     }
--@@ -311,7 +311,7 @@
--                                         }
--                                         progressDialog.dismiss();
--                                     }
---                                },2000);
--+                                }, 2000);
--                             }
--                         });
--             }
--@@ -338,8 +338,10 @@
--                 task.getResult(ApiException.class);
--                 Toast.makeText(Login.this, "Đăng nhập thành công!", Toast.LENGTH_SHORT).show();
--                 Intent intent = new Intent(Login.this, MainActivity.class);
---                setResult(RESULT_OK,intent);
---                finish();
--+                setResult(RESULT_OK, intent);
--+                intent.putExtra("statusLogin", 1);
--+                startActivity(intent);
--+//                finish();
--             } catch (ApiException e) {
--                 Toast.makeText(this, "signInResult:failed code=" + e.getStatusCode(), Toast.LENGTH_SHORT).show();
--             }
--@@ -350,7 +352,7 @@
--     protected void onStart() {
--         super.onStart();
--         GoogleSignInAccount account = GoogleSignIn.getLastSignedInAccount(this);
---        if (account != null){
--+        if (account != null) {
--             finish();
--         }
-- 
--Index: app/src/main/java/com/example/duan1/Adapter/dmucTheThaoAdapter.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1.Adapter;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.dagTinGiaiTriActivity;\r\nimport com.example.duan1.dangTinThoiTrangActivity;\r\nimport com.example.duan1.model.giaiTri;\r\n\r\nimport java.util.List;\r\n\r\npublic class dmucTheThaoAdapter extends RecyclerView.Adapter<dmucTheThaoAdapter.ViewHolder> {\r\n\r\n    private Context mContext;\r\n    private List<giaiTri> listGiaiTri;\r\n\r\n    public dmucTheThaoAdapter(Context mContext, List<giaiTri> listGiaiTri) {\r\n        this.mContext = mContext;\r\n        this.listGiaiTri = listGiaiTri;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_danh_muc_the_thao, parent, false);\r\n\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n        giaiTri mGiaiTri = listGiaiTri.get(position);\r\n\r\n        holder.tenDanhMuc.setText(mGiaiTri.getTen());\r\n        holder.layout_item.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(mContext , dagTinGiaiTriActivity.class);\r\n                intent.putExtra(\"tenDanhMuc\" , mGiaiTri.getTen());\r\n                mContext.startActivity(intent);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        if(listGiaiTri != null) {\r\n            return listGiaiTri.size();\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n        TextView tenDanhMuc;\r\n        LinearLayout layout_item;\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            layout_item = itemView.findViewById(R.id.layout_item_theThao);\r\n            tenDanhMuc = itemView.findViewById(R.id.tvTenDanhMucTheThao);\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/Adapter/dmucTheThaoAdapter.java b/app/src/main/java/com/example/duan1/Adapter/dmucTheThaoAdapter.java
----- a/app/src/main/java/com/example/duan1/Adapter/dmucTheThaoAdapter.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/Adapter/dmucTheThaoAdapter.java	(date 1669998003390)
--@@ -41,6 +41,7 @@
--     public void onBindViewHolder(@NonNull ViewHolder holder, int position) {
--         giaiTri mGiaiTri = listGiaiTri.get(position);
-- 
--+
--         holder.tenDanhMuc.setText(mGiaiTri.getTen());
--         holder.layout_item.setOnClickListener(new View.OnClickListener() {
--             @Override
--Index: app/src/main/res/drawable/ic_message.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/drawable/ic_message.xml b/app/src/main/res/drawable/ic_message.xml
--new file mode 100644
----- /dev/null	(date 1669962128962)
--+++ b/app/src/main/res/drawable/ic_message.xml	(date 1669962128962)
--@@ -0,0 +1,5 @@
--+<vector android:alpha="0.9" android:height="24dp" android:tint="#2D2929"
--+    android:viewportHeight="24" android:viewportWidth="24"
--+    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
--+    <path android:fillColor="@android:color/white" android:pathData="M20,2L4,2c-1.1,0 -1.99,0.9 -1.99,2L2,22l4,-4h14c1.1,0 2,-0.9 2,-2L22,4c0,-1.1 -0.9,-2 -2,-2zM18,14L6,14v-2h12v2zM18,11L6,11L6,9h12v2zM18,8L6,8L6,6h12v2z"/>
--+</vector>
--Index: app/src/main/java/com/example/duan1/Adapter/dmucThoiTrangAdapter.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1.Adapter;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.dangTinThoiTrangActivity;\r\nimport com.example.duan1.model.thoiTrang;\r\nimport com.example.duan1.model.xeCo;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class dmucThoiTrangAdapter extends RecyclerView.Adapter<dmucThoiTrangAdapter.ViewHolder> {\r\n    private Context mContext ;\r\n    private List<thoiTrang> listThoiTrang = new ArrayList<>();\r\n\r\n    public dmucThoiTrangAdapter(Context mContext, List<thoiTrang> listThoiTrang) {\r\n        this.mContext = mContext;\r\n        this.listThoiTrang = listThoiTrang;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_danh_muc_thoi_trang, parent,false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n        thoiTrang mThoiTrang = listThoiTrang.get(position);\r\n        holder.tenDanhMuc.setText(mThoiTrang.getTenThoiTrang());\r\n        holder.layout_item_thoiTrang.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(mContext , dangTinThoiTrangActivity.class);\r\n                intent.putExtra(\"tenDanhMuc\" , mThoiTrang.getTenThoiTrang());\r\n                mContext.startActivity(intent);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        if(listThoiTrang != null ){\r\n            return listThoiTrang.size();\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n        TextView tenDanhMuc;\r\n        LinearLayout layout_item_thoiTrang;\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            tenDanhMuc = itemView.findViewById(R.id.tvTenDanhMuc);\r\n            layout_item_thoiTrang = itemView.findViewById(R.id.layout_item_thoiTrang);\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/Adapter/dmucThoiTrangAdapter.java b/app/src/main/java/com/example/duan1/Adapter/dmucThoiTrangAdapter.java
----- a/app/src/main/java/com/example/duan1/Adapter/dmucThoiTrangAdapter.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/Adapter/dmucThoiTrangAdapter.java	(date 1670001380137)
--@@ -2,6 +2,7 @@
-- 
-- import android.content.Context;
-- import android.content.Intent;
--+import android.os.Bundle;
-- import android.view.LayoutInflater;
-- import android.view.View;
-- import android.view.ViewGroup;
--@@ -13,6 +14,7 @@
-- import androidx.recyclerview.widget.RecyclerView;
-- 
-- import com.example.duan1.R;
--+import com.example.duan1.chonDanhMucThoiTrangAcrivity;
-- import com.example.duan1.dangTinThoiTrangActivity;
-- import com.example.duan1.model.thoiTrang;
-- import com.example.duan1.model.xeCo;
--@@ -22,7 +24,8 @@
-- 
-- public class dmucThoiTrangAdapter extends RecyclerView.Adapter<dmucThoiTrangAdapter.ViewHolder> {
--     private Context mContext ;
---    private List<thoiTrang> listThoiTrang = new ArrayList<>();
--+    private List<thoiTrang> listThoiTrang ;
--+    chonDanhMucThoiTrangAcrivity chonDanhMucThoiTrangAcrivity;
-- 
--     public dmucThoiTrangAdapter(Context mContext, List<thoiTrang> listThoiTrang) {
--         this.mContext = mContext;
--@@ -33,18 +36,25 @@
--     @Override
--     public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
--         View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_danh_muc_thoi_trang, parent,false);
--+
--         return new ViewHolder(view);
--     }
-- 
--     @Override
--     public void onBindViewHolder(@NonNull ViewHolder holder, int position) {
--         thoiTrang mThoiTrang = listThoiTrang.get(position);
--+
--         holder.tenDanhMuc.setText(mThoiTrang.getTenThoiTrang());
--+
--+
--+
--         holder.layout_item_thoiTrang.setOnClickListener(new View.OnClickListener() {
--             @Override
--             public void onClick(View view) {
--                 Intent intent = new Intent(mContext , dangTinThoiTrangActivity.class);
---                intent.putExtra("tenDanhMuc" , mThoiTrang.getTenThoiTrang());
--+                Bundle bundle = new Bundle();
--+                bundle.putString("tenDanhMuc" , mThoiTrang.getTenThoiTrang());
--+                intent.putExtras(bundle);
--                 mContext.startActivity(intent);
--             }
--         });
--@@ -62,6 +72,7 @@
--     public class ViewHolder extends RecyclerView.ViewHolder {
--         TextView tenDanhMuc;
--         LinearLayout layout_item_thoiTrang;
--+
--         public ViewHolder(@NonNull View itemView) {
--             super(itemView);
--             tenDanhMuc = itemView.findViewById(R.id.tvTenDanhMuc);
--Index: .idea/misc.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable-v24/ic_launcher_foreground.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/background_title.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_button_login.xml\" value=\"0.142\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_button_register.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_corner.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_input.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_overlay.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/duongvien_goctron.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_add_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_home_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_more_horiz_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_newspaper_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_shopping_basket_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/transparent_background.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_bdsactivity.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_dien_may.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_do_dien_tu.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_giai_tri.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_thoi_trang.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_thoi_trang_acrivity.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_xe_co.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dag_tin_giai_tri.xml\" value=\"0.12978142076502733\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_bdsactivity.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_bdsdat.xml\" value=\"0.21\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_bdsphong_tro.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_thoi_trang.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_edit_account.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_login.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_main.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_register.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_splash_screen.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/dialog_item_bat_dong_san.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_quan_li_tin.xml\" value=\"0.1094224924012158\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_them.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_trang_chu.xml\" value=\"0.13541666666666666\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_bds.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_dien_may.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_the_thao.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_thoi_trang.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_direction.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_dmuc_dien_tu.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_dmuc_xe_co.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_image_add_news.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_slider.xml\" value=\"0.2\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/layout_dialog_chon_danh_muc.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/slider_item_layout.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/menu/bottom_nav_menu.xml\" value=\"0.225\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/menu/menu_them.xml\" value=\"0.225\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"Android Studio default JDK\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/misc.xml b/.idea/misc.xml
----- a/.idea/misc.xml	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/.idea/misc.xml	(date 1669962272860)
--@@ -36,7 +36,7 @@
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_register.xml" value="0.25" />
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_splash_screen.xml" value="0.17028985507246377" />
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/dialog_item_bat_dong_san.xml" value="0.1721014492753623" />
---        <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_quan_li_tin.xml" value="0.1094224924012158" />
--+        <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_quan_li_tin.xml" value="0.19" />
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_them.xml" value="0.1721014492753623" />
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_trang_chu.xml" value="0.13541666666666666" />
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_bds.xml" value="0.1721014492753623" />
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM__Changes_.xml	(revision 8b4f3a7e9bb8a509b027a6bcf436e71b0b66f431)
-+++ /dev/null	(revision 8b4f3a7e9bb8a509b027a6bcf436e71b0b66f431)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]" date="1670034776740" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/3/2022 9:31 AM [Changes]" />
--</changelist>
-\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_11_2022_10_32_PM__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_11_2022_10_32_PM__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_11_2022_10_32_PM__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_11_2022_10_32_PM__Changes_.xml	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_12_11_2022_10_32_PM_[Changes]" date="1670772847588" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_11_2022_10_32_PM_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/11/2022 10:32 PM [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_10_12_2022_10_16_SA__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_10_12_2022_10_16_SA__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_10_12_2022_10_16_SA__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_10_12_2022_10_16_SA__Changes_.xml	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Checkout_at_10_12_2022_10_16_SA_[Changes]" date="1670642197889" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_10_12_2022_10_16_SA_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 10/12/2022 10:16 SA [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_3_02_CH_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_3_02_CH_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_3_02_CH_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_3_02_CH_[Changes]/shelved.patch	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,18 +0,0 @@
-Index: app/src/main/java/com/example/duan1/EditAccount.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.Dialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.provider.MediaStore;\r\nimport android.view.Gravity;\r\nimport android.view.View;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.result.ActivityResult;\r\nimport androidx.activity.result.ActivityResultCallback;\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\nimport androidx.annotation.NonNull;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.duan1.model.Users;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.gun0912.tedpermission.PermissionListener;\r\nimport com.gun0912.tedpermission.normal.TedPermission;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.List;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\npublic class EditAccount extends AppCompatActivity {\r\n\r\n    private static final int MY_REQUEST_CODE = 12;\r\n\r\n    private TextView tvName, tvSdt, tvEmail, tvLocation, tvCCCD, tvPassword, tvSex, tvDateOfBirth\r\n            , tvHoaDon;\r\n    private CircleImageView imgImage;\r\n    private RelativeLayout imgAvatar;\r\n    private Button imgName;\r\n    private ImageButton btnBack;\r\n    private Bitmap bitmapselect;\r\n    private String strImage = \" \";\r\n    private FirebaseAuth auth;\r\n    private FirebaseUser user;\r\n    private ProgressDialog progressDialog;\r\n    private List<Users> mListUser;\r\n\r\n    private ActivityResultLauncher<Intent> mActivityResultLauncher = registerForActivityResult(\r\n            new ActivityResultContracts.StartActivityForResult(),\r\n            new ActivityResultCallback<ActivityResult>() {\r\n                @Override\r\n                public void onActivityResult(ActivityResult result) {\r\n\r\n                    if(result.getResultCode()== Activity.RESULT_OK){\r\n                        //there are no request codes\r\n                        Intent data = result.getData();\r\n                        if(data == null){\r\n                            return;\r\n                        }\r\n                        Uri uri = data.getData();\r\n                        try {\r\n                            Calendar calendar = Calendar.getInstance();\r\n\r\n                            bitmapselect = MediaStore.Images.Media.getBitmap(getContentResolver(),uri);\r\n\r\n                            progressDialog.setTitle(\"Đang tải ảnh lên...!\");\r\n                            progressDialog.show();\r\n\r\n                            FirebaseStorage storage = FirebaseStorage.getInstance();\r\n                            StorageReference storageRef = storage.getReference();\r\n                            StorageReference mountainsRef = storageRef.child(\"AvatarUser/\"+user.getEmail()+\"/image\"+calendar.getTimeInMillis());\r\n                            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n                            bitmapselect.compress(Bitmap.CompressFormat.JPEG, 100, baos);\r\n                            byte[] dataImage = baos.toByteArray();\r\n\r\n                            UploadTask uploadTask = mountainsRef.putBytes(dataImage);\r\n                            uploadTask.addOnFailureListener(new OnFailureListener() {\r\n                                @Override\r\n                                public void onFailure(@NonNull Exception exception) {\r\n                                    // Handle unsuccessful uploads\r\n                                    progressDialog.dismiss();\r\n                                    Toast.makeText(EditAccount.this, \"Lỗi cập nhật hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                                @Override\r\n                                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                                    // taskSnapshot.getMetadata() contains file metadata such as size, content-type, etc.\r\n\r\n                                    mountainsRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                        @Override\r\n                                        public void onSuccess(Uri uri) {\r\n                                            strImage = String.valueOf(uri);\r\n                                            UpdateImageUrl();\r\n                                            progressDialog.dismiss();\r\n                                        }\r\n                                    }).addOnFailureListener(new OnFailureListener() {\r\n                                        @Override\r\n                                        public void onFailure(@NonNull Exception exception) {\r\n                                            // Handle any errors\r\n                                            progressDialog.dismiss();\r\n                                            Toast.makeText(EditAccount.this, \"Lỗi tải URL hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                    });\r\n                                }\r\n                            });\r\n\r\n\r\n                        }catch (IOException e){\r\n                            e.printStackTrace();\r\n                            progressDialog.dismiss();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    );\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_edit_account);\r\n        initUi();\r\n        getDataUser();\r\n        progressDialog.show();\r\n        new Handler().postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                initClickListener();\r\n                progressDialog.dismiss();\r\n            }\r\n        }, 500);\r\n\r\n    }\r\n\r\n    //ánh xạ\r\n    private void initUi() {\r\n        tvName = findViewById(R.id.tv_name_activity_editaccount);\r\n        tvSdt = findViewById(R.id.tv_sdt_activity_editaccount);\r\n        tvLocation = findViewById(R.id.tv_location_activity_editaccount);\r\n        tvCCCD = findViewById(R.id.tv_cccd_activity_editaccount);\r\n        tvPassword = findViewById(R.id.tv_password_activity_editaccount);\r\n        tvSex = findViewById(R.id.tv_sex_activity_editaccount);\r\n        tvDateOfBirth = findViewById(R.id.tv_date_of_birth_activity_editaccount);\r\n        tvHoaDon = findViewById(R.id.tv_xuat_hoa_don_activity_editaccount);\r\n        imgAvatar = findViewById(R.id.img_avatar_activity_editaccount);\r\n        imgImage = findViewById(R.id.img_image);\r\n        imgName = findViewById(R.id.img_name);\r\n        btnBack = findViewById(R.id.imgbtn_back);\r\n\r\n        auth = FirebaseAuth.getInstance();\r\n        user = auth.getCurrentUser();\r\n\r\n        progressDialog = new ProgressDialog(this);\r\n    }\r\n\r\n    //sự kiện click\r\n    private void initClickListener() {\r\n        imgAvatar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                requestPermissionsimage();\r\n            }\r\n        });\r\n\r\n\r\n        imgName.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog.setTitle(\"Xin chờ!...\");\r\n                progressDialog.show();\r\n                UpdateName();\r\n                progressDialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n        tvSdt.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                setSdt();\r\n            }\r\n        });\r\n\r\n        tvCCCD.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                setCCCD();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    @Nullable\r\n    private String checkname(@NonNull String s){\r\n        String name1 = \"\";\r\n        if (s.length() > 20){\r\n            for (String s1: s.split(\"\")){\r\n                name1+=s1;\r\n                if (name1.length() == 20){\r\n                    break;\r\n                }\r\n            }\r\n            return name1+\"...\";\r\n        }\r\n\r\n        return s;\r\n    }\r\n\r\n    private void getDataUser(){\r\n        FirebaseAuth auth = FirebaseAuth.getInstance();\r\n        FirebaseUser user = auth.getCurrentUser();\r\n        String email = user.getEmail();\r\n        mListUser = new ArrayList<>();\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference(\"Users\");\r\n        myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                mListUser.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren()){\r\n                    Users user = snapshot1.getValue(Users.class);\r\n                    mListUser.add(user);\r\n                    if (user.getEmail().equals(email)){\r\n                        tvName.setText(checkname(user.getName()));\r\n                        String strImage = user.getImage().trim();\r\n                        if (strImage.isEmpty()){\r\n                            return;\r\n                        }\r\n                        Picasso.with(EditAccount.this)\r\n                                .load(strImage)\r\n                                .placeholder(R.drawable.user_icon)\r\n                                .error(R.drawable.user_icon)\r\n                                .into(imgImage);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void openGallery() {\r\n        Intent intent = new Intent();\r\n        intent.setType(\"image/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        mActivityResultLauncher.launch(Intent.createChooser(intent, \"Select picture\"));\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if(requestCode == MY_REQUEST_CODE){\r\n            if(grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n                openGallery();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private void requestPermissionsimage() {\r\n        PermissionListener permissionlistener = new PermissionListener() {\r\n            @Override\r\n            public void onPermissionGranted() {\r\n                openGallery();\r\n            }\r\n\r\n            @Override\r\n            public void onPermissionDenied(List<String> deniedPermissions) {\r\n                Toast.makeText(EditAccount.this, \"Đã từ chối quyền truy cập\\n\" + deniedPermissions.toString(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        };\r\n        TedPermission.create()\r\n                .setPermissionListener(permissionlistener)\r\n                .setDeniedMessage(\"If you reject permission,you can not use this service\\n\\nPlease turn on permissions at [Setting] > [Permission]\")\r\n                .setPermissions(Manifest.permission.CAMERA, Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE)\r\n                .check();\r\n    }\r\n\r\n    private void UpdateImageUrl() {\r\n        if (mListUser.size() == 0){\r\n            return;\r\n        }\r\n        String email = user.getEmail();\r\n        int index = -1;\r\n        for (int i = 0; i < mListUser.size(); i++){\r\n            if (mListUser.get(i).getEmail().equals(email)){\r\n                index = i;\r\n            }\r\n        }\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference();\r\n        myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"image\").setValue(strImage)\r\n                .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Void> task) {\r\n                        Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    private void UpdateName(){\r\n        if (mListUser.size() == 0){\r\n            finish();\r\n        }\r\n        String email = user.getEmail();\r\n        String name = tvName.getText().toString().trim();\r\n        int index = -1;\r\n        for (int i = 0; i < mListUser.size(); i++){\r\n            if (mListUser.get(i).getEmail().equals(email)){\r\n                index = i;\r\n            }\r\n        }\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference();\r\n        myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"name\").setValue(name)\r\n                .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Void> task) {\r\n                        Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    private void setSdt() {\r\n        final Dialog dialog = new Dialog(EditAccount.this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.dialog_edit_account);\r\n\r\n        Window window = dialog.getWindow();\r\n        if(window == null){\r\n            return;\r\n        }\r\n        dialog.setCancelable(false);\r\n\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        window.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.CENTER;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        //anh xa\r\n        TextView tvTitle = dialog.findViewById(R.id.tv_title_dialog);\r\n        EditText edtSdt = dialog.findViewById(R.id.edt_dialog);\r\n        TextInputLayout tilHint = dialog.findViewById(R.id.hint);\r\n        Button btnOk = dialog.findViewById(R.id.btn_them_dialog);\r\n        Button btnCancel = dialog.findViewById(R.id.btn_cancel_dialog);\r\n\r\n        tvTitle.setText(\"Cập nhật số điện thoại\");\r\n        tilHint.setHint(\"Nhập số điện thoại...\");\r\n\r\n        btnCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnOk.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String sdt = edtSdt.getText().toString().trim();\r\n                if (edtSdt == null || sdt.isEmpty()){\r\n                    edtSdt.setError(\"không được để trống!\");\r\n                    return;\r\n                }\r\n                String email = user.getEmail();\r\n                int index = -1;\r\n                for (int i = 0; i < mListUser.size(); i++){\r\n                    if (mListUser.get(i).getEmail().equals(email)){\r\n                        index = i;\r\n                    }\r\n                }\r\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                DatabaseReference myRef = database.getReference();\r\n                myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"sdt\").setValue(sdt)\r\n                        .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<Void> task) {\r\n                                Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        dialog.show();\r\n    }\r\n\r\n    private void setCCCD() {\r\n        final Dialog dialog = new Dialog(EditAccount.this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.dialog_edit_account);\r\n\r\n        Window window = dialog.getWindow();\r\n        if(window == null){\r\n            return;\r\n        }\r\n        dialog.setCancelable(false);\r\n\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        window.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.CENTER;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        //anh xa\r\n        TextView tvTitle = dialog.findViewById(R.id.tv_title_dialog);\r\n        EditText edtCCCD = dialog.findViewById(R.id.edt_dialog);\r\n        TextInputLayout tilHint = dialog.findViewById(R.id.hint);\r\n        Button btnOk = dialog.findViewById(R.id.btn_them_dialog);\r\n        Button btnCancel = dialog.findViewById(R.id.btn_cancel_dialog);\r\n\r\n        tvTitle.setText(\"Cập nhật số CMND/CCCD/Hộ chiếu\");\r\n        tilHint.setHint(\"CMND/CCCD/Hộ chiếu...\");\r\n\r\n        btnCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnOk.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String cccd = edtCCCD.getText().toString().trim();\r\n                if (edtCCCD == null || cccd.isEmpty()){\r\n                    edtCCCD.setError(\"không được để trống!\");\r\n                    return;\r\n                }\r\n                String email = user.getEmail();\r\n                int index = -1;\r\n                for (int i = 0; i < mListUser.size(); i++){\r\n                    if (mListUser.get(i).getEmail().equals(email)){\r\n                        index = i;\r\n                    }\r\n                }\r\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                DatabaseReference myRef = database.getReference();\r\n                myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"cccd\").setValue(cccd)\r\n                        .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<Void> task) {\r\n                                Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        dialog.show();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/EditAccount.java b/app/src/main/java/com/example/duan1/EditAccount.java
---- a/app/src/main/java/com/example/duan1/EditAccount.java	(revision 870beee55bcd2f5bdda21e712a151371536a3f7e)
-+++ b/app/src/main/java/com/example/duan1/EditAccount.java	(date 1670832149918)
-@@ -229,7 +229,6 @@
- 
-     }
- 
--
-     @Nullable
-     private String checkname(@NonNull String s){
-         String name1 = "";
Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_7_34_SA_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_7_34_SA_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_7_34_SA_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_7_34_SA_[Changes]/shelved.patch	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,51 +0,0 @@
-Index: app/src/main/java/com/example/duan1/EditAccount.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.Dialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.provider.MediaStore;\r\nimport android.view.Gravity;\r\nimport android.view.View;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.result.ActivityResult;\r\nimport androidx.activity.result.ActivityResultCallback;\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\nimport androidx.annotation.NonNull;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.duan1.model.Users;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.gun0912.tedpermission.PermissionListener;\r\nimport com.gun0912.tedpermission.normal.TedPermission;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.List;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\npublic class EditAccount extends AppCompatActivity {\r\n\r\n    private static final int MY_REQUEST_CODE = 12;\r\n\r\n    private TextView tvName, tvSdt, tvEmail, tvLocation, tvCCCD, tvPassword, tvSex, tvDateOfBirth\r\n            , tvHoaDon;\r\n    private CircleImageView imgImage;\r\n    private RelativeLayout imgAvatar;\r\n    private Button imgName;\r\n    private ImageButton btnBack;\r\n    private Bitmap bitmapselect;\r\n    private String strImage = \" \";\r\n    private FirebaseAuth auth;\r\n    private FirebaseUser user;\r\n    private ProgressDialog progressDialog;\r\n    private List<Users> mListUser;\r\n\r\n    private ActivityResultLauncher<Intent> mActivityResultLauncher = registerForActivityResult(\r\n            new ActivityResultContracts.StartActivityForResult(),\r\n            new ActivityResultCallback<ActivityResult>() {\r\n                @Override\r\n                public void onActivityResult(ActivityResult result) {\r\n\r\n                    if(result.getResultCode()== Activity.RESULT_OK){\r\n                        //there are no request codes\r\n                        Intent data = result.getData();\r\n                        if(data == null){\r\n                            return;\r\n                        }\r\n                        Uri uri = data.getData();\r\n                        try {\r\n                            Calendar calendar = Calendar.getInstance();\r\n\r\n                            bitmapselect = MediaStore.Images.Media.getBitmap(getContentResolver(),uri);\r\n\r\n                            progressDialog.setTitle(\"Đang tải ảnh lên...!\");\r\n                            progressDialog.show();\r\n\r\n                            FirebaseStorage storage = FirebaseStorage.getInstance();\r\n                            StorageReference storageRef = storage.getReference();\r\n                            StorageReference mountainsRef = storageRef.child(\"AvatarUser/\"+user.getEmail()+\"/image\"+calendar.getTimeInMillis());\r\n                            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n                            bitmapselect.compress(Bitmap.CompressFormat.JPEG, 100, baos);\r\n                            byte[] dataImage = baos.toByteArray();\r\n\r\n                            UploadTask uploadTask = mountainsRef.putBytes(dataImage);\r\n                            uploadTask.addOnFailureListener(new OnFailureListener() {\r\n                                @Override\r\n                                public void onFailure(@NonNull Exception exception) {\r\n                                    // Handle unsuccessful uploads\r\n                                    progressDialog.dismiss();\r\n                                    Toast.makeText(EditAccount.this, \"Lỗi cập nhật hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                                @Override\r\n                                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                                    // taskSnapshot.getMetadata() contains file metadata such as size, content-type, etc.\r\n\r\n                                    mountainsRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                        @Override\r\n                                        public void onSuccess(Uri uri) {\r\n                                            strImage = String.valueOf(uri);\r\n                                            UpdateImageUrl();\r\n                                            progressDialog.dismiss();\r\n                                        }\r\n                                    }).addOnFailureListener(new OnFailureListener() {\r\n                                        @Override\r\n                                        public void onFailure(@NonNull Exception exception) {\r\n                                            // Handle any errors\r\n                                            progressDialog.dismiss();\r\n                                            Toast.makeText(EditAccount.this, \"Lỗi tải URL hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                    });\r\n                                }\r\n                            });\r\n\r\n\r\n                        }catch (IOException e){\r\n                            e.printStackTrace();\r\n                            progressDialog.dismiss();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    );\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_edit_account);\r\n        initUi();\r\n        getDataUser();\r\n        progressDialog.show();\r\n        new Handler().postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                initClickListener();\r\n                progressDialog.dismiss();\r\n            }\r\n        }, 500);\r\n\r\n    }\r\n\r\n    //ánh xạ\r\n    private void initUi() {\r\n        tvName = findViewById(R.id.tv_name_activity_editaccount);\r\n        tvSdt = findViewById(R.id.tv_sdt_activity_editaccount);\r\n        tvLocation = findViewById(R.id.tv_location_activity_editaccount);\r\n        tvCCCD = findViewById(R.id.tv_cccd_activity_editaccount);\r\n        tvPassword = findViewById(R.id.tv_password_activity_editaccount);\r\n        tvSex = findViewById(R.id.tv_sex_activity_editaccount);\r\n        tvDateOfBirth = findViewById(R.id.tv_date_of_birth_activity_editaccount);\r\n        tvHoaDon = findViewById(R.id.tv_xuat_hoa_don_activity_editaccount);\r\n        imgAvatar = findViewById(R.id.img_avatar_activity_editaccount);\r\n        imgImage = findViewById(R.id.img_image);\r\n        imgName = findViewById(R.id.img_name);\r\n        btnBack = findViewById(R.id.imgbtn_back);\r\n\r\n        auth = FirebaseAuth.getInstance();\r\n        user = auth.getCurrentUser();\r\n\r\n        progressDialog = new ProgressDialog(this);\r\n    }\r\n\r\n    //sự kiện click\r\n    private void initClickListener() {\r\n        imgAvatar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                requestPermissionsimage();\r\n            }\r\n        });\r\n\r\n\r\n        imgName.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog.setTitle(\"Xin chờ!...\");\r\n                progressDialog.show();\r\n                UpdateName();\r\n                progressDialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n        tvSdt.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                setSdt();\r\n            }\r\n        });\r\n\r\n        tvCCCD.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                setCCCD();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    @Nullable\r\n    private String checkname(@NonNull String s){\r\n        String name1 = \"\";\r\n        if (s.length() > 20){\r\n            for (String s1: s.split(\"\")){\r\n                name1+=s1;\r\n                if (name1.length() == 20){\r\n                    break;\r\n                }\r\n            }\r\n            return name1+\"...\";\r\n        }\r\n\r\n        return s;\r\n    }\r\n\r\n    private void getDataUser(){\r\n        FirebaseAuth auth = FirebaseAuth.getInstance();\r\n        FirebaseUser user = auth.getCurrentUser();\r\n        String email = user.getEmail();\r\n        mListUser = new ArrayList<>();\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference(\"Users\");\r\n        myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                mListUser.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren()){\r\n                    Users user = snapshot1.getValue(Users.class);\r\n                    mListUser.add(user);\r\n                    if (user.getEmail().equals(email)){\r\n                        tvName.setText(checkname(user.getName()));\r\n                        String strImage = user.getImage().trim();\r\n                        if (strImage.isEmpty()){\r\n                            return;\r\n                        }\r\n                        Picasso.with(EditAccount.this)\r\n                                .load(strImage)\r\n                                .placeholder(R.drawable.user_icon)\r\n                                .error(R.drawable.user_icon)\r\n                                .into(imgImage);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void openGallery() {\r\n        Intent intent = new Intent();\r\n        intent.setType(\"image/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        mActivityResultLauncher.launch(Intent.createChooser(intent, \"Select picture\"));\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if(requestCode == MY_REQUEST_CODE){\r\n            if(grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n                openGallery();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private void requestPermissionsimage() {\r\n        PermissionListener permissionlistener = new PermissionListener() {\r\n            @Override\r\n            public void onPermissionGranted() {\r\n                openGallery();\r\n            }\r\n\r\n            @Override\r\n            public void onPermissionDenied(List<String> deniedPermissions) {\r\n                Toast.makeText(EditAccount.this, \"Đã từ chối quyền truy cập\\n\" + deniedPermissions.toString(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        };\r\n        TedPermission.create()\r\n                .setPermissionListener(permissionlistener)\r\n                .setDeniedMessage(\"If you reject permission,you can not use this service\\n\\nPlease turn on permissions at [Setting] > [Permission]\")\r\n                .setPermissions(Manifest.permission.CAMERA, Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE)\r\n                .check();\r\n    }\r\n\r\n    private void UpdateImageUrl() {\r\n        if (mListUser.size() == 0){\r\n            return;\r\n        }\r\n        String email = user.getEmail();\r\n        int index = -1;\r\n        for (int i = 0; i < mListUser.size(); i++){\r\n            if (mListUser.get(i).getEmail().equals(email)){\r\n                index = i;\r\n            }\r\n        }\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference();\r\n        myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"image\").setValue(strImage)\r\n                .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Void> task) {\r\n                        Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    private void UpdateName(){\r\n        if (mListUser.size() == 0){\r\n            finish();\r\n        }\r\n        String email = user.getEmail();\r\n        String name = tvName.getText().toString().trim();\r\n        int index = -1;\r\n        for (int i = 0; i < mListUser.size(); i++){\r\n            if (mListUser.get(i).getEmail().equals(email)){\r\n                index = i;\r\n            }\r\n        }\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference();\r\n        myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"name\").setValue(name)\r\n                .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Void> task) {\r\n                        Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    private void setSdt() {\r\n        final Dialog dialog = new Dialog(EditAccount.this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.dialog_edit_account);\r\n\r\n        Window window = dialog.getWindow();\r\n        if(window == null){\r\n            return;\r\n        }\r\n        dialog.setCancelable(false);\r\n\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        window.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.CENTER;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        //anh xa\r\n        TextView tvTitle = dialog.findViewById(R.id.tv_title_dialog);\r\n        EditText edtSdt = dialog.findViewById(R.id.edt_dialog);\r\n        TextInputLayout tilHint = dialog.findViewById(R.id.hint);\r\n        Button btnOk = dialog.findViewById(R.id.btn_them_dialog);\r\n        Button btnCancel = dialog.findViewById(R.id.btn_cancel_dialog);\r\n\r\n        tvTitle.setText(\"Cập nhật số điện thoại\");\r\n        tilHint.setHint(\"Nhập số điện thoại...\");\r\n\r\n        btnCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnOk.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String sdt = edtSdt.getText().toString().trim();\r\n                if (edtSdt == null || sdt.isEmpty()){\r\n                    edtSdt.setError(\"không được để trống!\");\r\n                    return;\r\n                }\r\n                String email = user.getEmail();\r\n                int index = -1;\r\n                for (int i = 0; i < mListUser.size(); i++){\r\n                    if (mListUser.get(i).getEmail().equals(email)){\r\n                        index = i;\r\n                    }\r\n                }\r\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                DatabaseReference myRef = database.getReference();\r\n                myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"sdt\").setValue(sdt)\r\n                        .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<Void> task) {\r\n                                Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        dialog.show();\r\n    }\r\n\r\n    private void setCCCD() {\r\n        final Dialog dialog = new Dialog(EditAccount.this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.dialog_edit_account);\r\n\r\n        Window window = dialog.getWindow();\r\n        if(window == null){\r\n            return;\r\n        }\r\n        dialog.setCancelable(false);\r\n\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        window.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.CENTER;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        //anh xa\r\n        TextView tvTitle = dialog.findViewById(R.id.tv_title_dialog);\r\n        EditText edtCCCD = dialog.findViewById(R.id.edt_dialog);\r\n        TextInputLayout tilHint = dialog.findViewById(R.id.hint);\r\n        Button btnOk = dialog.findViewById(R.id.btn_them_dialog);\r\n        Button btnCancel = dialog.findViewById(R.id.btn_cancel_dialog);\r\n\r\n        tvTitle.setText(\"Cập nhật số CMND/CCCD/Hộ chiếu\");\r\n        tilHint.setHint(\"CMND/CCCD/Hộ chiếu...\");\r\n\r\n        btnCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnOk.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String cccd = edtCCCD.getText().toString().trim();\r\n                if (edtCCCD == null || cccd.isEmpty()){\r\n                    edtCCCD.setError(\"không được để trống!\");\r\n                    return;\r\n                }\r\n                String email = user.getEmail();\r\n                int index = -1;\r\n                for (int i = 0; i < mListUser.size(); i++){\r\n                    if (mListUser.get(i).getEmail().equals(email)){\r\n                        index = i;\r\n                    }\r\n                }\r\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                DatabaseReference myRef = database.getReference();\r\n                myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"cccd\").setValue(cccd)\r\n                        .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<Void> task) {\r\n                                Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        dialog.show();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/EditAccount.java b/app/src/main/java/com/example/duan1/EditAccount.java
---- a/app/src/main/java/com/example/duan1/EditAccount.java	(revision a7ff6eabccd93f3e582ffe980b17ec3dbd7a8ec9)
-+++ b/app/src/main/java/com/example/duan1/EditAccount.java	(date 1670805250206)
-@@ -227,8 +227,18 @@
-             }
-         });
- 
-+        tvPassword.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View view) {
-+                resetPassword();
-+            }
-+        });
-+
-     }
- 
-+    private void resetPassword() {
-+
-+    }
- 
-     @Nullable
-     private String checkname(@NonNull String s){
-Index: app/src/main/res/layout/activity_edit_account.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".EditAccount\"\r\n    android:orientation=\"vertical\"\r\n    >\r\n\r\n    <androidx.appcompat.widget.Toolbar\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"50dp\"\r\n        android:background=\"@color/Orenge\"\r\n        >\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/imgbtn_back\"\r\n            android:layout_width=\"35dp\"\r\n            android:layout_height=\"35dp\"\r\n            android:background=\"@color/trans...\"\r\n            android:src=\"@drawable/ic_back_page\"\r\n            />\r\n\r\n        <TextView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:text=\"Cài đặt thông tin\"\r\n            android:textSize=\"16dp\"\r\n            android:textStyle=\"bold\"\r\n            android:textColor=\"@color/black\"\r\n            />\r\n\r\n    </androidx.appcompat.widget.Toolbar>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:padding=\"15dp\"\r\n        >\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/img_avatar_activity_editaccount\"\r\n            android:layout_width=\"70dp\"\r\n            android:layout_height=\"70dp\"\r\n            >\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"70dp\"\r\n                android:layout_height=\"70dp\"\r\n                android:background=\"@drawable/bg_tv_edit_account\"\r\n                android:gravity=\"center\"\r\n                >\r\n                <de.hdodenhof.circleimageview.CircleImageView\r\n                    android:id=\"@+id/img_image\"\r\n                    android:layout_width=\"60dp\"\r\n                    android:layout_height=\"60dp\"\r\n                    android:src=\"@drawable/user_icon\"\r\n\r\n                    />\r\n            </LinearLayout>\r\n\r\n            <RelativeLayout\r\n                android:layout_width=\"30dp\"\r\n                android:layout_height=\"30dp\"\r\n                android:background=\"@drawable/bg_tv_edit_account\"\r\n                android:gravity=\"center\"\r\n                android:layout_alignParentBottom=\"true\"\r\n                android:layout_alignParentRight=\"true\"\r\n                >\r\n                <de.hdodenhof.circleimageview.CircleImageView\r\n                    android:layout_width=\"25dp\"\r\n                    android:layout_height=\"25dp\"\r\n                    android:padding=\"4dp\"\r\n                    android:src=\"@drawable/ic_baseline_create_24\"\r\n                    android:background=\"@drawable/bg_edit_img_account\"\r\n                    />\r\n            </RelativeLayout>\r\n\r\n        </RelativeLayout>\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"70dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:layout_gravity=\"center\"\r\n            android:padding=\"10dp\"\r\n            android:background=\"@drawable/bg_input\"\r\n            android:layout_marginLeft=\"10dp\"\r\n            >\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:orientation=\"vertical\"\r\n                android:gravity=\"center\"\r\n                android:layout_marginEnd=\"50dp\"\r\n                >\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"Họ và tên\"\r\n                    android:textColor=\"@color/gray_1\"\r\n                    android:textStyle=\"normal\"\r\n                    android:textSize=\"13dp\"\r\n\r\n                    />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/tv_name_activity_editaccount\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:theme=\"@style/ThemeOverlay.Material3.TextInputEditText\"\r\n                    />\r\n\r\n            </LinearLayout>\r\n\r\n            <Button\r\n                android:id=\"@+id/img_name\"\r\n                android:layout_width=\"50dp\"\r\n                android:padding=\"10dp\"\r\n                android:layout_height=\"match_parent\"\r\n                android:hint=\"Lưu\"\r\n                android:textSize=\"13dp\"\r\n                android:textColorHint=\"@color/white\"\r\n                android:textStyle=\"bold\"\r\n                android:layout_alignParentEnd=\"true\"\r\n\r\n                />\r\n\r\n        </RelativeLayout>\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\"\r\n        android:gravity=\"center\"\r\n        android:padding=\"5dp\"\r\n        >\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_sdt_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Cập nhật số điện thoại\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n\r\n\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_location_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Thêm địa chỉ\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n        <TextView\r\n            android:id=\"@+id/tv_cccd_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"CMND/CCCD/Hộ chiếu\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n        <TextView\r\n            android:id=\"@+id/tv_password_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Mật khẩu\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/gray_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n        <TextView\r\n            android:id=\"@+id/tv_sex_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Cập nhật giới tính\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n        <TextView\r\n            android:id=\"@+id/tv_date_of_birth_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Cập nhật ngày sinh\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n        <TextView\r\n            android:id=\"@+id/tv_xuat_hoa_don_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Thông tin xuất hóa đơn\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n\r\n    </LinearLayout>\r\n\r\n</LinearLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/activity_edit_account.xml b/app/src/main/res/layout/activity_edit_account.xml
---- a/app/src/main/res/layout/activity_edit_account.xml	(revision a7ff6eabccd93f3e582ffe980b17ec3dbd7a8ec9)
-+++ b/app/src/main/res/layout/activity_edit_account.xml	(date 1670772924167)
-@@ -194,9 +194,9 @@
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
-             android:padding="15dp"
--            android:text="Mật khẩu"
-+            android:text="Đổi mật khẩu"
-             android:textSize="14dp"
--            android:textColor="@color/gray_1"
-+            android:textColor="@color/Orenge_1"
-             />
-         <ImageView
-             android:layout_width="match_parent"
Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_7_34_SA__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_7_34_SA__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_7_34_SA__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_7_34_SA__Changes_.xml	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_12_12_2022_7_34_SA_[Changes]" date="1670805291691" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_7_34_SA_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/12/2022 7:34 SA [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_12_12_2022_7_43_SA__Changes_1.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_12_12_2022_7_43_SA__Changes_1.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_12_12_2022_7_43_SA__Changes_1.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_12_12_2022_7_43_SA__Changes_1.xml	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Checkout_at_12_12_2022_7_43_SA_[Changes]1" date="1670805806534" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_12_12_2022_7_43_SA_[Changes]1/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 12/12/2022 7:43 SA [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_10_2022_3_16_PM__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_10_2022_3_16_PM__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_10_2022_3_16_PM__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_10_2022_3_16_PM__Changes_.xml	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_12_10_2022_3_16_PM_[Changes]" date="1670660202750" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_10_2022_3_16_PM_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/10/2022 3:16 PM [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_12_12_2022_7_43_SA_[Changes]1/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_12_12_2022_7_43_SA_[Changes]1/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_12_12_2022_7_43_SA_[Changes]1/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_12_12_2022_7_43_SA_[Changes]1/shelved.patch	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,51 +0,0 @@
-Index: app/src/main/java/com/example/duan1/EditAccount.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.Dialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.provider.MediaStore;\r\nimport android.view.Gravity;\r\nimport android.view.View;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.result.ActivityResult;\r\nimport androidx.activity.result.ActivityResultCallback;\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\nimport androidx.annotation.NonNull;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.duan1.model.Users;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.gun0912.tedpermission.PermissionListener;\r\nimport com.gun0912.tedpermission.normal.TedPermission;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.List;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\npublic class EditAccount extends AppCompatActivity {\r\n\r\n    private static final int MY_REQUEST_CODE = 12;\r\n\r\n    private TextView tvName, tvSdt, tvEmail, tvLocation, tvCCCD, tvPassword, tvSex, tvDateOfBirth\r\n            , tvHoaDon;\r\n    private CircleImageView imgImage;\r\n    private RelativeLayout imgAvatar;\r\n    private Button imgName;\r\n    private ImageButton btnBack;\r\n    private Bitmap bitmapselect;\r\n    private String strImage = \" \";\r\n    private FirebaseAuth auth;\r\n    private FirebaseUser user;\r\n    private ProgressDialog progressDialog;\r\n    private List<Users> mListUser;\r\n\r\n    private ActivityResultLauncher<Intent> mActivityResultLauncher = registerForActivityResult(\r\n            new ActivityResultContracts.StartActivityForResult(),\r\n            new ActivityResultCallback<ActivityResult>() {\r\n                @Override\r\n                public void onActivityResult(ActivityResult result) {\r\n\r\n                    if(result.getResultCode()== Activity.RESULT_OK){\r\n                        //there are no request codes\r\n                        Intent data = result.getData();\r\n                        if(data == null){\r\n                            return;\r\n                        }\r\n                        Uri uri = data.getData();\r\n                        try {\r\n                            Calendar calendar = Calendar.getInstance();\r\n\r\n                            bitmapselect = MediaStore.Images.Media.getBitmap(getContentResolver(),uri);\r\n\r\n                            progressDialog.setTitle(\"Đang tải ảnh lên...!\");\r\n                            progressDialog.show();\r\n\r\n                            FirebaseStorage storage = FirebaseStorage.getInstance();\r\n                            StorageReference storageRef = storage.getReference();\r\n                            StorageReference mountainsRef = storageRef.child(\"AvatarUser/\"+user.getEmail()+\"/image\"+calendar.getTimeInMillis());\r\n                            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n                            bitmapselect.compress(Bitmap.CompressFormat.JPEG, 100, baos);\r\n                            byte[] dataImage = baos.toByteArray();\r\n\r\n                            UploadTask uploadTask = mountainsRef.putBytes(dataImage);\r\n                            uploadTask.addOnFailureListener(new OnFailureListener() {\r\n                                @Override\r\n                                public void onFailure(@NonNull Exception exception) {\r\n                                    // Handle unsuccessful uploads\r\n                                    progressDialog.dismiss();\r\n                                    Toast.makeText(EditAccount.this, \"Lỗi cập nhật hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                                @Override\r\n                                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                                    // taskSnapshot.getMetadata() contains file metadata such as size, content-type, etc.\r\n\r\n                                    mountainsRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                        @Override\r\n                                        public void onSuccess(Uri uri) {\r\n                                            strImage = String.valueOf(uri);\r\n                                            UpdateImageUrl();\r\n                                            progressDialog.dismiss();\r\n                                        }\r\n                                    }).addOnFailureListener(new OnFailureListener() {\r\n                                        @Override\r\n                                        public void onFailure(@NonNull Exception exception) {\r\n                                            // Handle any errors\r\n                                            progressDialog.dismiss();\r\n                                            Toast.makeText(EditAccount.this, \"Lỗi tải URL hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                    });\r\n                                }\r\n                            });\r\n\r\n\r\n                        }catch (IOException e){\r\n                            e.printStackTrace();\r\n                            progressDialog.dismiss();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    );\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_edit_account);\r\n        initUi();\r\n        getDataUser();\r\n        progressDialog.show();\r\n        new Handler().postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                initClickListener();\r\n                progressDialog.dismiss();\r\n            }\r\n        }, 500);\r\n\r\n    }\r\n\r\n    //ánh xạ\r\n    private void initUi() {\r\n        tvName = findViewById(R.id.tv_name_activity_editaccount);\r\n        tvSdt = findViewById(R.id.tv_sdt_activity_editaccount);\r\n        tvLocation = findViewById(R.id.tv_location_activity_editaccount);\r\n        tvCCCD = findViewById(R.id.tv_cccd_activity_editaccount);\r\n        tvPassword = findViewById(R.id.tv_password_activity_editaccount);\r\n        tvSex = findViewById(R.id.tv_sex_activity_editaccount);\r\n        tvDateOfBirth = findViewById(R.id.tv_date_of_birth_activity_editaccount);\r\n        tvHoaDon = findViewById(R.id.tv_xuat_hoa_don_activity_editaccount);\r\n        imgAvatar = findViewById(R.id.img_avatar_activity_editaccount);\r\n        imgImage = findViewById(R.id.img_image);\r\n        imgName = findViewById(R.id.img_name);\r\n        btnBack = findViewById(R.id.imgbtn_back);\r\n\r\n        auth = FirebaseAuth.getInstance();\r\n        user = auth.getCurrentUser();\r\n\r\n        progressDialog = new ProgressDialog(this);\r\n    }\r\n\r\n    //sự kiện click\r\n    private void initClickListener() {\r\n        imgAvatar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                requestPermissionsimage();\r\n            }\r\n        });\r\n\r\n\r\n        imgName.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog.setTitle(\"Xin chờ!...\");\r\n                progressDialog.show();\r\n                UpdateName();\r\n                progressDialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n        tvSdt.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                setSdt();\r\n            }\r\n        });\r\n\r\n        tvCCCD.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                setCCCD();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    @Nullable\r\n    private String checkname(@NonNull String s){\r\n        String name1 = \"\";\r\n        if (s.length() > 20){\r\n            for (String s1: s.split(\"\")){\r\n                name1+=s1;\r\n                if (name1.length() == 20){\r\n                    break;\r\n                }\r\n            }\r\n            return name1+\"...\";\r\n        }\r\n\r\n        return s;\r\n    }\r\n\r\n    private void getDataUser(){\r\n        FirebaseAuth auth = FirebaseAuth.getInstance();\r\n        FirebaseUser user = auth.getCurrentUser();\r\n        String email = user.getEmail();\r\n        mListUser = new ArrayList<>();\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference(\"Users\");\r\n        myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                mListUser.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren()){\r\n                    Users user = snapshot1.getValue(Users.class);\r\n                    mListUser.add(user);\r\n                    if (user.getEmail().equals(email)){\r\n                        tvName.setText(checkname(user.getName()));\r\n                        String strImage = user.getImage().trim();\r\n                        if (strImage.isEmpty()){\r\n                            return;\r\n                        }\r\n                        Picasso.with(EditAccount.this)\r\n                                .load(strImage)\r\n                                .placeholder(R.drawable.user_icon)\r\n                                .error(R.drawable.user_icon)\r\n                                .into(imgImage);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void openGallery() {\r\n        Intent intent = new Intent();\r\n        intent.setType(\"image/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        mActivityResultLauncher.launch(Intent.createChooser(intent, \"Select picture\"));\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if(requestCode == MY_REQUEST_CODE){\r\n            if(grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n                openGallery();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private void requestPermissionsimage() {\r\n        PermissionListener permissionlistener = new PermissionListener() {\r\n            @Override\r\n            public void onPermissionGranted() {\r\n                openGallery();\r\n            }\r\n\r\n            @Override\r\n            public void onPermissionDenied(List<String> deniedPermissions) {\r\n                Toast.makeText(EditAccount.this, \"Đã từ chối quyền truy cập\\n\" + deniedPermissions.toString(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        };\r\n        TedPermission.create()\r\n                .setPermissionListener(permissionlistener)\r\n                .setDeniedMessage(\"If you reject permission,you can not use this service\\n\\nPlease turn on permissions at [Setting] > [Permission]\")\r\n                .setPermissions(Manifest.permission.CAMERA, Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE)\r\n                .check();\r\n    }\r\n\r\n    private void UpdateImageUrl() {\r\n        if (mListUser.size() == 0){\r\n            return;\r\n        }\r\n        String email = user.getEmail();\r\n        int index = -1;\r\n        for (int i = 0; i < mListUser.size(); i++){\r\n            if (mListUser.get(i).getEmail().equals(email)){\r\n                index = i;\r\n            }\r\n        }\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference();\r\n        myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"image\").setValue(strImage)\r\n                .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Void> task) {\r\n                        Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    private void UpdateName(){\r\n        if (mListUser.size() == 0){\r\n            finish();\r\n        }\r\n        String email = user.getEmail();\r\n        String name = tvName.getText().toString().trim();\r\n        int index = -1;\r\n        for (int i = 0; i < mListUser.size(); i++){\r\n            if (mListUser.get(i).getEmail().equals(email)){\r\n                index = i;\r\n            }\r\n        }\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference();\r\n        myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"name\").setValue(name)\r\n                .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Void> task) {\r\n                        Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    private void setSdt() {\r\n        final Dialog dialog = new Dialog(EditAccount.this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.dialog_edit_account);\r\n\r\n        Window window = dialog.getWindow();\r\n        if(window == null){\r\n            return;\r\n        }\r\n        dialog.setCancelable(false);\r\n\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        window.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.CENTER;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        //anh xa\r\n        TextView tvTitle = dialog.findViewById(R.id.tv_title_dialog);\r\n        EditText edtSdt = dialog.findViewById(R.id.edt_dialog);\r\n        TextInputLayout tilHint = dialog.findViewById(R.id.hint);\r\n        Button btnOk = dialog.findViewById(R.id.btn_them_dialog);\r\n        Button btnCancel = dialog.findViewById(R.id.btn_cancel_dialog);\r\n\r\n        tvTitle.setText(\"Cập nhật số điện thoại\");\r\n        tilHint.setHint(\"Nhập số điện thoại...\");\r\n\r\n        btnCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnOk.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String sdt = edtSdt.getText().toString().trim();\r\n                if (edtSdt == null || sdt.isEmpty()){\r\n                    edtSdt.setError(\"không được để trống!\");\r\n                    return;\r\n                }\r\n                String email = user.getEmail();\r\n                int index = -1;\r\n                for (int i = 0; i < mListUser.size(); i++){\r\n                    if (mListUser.get(i).getEmail().equals(email)){\r\n                        index = i;\r\n                    }\r\n                }\r\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                DatabaseReference myRef = database.getReference();\r\n                myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"sdt\").setValue(sdt)\r\n                        .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<Void> task) {\r\n                                Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        dialog.show();\r\n    }\r\n\r\n    private void setCCCD() {\r\n        final Dialog dialog = new Dialog(EditAccount.this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.dialog_edit_account);\r\n\r\n        Window window = dialog.getWindow();\r\n        if(window == null){\r\n            return;\r\n        }\r\n        dialog.setCancelable(false);\r\n\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        window.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.CENTER;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        //anh xa\r\n        TextView tvTitle = dialog.findViewById(R.id.tv_title_dialog);\r\n        EditText edtCCCD = dialog.findViewById(R.id.edt_dialog);\r\n        TextInputLayout tilHint = dialog.findViewById(R.id.hint);\r\n        Button btnOk = dialog.findViewById(R.id.btn_them_dialog);\r\n        Button btnCancel = dialog.findViewById(R.id.btn_cancel_dialog);\r\n\r\n        tvTitle.setText(\"Cập nhật số CMND/CCCD/Hộ chiếu\");\r\n        tilHint.setHint(\"CMND/CCCD/Hộ chiếu...\");\r\n\r\n        btnCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnOk.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String cccd = edtCCCD.getText().toString().trim();\r\n                if (edtCCCD == null || cccd.isEmpty()){\r\n                    edtCCCD.setError(\"không được để trống!\");\r\n                    return;\r\n                }\r\n                String email = user.getEmail();\r\n                int index = -1;\r\n                for (int i = 0; i < mListUser.size(); i++){\r\n                    if (mListUser.get(i).getEmail().equals(email)){\r\n                        index = i;\r\n                    }\r\n                }\r\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                DatabaseReference myRef = database.getReference();\r\n                myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"cccd\").setValue(cccd)\r\n                        .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<Void> task) {\r\n                                Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        dialog.show();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/EditAccount.java b/app/src/main/java/com/example/duan1/EditAccount.java
---- a/app/src/main/java/com/example/duan1/EditAccount.java	
-+++ b/app/src/main/java/com/example/duan1/EditAccount.java	
-@@ -227,8 +227,18 @@
-             }
-         });
- 
-+        tvPassword.setOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View view) {
-+                resetPassword();
-+            }
-+        });
-+
-     }
- 
-+    private void resetPassword() {
-+        
-+    }
- 
-     @Nullable
-     private String checkname(@NonNull String s){
-Index: app/src/main/res/layout/activity_edit_account.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".EditAccount\"\r\n    android:orientation=\"vertical\"\r\n    >\r\n\r\n    <androidx.appcompat.widget.Toolbar\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"50dp\"\r\n        android:background=\"@color/Orenge\"\r\n        >\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/imgbtn_back\"\r\n            android:layout_width=\"35dp\"\r\n            android:layout_height=\"35dp\"\r\n            android:background=\"@color/trans...\"\r\n            android:src=\"@drawable/ic_back_page\"\r\n            />\r\n\r\n        <TextView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginLeft=\"20dp\"\r\n            android:text=\"Cài đặt thông tin\"\r\n            android:textSize=\"16dp\"\r\n            android:textStyle=\"bold\"\r\n            android:textColor=\"@color/black\"\r\n            />\r\n\r\n    </androidx.appcompat.widget.Toolbar>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:padding=\"15dp\"\r\n        >\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/img_avatar_activity_editaccount\"\r\n            android:layout_width=\"70dp\"\r\n            android:layout_height=\"70dp\"\r\n            >\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"70dp\"\r\n                android:layout_height=\"70dp\"\r\n                android:background=\"@drawable/bg_tv_edit_account\"\r\n                android:gravity=\"center\"\r\n                >\r\n                <de.hdodenhof.circleimageview.CircleImageView\r\n                    android:id=\"@+id/img_image\"\r\n                    android:layout_width=\"60dp\"\r\n                    android:layout_height=\"60dp\"\r\n                    android:src=\"@drawable/user_icon\"\r\n\r\n                    />\r\n            </LinearLayout>\r\n\r\n            <RelativeLayout\r\n                android:layout_width=\"30dp\"\r\n                android:layout_height=\"30dp\"\r\n                android:background=\"@drawable/bg_tv_edit_account\"\r\n                android:gravity=\"center\"\r\n                android:layout_alignParentBottom=\"true\"\r\n                android:layout_alignParentRight=\"true\"\r\n                >\r\n                <de.hdodenhof.circleimageview.CircleImageView\r\n                    android:layout_width=\"25dp\"\r\n                    android:layout_height=\"25dp\"\r\n                    android:padding=\"4dp\"\r\n                    android:src=\"@drawable/ic_baseline_create_24\"\r\n                    android:background=\"@drawable/bg_edit_img_account\"\r\n                    />\r\n            </RelativeLayout>\r\n\r\n        </RelativeLayout>\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"70dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:layout_gravity=\"center\"\r\n            android:padding=\"10dp\"\r\n            android:background=\"@drawable/bg_input\"\r\n            android:layout_marginLeft=\"10dp\"\r\n            >\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:orientation=\"vertical\"\r\n                android:gravity=\"center\"\r\n                android:layout_marginEnd=\"50dp\"\r\n                >\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"Họ và tên\"\r\n                    android:textColor=\"@color/gray_1\"\r\n                    android:textStyle=\"normal\"\r\n                    android:textSize=\"13dp\"\r\n\r\n                    />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/tv_name_activity_editaccount\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:textColor=\"@color/black\"\r\n                    android:theme=\"@style/ThemeOverlay.Material3.TextInputEditText\"\r\n                    />\r\n\r\n            </LinearLayout>\r\n\r\n            <Button\r\n                android:id=\"@+id/img_name\"\r\n                android:layout_width=\"50dp\"\r\n                android:padding=\"10dp\"\r\n                android:layout_height=\"match_parent\"\r\n                android:hint=\"Lưu\"\r\n                android:textSize=\"13dp\"\r\n                android:textColorHint=\"@color/white\"\r\n                android:textStyle=\"bold\"\r\n                android:layout_alignParentEnd=\"true\"\r\n\r\n                />\r\n\r\n        </RelativeLayout>\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\"\r\n        android:gravity=\"center\"\r\n        android:padding=\"5dp\"\r\n        >\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_sdt_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Cập nhật số điện thoại\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n\r\n\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_location_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Thêm địa chỉ\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n        <TextView\r\n            android:id=\"@+id/tv_cccd_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"CMND/CCCD/Hộ chiếu\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n        <TextView\r\n            android:id=\"@+id/tv_password_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Mật khẩu\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/gray_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n        <TextView\r\n            android:id=\"@+id/tv_sex_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Cập nhật giới tính\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n        <TextView\r\n            android:id=\"@+id/tv_date_of_birth_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Cập nhật ngày sinh\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n        <TextView\r\n            android:id=\"@+id/tv_xuat_hoa_don_activity_editaccount\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:padding=\"15dp\"\r\n            android:text=\"Thông tin xuất hóa đơn\"\r\n            android:textSize=\"14dp\"\r\n            android:textColor=\"@color/Orenge_1\"\r\n            />\r\n        <ImageView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"1dp\"\r\n            android:background=\"@color/gray_1\"\r\n            />\r\n\r\n    </LinearLayout>\r\n\r\n</LinearLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/activity_edit_account.xml b/app/src/main/res/layout/activity_edit_account.xml
---- a/app/src/main/res/layout/activity_edit_account.xml	
-+++ b/app/src/main/res/layout/activity_edit_account.xml	
-@@ -194,9 +194,9 @@
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
-             android:padding="15dp"
--            android:text="Mật khẩu"
-+            android:text="Đổi mật khẩu"
-             android:textSize="14dp"
--            android:textColor="@color/gray_1"
-+            android:textColor="@color/Orenge_1"
-             />
-         <ImageView
-             android:layout_width="match_parent"
Index: .idea/shelf/Uncommitted_changes_before_Merge_at_10_12_2022_10_17_SA__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Merge_at_10_12_2022_10_17_SA__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Merge_at_10_12_2022_10_17_SA__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Merge_at_10_12_2022_10_17_SA__Changes_.xml	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Merge_at_10_12_2022_10_17_SA_[Changes]" date="1670642243020" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Merge_at_10_12_2022_10_17_SA_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Merge at 10/12/2022 10:17 SA [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_11_2022_10_32_PM_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_11_2022_10_32_PM_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_11_2022_10_32_PM_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_11_2022_10_32_PM_[Changes]/shelved.patch	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,1037 +0,0 @@
-Index: app/src/main/java/com/example/duan1/dangTinBDSActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.Manifest;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.photoAdapter;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.direction;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\npublic class dangTinBDSActivity extends AppCompatActivity implements com.example.duan1.Adapter.photoAdapter.CountOfImageWhenRemove {\r\n    private Spinner spn_Direction;\r\n    private TextView tvTenDanhMuc;\r\n    private Bitmap bitmapselect;\r\n    private ImageView imgBackPage, iconCloser;\r\n    private EditText edtTitlePost, edtDescription, edtTenKhuDanCu, edtAddress, edtLoaiHinh, edtSoPhongNgu,\r\n            edtSoPhongWc, edtPrice, edtDienTich;\r\n    private LinearLayout addImageProduct;\r\n    private Button btnDangTin, suaTinBDS;\r\n\r\n    private String date, strTitlePost, strDescription, strTenKhu, strAddress, strLoaiHinhDat, strSoPhongNgu, strSoPhongWc, strPrice, strDienTich, nameUser, tenDanhMuc;\r\n    private double dbPrice;\r\n    private int maxID;\r\n    private String title_Post = null;\r\n    private com.example.duan1.Adapter.photoAdapter photoAdapter;\r\n    private RecyclerView rcvView_select_img_BDS;\r\n    private ArrayList<Uri> imageUri;\r\n    private int REQUEST_PERMISSION_CODE = 35;\r\n    private int PICK_IMAGE = 1;\r\n    private int update_count = 0, idUser, idEdit;\r\n    private List<BDSNews> listBDS;\r\n    private MainActivity mainActivity;\r\n    BDSNews bdsNewsId;\r\n\r\n    private ProgressDialog progressDialog;\r\n    DatabaseReference myData;\r\n    StorageReference imageFolder;\r\n    private Calendar calendar = Calendar.getInstance();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_dang_tin_bdsactivity);\r\n\r\n        imageFolder = FirebaseStorage.getInstance().getReference().child(\"Image.jpg\");\r\n        myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"BDS\");\r\n        imageUri = new ArrayList<>();\r\n\r\n        nameUser = mainActivity.name;\r\n        idUser = mainActivity.id;\r\n        initUi();\r\n        eventClickSpinner();\r\n        getListBds();\r\n        clickBackPage();\r\n        clickAddImageFashion();\r\n        clickDangTin();\r\n        getCurrentDate();\r\n        if (title_Post == null) {\r\n            btnDangTin.setVisibility(View.VISIBLE);\r\n            suaTinBDS.setVisibility(View.INVISIBLE);\r\n        } else {\r\n            suaTinBDS.setVisibility(View.VISIBLE);\r\n            btnDangTin.setVisibility(View.INVISIBLE);\r\n            setTextInput();\r\n            editNews();\r\n        }\r\n    }\r\n    private void getCurrentDate() {\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n        Calendar c = Calendar.getInstance();\r\n        date = sdf.format(c.getTime());\r\n        System.out.println(\"Date : \" + date);\r\n    }\r\n    private void editNews() {\r\n        suaTinBDS.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog = new ProgressDialog(dangTinBDSActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strTenKhu = edtTenKhuDanCu.getText().toString().trim();\r\n                strLoaiHinhDat = edtLoaiHinh.getText().toString().trim();\r\n                strAddress = edtAddress.getText().toString().trim();\r\n                strPrice = edtPrice.getText().toString();\r\n                strDienTich = edtDienTich.getText().toString().trim();\r\n                strSoPhongNgu = edtSoPhongNgu.getText().toString().trim();\r\n                strSoPhongWc = edtSoPhongWc.getText().toString().trim();\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n\r\n                } catch(Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty() ||  strTenKhu.isEmpty()|| strLoaiHinhDat.isEmpty() ||strDienTich.isEmpty()\r\n                        ||strSoPhongWc.isEmpty() || strSoPhongNgu.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dangTinBDSActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n\r\n                    upImage(idEdit);\r\n//                    for (update_count = 0; update_count < imageUri.size(); update_count++) {\r\n//                        Uri indexImage = imageUri.get(0);\r\n//                        StorageReference imageName = imageFolder.child(\"ImageTin/\" + indexImage + calendar);\r\n//                        imageName.putFile(indexImage).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n//                            @Override\r\n//                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n//                                imageName.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n//                                    @Override\r\n//                                    public void onSuccess(Uri uri) {\r\n//                                        String Url = String.valueOf(uri);\r\n//                                        StoreLick(Url);\r\n//\r\n//                                    }\r\n//                                });\r\n//                            }\r\n//                        });\r\n//                    }\r\n\r\n                    String strId = String.valueOf(idEdit);\r\n                    myData.child(tenDanhMuc).child(strId ).setValue(\r\n                                    new BDSNews(idEdit ,strTitlePost , strDescription , dbPrice\r\n                                            ,strDienTich ,strAddress ,strTenKhu ,strLoaiHinhDat ,\r\n                                            strSoPhongNgu,strSoPhongWc ,idUser,nameUser ,tenDanhMuc, date))\r\n                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dangTinBDSActivity.this, \"Sửa tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setTextInput() {\r\n        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n        DatabaseReference databaseReference = firebaseDatabase.getReference(\"Tin\").child(\"BDS\");\r\n        databaseReference.child(tenDanhMuc).addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                BDSNews bdsNews = snapshot.getValue(BDSNews.class);\r\n                if (title_Post.equals(bdsNews.getTitle())) {\r\n                    edtTitlePost.setText(bdsNews.getTitle());\r\n                    edtAddress.setText(bdsNews.getAdress());\r\n                    edtDienTich.setText(bdsNews.getDienTich());\r\n                    edtDescription.setText(bdsNews.getDescription());\r\n                    edtLoaiHinh.setText(bdsNews.getLoaiDat());\r\n                    edtSoPhongNgu.setText(bdsNews.getSoPhongNgu());\r\n                    edtSoPhongWc.setText(bdsNews.getSoPhongWc());\r\n                    edtTenKhuDanCu.setText(bdsNews.getTenPhanKhu());\r\n                    String price = String.valueOf(bdsNews.getPrice());\r\n                    edtPrice.setText(price);\r\n\r\n                    idEdit = bdsNews.getId();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickBackPage() {\r\n        imgBackPage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n        iconCloser.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void eventClickSpinner() {\r\n        direction[] directions = EmployeeDataUtils.getEmployees();\r\n        ArrayAdapter<direction> adapter = new ArrayAdapter<direction>(this, android.R.layout.simple_spinner_item, directions);\r\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spn_Direction.setAdapter(adapter);\r\n\r\n        spn_Direction.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                Toast.makeText(dangTinBDSActivity.this, \"Hướng \" + i, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void clickDangTin() {\r\n        btnDangTin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog = new ProgressDialog(dangTinBDSActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strTenKhu = edtTenKhuDanCu.getText().toString().trim();\r\n                strLoaiHinhDat = edtLoaiHinh.getText().toString().trim();\r\n                strAddress = edtAddress.getText().toString().trim();\r\n                strPrice = edtPrice.getText().toString();\r\n                strDienTich = edtDienTich.getText().toString().trim();\r\n                strSoPhongNgu = edtSoPhongNgu.getText().toString().trim();\r\n                strSoPhongWc = edtSoPhongWc.getText().toString().trim();\r\n\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n\r\n                } catch (Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n\r\n\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty() || strTenKhu.isEmpty() || strLoaiHinhDat.isEmpty() || strDienTich.isEmpty()\r\n                        || strSoPhongWc.isEmpty() || strSoPhongNgu.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dangTinBDSActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n                    if (bdsNewsId == null) {\r\n                        maxID = 0;\r\n                    } else {\r\n                        maxID = bdsNewsId.getId() + 1;\r\n                    }\r\n\r\n                        upImage(maxID);\r\n//                    for (update_count = 0; update_count < imageUri.size(); update_count++) {\r\n//                        Uri indexImage = imageUri.get(update_count);\r\n//                        StorageReference imageName = imageFolder.child(\"ImageTin/\" + indexImage + calendar);\r\n//                        imageName.child(strTitlePost).putFile(indexImage).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n//                            @Override\r\n//                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n//                                imageName.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n//                                    @Override\r\n//                                    public void onSuccess(Uri uri) {\r\n//                                        String Url = String.valueOf(uri);\r\n//                                        UpdateImageUrl(Url);\r\n//\r\n//                                    }\r\n//                                });\r\n//                            }\r\n//                        });\r\n//                    }\r\n                    String strId = String.valueOf(maxID);\r\n                    myData.child(tenDanhMuc).child(strId).setValue(\r\n                                    new BDSNews(maxID, strTitlePost, strDescription, dbPrice\r\n                                            , strDienTich, strAddress, strTenKhu, strLoaiHinhDat,\r\n                                            strSoPhongNgu, strSoPhongWc, idUser, nameUser, tenDanhMuc, date))\r\n                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dangTinBDSActivity.this, \"Đăng tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void UpdateImageUrl(String url, int id) {\r\n\r\n        DatabaseReference databaseReference = FirebaseDatabase.getInstance()\r\n                .getReference()\r\n                .child(\"Tin/BDS/Chung cư/\"+id+\"/image\");\r\n        databaseReference.setValue(url);\r\n\r\n    }\r\n\r\n    private List<BDSNews> getListBds() {\r\n        listBDS = new ArrayList<>();\r\n        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n        DatabaseReference databaseReference = firebaseDatabase.getReference(\"Tin\").child(\"BDS\");\r\n        databaseReference.child(tenDanhMuc).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                listBDS.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren()) {\r\n                    BDSNews bdsNews = snapshot1.getValue(BDSNews.class);\r\n                    listBDS.add(bdsNews);\r\n                    bdsNewsId = bdsNews;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Toast.makeText(dangTinBDSActivity.this, \"Load data Error\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return listBDS;\r\n\r\n    }\r\n\r\n    private void initUi() {\r\n        spn_Direction = findViewById(R.id.spn_Direction);\r\n        tvTenDanhMuc = findViewById(R.id.tvTenDanhMuc);\r\n        Intent intent = getIntent();\r\n        title_Post = intent.getStringExtra(\"title\");\r\n\r\n        tvTenDanhMuc.setText(\"Danh Mục - \" + intent.getStringExtra(\"tenDanhMuc\"));\r\n        imgBackPage = findViewById(R.id.icon_back);\r\n        addImageProduct = findViewById(R.id.addImageProduct);\r\n        edtTitlePost = findViewById(R.id.title_post);\r\n        edtDescription = findViewById(R.id.description_post);\r\n        edtTenKhuDanCu = findViewById(R.id.tenKhuDanCu);\r\n        edtAddress = findViewById(R.id.address);\r\n        edtLoaiHinh = findViewById(R.id.loaiHinh);\r\n        edtSoPhongNgu = findViewById(R.id.soPhongNgu);\r\n        edtSoPhongWc = findViewById(R.id.soPhongWc);\r\n        edtPrice = findViewById(R.id.price);\r\n        edtDienTich = findViewById(R.id.dienTich);\r\n        btnDangTin = findViewById(R.id.dangTinBDS);\r\n        iconCloser = findViewById(R.id.iconCloser);\r\n        suaTinBDS = findViewById(R.id.suaTinBDS);\r\n\r\n        rcvView_select_img_BDS = findViewById(R.id.rcvView_select_img_BDS);\r\n        Intent intent1 = getIntent();\r\n        tenDanhMuc = intent1.getStringExtra(\"tenDanhMuc\");\r\n\r\n    }\r\n\r\n\r\n    private void clickAddImageFashion() {\r\n        photoAdapter = new photoAdapter(imageUri, this, this);\r\n        rcvView_select_img_BDS.setLayoutManager(new GridLayoutManager(dangTinBDSActivity.this, 6));\r\n        rcvView_select_img_BDS.setAdapter(photoAdapter);\r\n\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n                    REQUEST_PERMISSION_CODE);\r\n            return;\r\n        }\r\n\r\n        addImageProduct.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                intent.setType(\"image/*\");\r\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR2) {\r\n                    intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n                }\r\n                startActivityForResult(Intent.createChooser(intent, \"select Picture\"), PICK_IMAGE);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == PICK_IMAGE && resultCode == RESULT_OK && data != null) {\r\n            if (data.getClipData() != null) {\r\n                int count = data.getClipData().getItemCount();\r\n\r\n                for (int i = 0; i < count; i++) {\r\n                    if (imageUri.size() < 9) {\r\n                        Uri imgUri = (data.getClipData().getItemAt(i).getUri());\r\n                        imageUri.add(imgUri);\r\n                    } else {\r\n                        Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                photoAdapter.notifyDataSetChanged();\r\n            } else {\r\n                if (imageUri.size() < 9) {\r\n                    Uri imgUri = data.getData();\r\n                    imageUri.add(imgUri);\r\n                } else {\r\n                    Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n\r\n            }\r\n            photoAdapter.notifyDataSetChanged();\r\n        } else {\r\n            Toast.makeText(this, \"you haven't pick any Image\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void clicked(int getSize) {\r\n\r\n    }\r\n\r\n    public static class EmployeeDataUtils {\r\n        public static direction[] getEmployees() {\r\n            direction drt1 = new direction(\"Nam\");\r\n            direction drt2 = new direction(\"Bắc\");\r\n            direction drt3 = new direction(\"Đông\");\r\n            direction drt4 = new direction(\"Tây\");\r\n            direction drt5 = new direction(\"Đông-Nam\");\r\n            direction drt6 = new direction(\"Tây-Băc\");\r\n            direction drt7 = new direction(\"Đông-Bắc\");\r\n            direction drt8 = new direction(\"Tây-Nam\");\r\n            return new direction[]{drt1, drt2, drt3, drt4, drt5, drt6, drt7, drt8};\r\n        }\r\n    }\r\n\r\n    private void upImage(int id) {\r\n        if (imageUri.size() == 0){\r\n            return;\r\n        }\r\n        Uri uri = imageUri.get(0);\r\n        try {\r\n            bitmapselect = MediaStore.Images.Media.getBitmap(getContentResolver(),uri);\r\n            FirebaseStorage storage = FirebaseStorage.getInstance();\r\n            StorageReference storageRef = storage.getReference();\r\n            StorageReference mountainsRef = storageRef.child(tenDanhMuc+\"/image\"+calendar.getTimeInMillis());\r\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n            bitmapselect.compress(Bitmap.CompressFormat.JPEG, 100, baos);\r\n            byte[] dataImage = baos.toByteArray();\r\n\r\n            UploadTask uploadTask = mountainsRef.putBytes(dataImage);\r\n            uploadTask.addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception exception) {\r\n                    // Handle unsuccessful uploads\r\n                    progressDialog.dismiss();\r\n                    Toast.makeText(dangTinBDSActivity.this, \"Lỗi cập nhật hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                @Override\r\n                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                    // taskSnapshot.getMetadata() contains file metadata such as size, content-type, etc.\r\n\r\n                    mountainsRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                        @Override\r\n                        public void onSuccess(Uri uri) {\r\n                            String strImage = String.valueOf(uri);\r\n                            UpdateImageUrl(strImage, id);\r\n                            progressDialog.dismiss();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception exception) {\r\n                            // Handle any errors\r\n                            progressDialog.dismiss();\r\n                            Toast.makeText(dangTinBDSActivity.this, \"Lỗi tải URL hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        } catch (IOException e) {\r\n            Toast.makeText(mainActivity, \"Lỗi try-catch\", Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/dangTinBDSActivity.java b/app/src/main/java/com/example/duan1/dangTinBDSActivity.java
---- a/app/src/main/java/com/example/duan1/dangTinBDSActivity.java	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/java/com/example/duan1/dangTinBDSActivity.java	(date 1670680553287)
-@@ -167,7 +167,7 @@
-                     myData.child(tenDanhMuc).child(strId ).setValue(
-                                     new BDSNews(idEdit ,strTitlePost , strDescription , dbPrice
-                                             ,strDienTich ,strAddress ,strTenKhu ,strLoaiHinhDat ,
--                                            strSoPhongNgu,strSoPhongWc ,idUser,nameUser ,tenDanhMuc, date))
-+                                            strSoPhongNgu,strSoPhongWc ,idUser,nameUser ,tenDanhMuc, date ))
-                             .addOnSuccessListener(new OnSuccessListener<Void>() {
-                                 @Override
-                                 public void onSuccess(Void unused) {
-Index: app/src/main/java/com/example/duan1/Adapter/NewsTrangChuAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1.Adapter;\r\n\r\nimport android.content.Context;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.NewsTrangChu;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.util.List;\r\n\r\npublic class NewsTrangChuAdapter extends RecyclerView.Adapter<NewsTrangChuAdapter.ViewHolder> {private Context context;\r\n    private List<NewsTrangChu> newsTrangChuList;\r\n    public NewsTrangChuAdapter(Context context) {\r\n        this.context = context;\r\n    }\r\n\r\n    public void setDATA(List<NewsTrangChu> x) {\r\n        this.newsTrangChuList = x;\r\n        notifyDataSetChanged();\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public NewsTrangChuAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(\r\n                parent.getContext()).inflate(R.layout.item_trangchu_news,parent,false);\r\n\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull NewsTrangChuAdapter.ViewHolder h, int position) {\r\n        NewsTrangChu OOP = newsTrangChuList.get(position);\r\n        if(OOP == null){\r\n            return;\r\n        }\r\n        h.tvTitle.setText(OOP.getTitle());\r\n        String free = String.valueOf(OOP.getFee());\r\n        h.tvFee.setText(free);\r\n        h.tvTime.setText(OOP.getTime());\r\n        h.tvDes.setText(OOP.getDescripsion());\r\n        String strimage = OOP.getImage();\r\n        System.out.println(strimage);\r\n        Picasso.with(context)\r\n                .load(strimage)\r\n                .into(h.imgNews);\r\n//        if(OOP.getsoluonganh() > 1){\r\n//            h.linearLayout.setVisibility(View.VISIBLE);\r\n//            h.tvSLAnh.setText(OOP.getsoluonganh());\r\n//        }else{\r\n//            h.linearLayout.setVisibility(View.INVISIBLE);\r\n//        }\r\n\r\n//        Glide.with(context).load(OOP.getImage()).into(h.imgNews);\r\n\r\n        if(OOP.isFavorite()){\r\n            h.imgFavorite.setImageResource(R.drawable.ic_item_trangchu_favorite);\r\n        }else{\r\n            h.imgFavorite.setImageResource(R.drawable.ic_item_trangchu_unfavorite);\r\n        }\r\n        h.imgFavorite.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                if(OOP.isFavorite()){\r\n                    OOP.setFavorite(false);\r\n                }else{\r\n                    OOP.setFavorite(true);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        if(newsTrangChuList != null){\r\n            return newsTrangChuList.size();\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n        private TextView tvSLAnh,tvTitle,tvFee,tvDes,tvTime;\r\n        private ImageView imgNews,imgFavorite,imgLoaiTin;\r\n        private LinearLayout linearLayout;\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            tvSLAnh = itemView.findViewById(R.id.tv_item_trangchu_news_SoLuongAnh);\r\n            tvDes = itemView.findViewById(R.id.tv_item_trangchu_descripsion);\r\n            tvFee = itemView.findViewById(R.id.tv_item_trangchu_fee);\r\n            tvTime = itemView.findViewById(R.id.tv_item_trangchu_news_Time);\r\n            tvTitle = itemView.findViewById(R.id.tv_item_trangchu_title);\r\n\r\n            imgFavorite = itemView.findViewById(R.id.img_item_trangchu_news_favorite);\r\n            imgNews = itemView.findViewById(R.id.img_item_trangchu_news_Pic);\r\n            imgLoaiTin = itemView.findViewById(R.id.img_item_trangchu_news_LoaiTin);\r\n\r\n            linearLayout = itemView.findViewById(R.id.layout_item_trangchu_news_SLA);\r\n        }\r\n    }\r\n}\r\n\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/Adapter/NewsTrangChuAdapter.java b/app/src/main/java/com/example/duan1/Adapter/NewsTrangChuAdapter.java
---- a/app/src/main/java/com/example/duan1/Adapter/NewsTrangChuAdapter.java	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/java/com/example/duan1/Adapter/NewsTrangChuAdapter.java	(date 1670772222611)
-@@ -51,10 +51,16 @@
-         h.tvTime.setText(OOP.getTime());
-         h.tvDes.setText(OOP.getDescripsion());
-         String strimage = OOP.getImage();
--        System.out.println(strimage);
--        Picasso.with(context)
--                .load(strimage)
--                .into(h.imgNews);
-+        try {
-+            Picasso.with(context)
-+                    .load(strimage)
-+                    .into(h.imgNews);
-+        }catch (Exception e) {
-+            System.err.println("Lỗi Load ảnh trong newsAdapter : "+ e);
-+        }
-+
-+
-+
- //        if(OOP.getsoluonganh() > 1){
- //            h.linearLayout.setVisibility(View.VISIBLE);
- //            h.tvSLAnh.setText(OOP.getsoluonganh());
-Index: app/src/main/res/layout/fragment_trang_chu.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".Fragment.FragmentTrangChu\"\r\n    android:orientation=\"vertical\"\r\n    android:background=\"@color/white\"\r\n    >\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:background=\"@color/white\"\r\n            android:orientation=\"vertical\">\r\n            <androidx.viewpager.widget.ViewPager\r\n                android:id=\"@+id/viewPager_slide\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"220dp\"/>\r\n            <me.relex.circleindicator.CircleIndicator\r\n                android:id=\"@+id/circle_indicator\"\r\n                android:layout_width=\"100dp\"\r\n                android:layout_height=\"30dp\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginTop=\"5dp\"\r\n\r\n                tools:ignore=\"MissingClass\" />\r\n            <HorizontalScrollView\r\n                android:id=\"@+id/scrollView\"\r\n                android:layout_width=\"match_parent\"\r\n                android:scrollbars=\"none\"\r\n                android:layout_height=\"wrap_content\"\r\n                >\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"horizontal\">\r\n                    <LinearLayout\r\n                        android:layout_width=\"120dp\"\r\n                        android:layout_height=\"120dp\"\r\n                        android:orientation=\"vertical\"\r\n                        android:gravity=\"center_horizontal\"\r\n                        >\r\n                        <ImageView\r\n                            android:layout_width=\"45dp\"\r\n                            android:layout_height=\"45dp\"\r\n                            android:src=\"@drawable/transport\"/>\r\n                        <TextView\r\n                            android:layout_width=\"120dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"5dp\"\r\n                            android:gravity=\"center\"\r\n                            android:textColor=\"#020202\"\r\n                            android:text=\"Miễn phí vận chuyển\"\r\n                            android:textSize=\"16dp\"/>\r\n\r\n\r\n                    </LinearLayout>\r\n                    <!-- 2-->\r\n                    <LinearLayout\r\n                        android:layout_width=\"120dp\"\r\n                        android:layout_height=\"120dp\"\r\n                        android:orientation=\"vertical\"\r\n                        android:gravity=\"center_horizontal\"\r\n                        >\r\n                        <ImageView\r\n                            android:layout_width=\"45dp\"\r\n                            android:layout_height=\"45dp\"\r\n                            android:src=\"@drawable/tin_da_luu\"/>\r\n                        <TextView\r\n                            android:layout_width=\"100dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"5dp\"\r\n                            android:gravity=\"center\"\r\n                            android:textColor=\"#020202\"\r\n                            android:text=\"Tin đăng đã lưu\"\r\n                            android:textSize=\"16dp\"/>\r\n                    </LinearLayout>\r\n                    <!--        3-->\r\n                    <LinearLayout\r\n                        android:layout_width=\"100dp\"\r\n                        android:layout_height=\"120dp\"\r\n                        android:orientation=\"vertical\"\r\n                        android:gravity=\"center_horizontal\"\r\n                        >\r\n                        <ImageView\r\n                            android:layout_width=\"45dp\"\r\n                            android:layout_height=\"45dp\"\r\n                            android:src=\"@drawable/danh_gia\"/>\r\n                        <TextView\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"5dp\"\r\n                            android:gravity=\"center\"\r\n                            android:textColor=\"#020202\"\r\n                            android:text=\"Đánh giá từ tôi\"\r\n                            android:textSize=\"16dp\"/>\r\n                    </LinearLayout>\r\n                    <!--        4-->\r\n                    <!--        5-->\r\n                    <LinearLayout\r\n                        android:layout_width=\"120dp\"\r\n                        android:layout_height=\"120dp\"\r\n                        android:orientation=\"vertical\"\r\n                        android:gravity=\"center_horizontal\"\r\n                        >\r\n                        <ImageView\r\n                            android:layout_width=\"45dp\"\r\n                            android:layout_height=\"45dp\"\r\n                            android:src=\"@drawable/history_search\"/>\r\n                        <TextView\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"5dp\"\r\n                            android:gravity=\"center\"\r\n                            android:textColor=\"#020202\"\r\n                            android:text=\"Chia sẻ\"\r\n                            android:textSize=\"16dp\"/>\r\n                    </LinearLayout>\r\n                    <!--        6-->\r\n                    <LinearLayout\r\n                        android:layout_width=\"120dp\"\r\n                        android:layout_height=\"120dp\"\r\n                        android:orientation=\"vertical\"\r\n                        android:gravity=\"center_horizontal\"\r\n                        >\r\n                        <ImageView\r\n                            android:layout_width=\"45dp\"\r\n                            android:layout_height=\"45dp\"\r\n                            android:src=\"@drawable/img_vong_quay\"/>\r\n                        <TextView\r\n                            android:layout_width=\"90dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"5dp\"\r\n                            android:gravity=\"center\"\r\n                            android:textColor=\"#020202\"\r\n                            android:text=\"Vòng quay may mắn\"\r\n                            android:textSize=\"16dp\"/>\r\n                    </LinearLayout>\r\n                    <!-- 2-->\r\n                    <LinearLayout\r\n                        android:layout_width=\"120dp\"\r\n                        android:layout_height=\"120dp\"\r\n                        android:orientation=\"vertical\"\r\n                        android:gravity=\"center_horizontal\"\r\n                        >\r\n                        <ImageView\r\n                            android:layout_width=\"45dp\"\r\n                            android:layout_height=\"45dp\"\r\n                            android:src=\"@drawable/tin_da_luu\"/>\r\n                        <TextView\r\n                            android:layout_width=\"100dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:layout_marginTop=\"5dp\"\r\n                            android:gravity=\"center\"\r\n                            android:textColor=\"#020202\"\r\n                            android:text=\"Tin đăng đã lưu\"\r\n                            android:textSize=\"16dp\"/>\r\n                    </LinearLayout>\r\n                </LinearLayout>\r\n            </HorizontalScrollView>\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:id=\"@+id/rcv_news_trangchu\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:nestedScrollingEnabled=\"true\"\r\n                android:layout_marginBottom=\"60dp\"\r\n                />\r\n        </LinearLayout>\r\n\r\n    </ScrollView>\r\n\r\n</LinearLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/fragment_trang_chu.xml b/app/src/main/res/layout/fragment_trang_chu.xml
---- a/app/src/main/res/layout/fragment_trang_chu.xml	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/res/layout/fragment_trang_chu.xml	(date 1670768716586)
-@@ -3,15 +3,34 @@
-     xmlns:tools="http://schemas.android.com/tools"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
-+    xmlns:app="http://schemas.android.com/apk/res-auto"
-     tools:context=".Fragment.FragmentTrangChu"
-     android:orientation="vertical"
--    android:background="@color/white"
--    >
-+    android:background="@color/white">
-+    <androidx.appcompat.widget.SearchView
-+        android:id="@+id/searchView"
-+        android:layout_width="match_parent"
-+        app:queryHint="Nhập tiêu đề tìm kiếm"
-+        android:layout_height="wrap_content" />
-+    <RelativeLayout
-+        android:layout_width="match_parent"
-+        android:layout_height="wrap_content" >
-+
-+<!--        <androidx.recyclerview.widget.RecyclerView-->
-+<!--            android:id="@+id/rcvFilter"-->
-+<!--            android:layout_width="match_parent"-->
-+<!--            android:layout_height="wrap_content" />-->
- 
-     <ScrollView
-+        android:id="@+id/scrView"
-+        android:layout_marginTop="10dp"
-+        android:layout_below="@+id/rcvFilter"
-+        android:layout_alignParentTop="true"
-         android:layout_width="match_parent"
-         android:layout_height="match_parent">
-+
-         <LinearLayout
-+            android:id="@+id/lnLayout"
-             android:layout_width="match_parent"
-             android:layout_height="match_parent"
-             android:background="@color/white"
-@@ -35,6 +54,7 @@
-                 android:layout_height="wrap_content"
-                 >
-                 <LinearLayout
-+                    android:id="@+id/ln1"
-                     android:layout_width="match_parent"
-                     android:layout_height="wrap_content"
-                     android:orientation="horizontal">
-@@ -162,6 +182,24 @@
-                     </LinearLayout>
-                 </LinearLayout>
-             </HorizontalScrollView>
-+            <LinearLayout
-+                android:layout_width="match_parent"
-+                android:layout_height="wrap_content"
-+                android:background="@drawable/bg_corner"
-+                android:padding="6dp"
-+                android:orientation="horizontal">
-+                <TextView
-+                    android:layout_width="wrap_content"
-+                    android:layout_height="wrap_content"
-+                    android:text="Bạn muốn xem danh mục : "
-+                    android:textStyle="bold"
-+                    android:textSize="18dp"/>
-+                <Spinner
-+                    android:id="@+id/spn_phanLoaiTin"
-+                    android:layout_width="match_parent"
-+                    android:layout_height="wrap_content"/>
-+            </LinearLayout>
-+
-             <androidx.recyclerview.widget.RecyclerView
-                 android:id="@+id/rcv_news_trangchu"
-                 android:layout_width="match_parent"
-@@ -172,5 +210,11 @@
-         </LinearLayout>
- 
-     </ScrollView>
--
-+        <androidx.recyclerview.widget.RecyclerView
-+            android:id="@+id/rcvFilter"
-+            android:layout_width="match_parent"
-+            android:background="#EFBF48"
-+            android:layout_alignParentTop="true"
-+            android:layout_height="wrap_content" />
-+    </RelativeLayout>
- </LinearLayout>
-\ No newline at end of file
-Index: app/src/main/java/com/example/duan1/Fragment/FragmentTrangChu.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1.Fragment;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.Handler;\r\nimport android.os.Looper;\r\nimport android.view.LayoutInflater;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport com.example.duan1.Adapter.NewsTrangChuAdapter;\r\nimport com.example.duan1.Adapter.historyNewsAdapter;\r\nimport com.example.duan1.Adapter.slidersAdapter;\r\nimport com.example.duan1.MainActivity;\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.NewsTrangChu;\r\nimport com.example.duan1.model.giaiTriNews;\r\nimport com.example.duan1.model.historyNews;\r\nimport com.example.duan1.model.photosSlider;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Timer;\r\nimport java.util.TimerTask;\r\n\r\n\r\nimport me.relex.circleindicator.CircleIndicator;\r\n\r\n\r\npublic class FragmentTrangChu extends Fragment {\r\n    private ViewPager viewPager;\r\n    private CircleIndicator circleIndicator;\r\n    private slidersAdapter slidersAdapter;\r\n    private List<photosSlider> mListPhoto = new ArrayList<>();\r\n    private Timer mTimer;\r\n    public MainActivity mainActivity;\r\n    private RecyclerView rcvNewsTrangChu;\r\n    private List<NewsTrangChu> newsTrangChuList = new ArrayList<>();\r\n    private NewsTrangChuAdapter mNewsTrangChuAdapter;\r\n    private List<String> listChild = new ArrayList<>();\r\n    private List<String> listChild1 = new ArrayList<>();\r\n    private List<String> listChild2 = new ArrayList<>();\r\n    DatabaseReference myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"GiaiTri\");\r\n    DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"BDS\");\r\n    DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"ThoiTrang\");\r\n\r\n    @SuppressLint(\"MissingInflatedId\")\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_trang_chu, container, false);\r\n        mainActivity = (MainActivity) getActivity();\r\n\r\n\r\n        viewPager = view.findViewById(R.id.viewPager_slide);\r\n        \r\n        circleIndicator = view.findViewById(R.id.circle_indicator);\r\n\r\n        slidersAdapter = new slidersAdapter(getContext(), getListPhoto());\r\n        viewPager.setAdapter(slidersAdapter);\r\n\r\n        circleIndicator.setViewPager(viewPager);\r\n        slidersAdapter.registerDataSetObserver(circleIndicator.getDataSetObserver());\r\n\r\n        autoSliderImg();\r\n        listChild1();\r\n        listChild2();\r\n        listChild3();\r\n        newsTrangChuList.clear();\r\n        getListNews();\r\n        rcvNewsTrangChu = view.findViewById(R.id.rcv_news_trangchu);\r\n        new Handler().postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());\r\n                GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n                rcvNewsTrangChu.setLayoutManager(gridLayoutManager);\r\n                mNewsTrangChuAdapter.setDATA(newsTrangChuList);\r\n                rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);\r\n            }\r\n        },500);\r\n//        mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());\r\n//        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n//        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);\r\n//        mNewsTrangChuAdapter.setDATA(newsTrangChuList);\r\n//        rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);\r\n//        rcvNewsTrangChu.addOnItemTouchListener(new RecyclerView.SimpleOnItemTouchListener() {\r\n//            @Override\r\n//            public boolean onInterceptTouchEvent(@NonNull RecyclerView rv, @NonNull MotionEvent e) {\r\n//                return rv.getScrollState() == RecyclerView.SCROLL_STATE_DRAGGING;\r\n//            }\r\n//        });\r\n        return view;\r\n    }\r\n\r\n    private void autoSliderImg() {\r\n\r\n        if (mTimer == null) {\r\n            mTimer = new Timer();\r\n        }\r\n\r\n        mTimer.schedule(new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                new Handler(Looper.getMainLooper()).post(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        int currentitem = viewPager.getCurrentItem();\r\n                        int totalItem = mListPhoto.size() - 1;\r\n\r\n                        if (currentitem < totalItem) {\r\n                            currentitem++;\r\n                            viewPager.setCurrentItem(currentitem);\r\n                        } else {\r\n                            viewPager.setCurrentItem(0);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }, 500, 3000);\r\n    }\r\n\r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n\r\n        if (mTimer != null) {\r\n            mTimer.cancel();\r\n            mTimer = null;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    private List<photosSlider> getListPhoto() {\r\n//    List<photosSlider> list = new ArrayList<>();\r\n\r\n        mListPhoto.add(new photosSlider(R.drawable.img_slider1));\r\n        mListPhoto.add(new photosSlider(R.drawable.img_slider2));\r\n        mListPhoto.add(new photosSlider(R.drawable.img_slider3));\r\n        mListPhoto.add(new photosSlider(R.drawable.img_slider4));\r\n\r\n        return mListPhoto;\r\n    }\r\n    private void getListNews() {\r\n        for (int i = 0; i < listChild.size(); i++) {\r\n            myData.child(listChild.get(i)).addChildEventListener(new ChildEventListener() {\r\n                @Override\r\n                public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                    giaiTriNews giaiTriNews = snapshot.getValue(giaiTriNews.class);\r\n                    newsTrangChuList.add(new NewsTrangChu(giaiTriNews.getTitle() , giaiTriNews.getDescription(),\r\n                            giaiTriNews.getDate(),giaiTriNews.getPrice(),true, \"\"));\r\n                    mNewsTrangChuAdapter.notifyDataSetChanged();\r\n                }\r\n\r\n                @Override\r\n                public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n\r\n        }\r\n        for (int i = 0; i < listChild1.size(); i++) {\r\n            myData2.child(listChild1.get(i)).addChildEventListener(new ChildEventListener() {\r\n                @Override\r\n                public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                    thoiTrangNews thoiTrangNews = snapshot.getValue(com.example.duan1.model.thoiTrangNews.class);\r\n                    newsTrangChuList.add(new NewsTrangChu(thoiTrangNews.getTitlePost(), thoiTrangNews.getDescriptionPost(),\r\n                            thoiTrangNews.getDate(), thoiTrangNews.getPrice(), true , \"\"));\r\n                    mNewsTrangChuAdapter.notifyDataSetChanged();\r\n                }\r\n\r\n                @Override\r\n                public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n        }\r\n        for (int i = 0; i < listChild2.size(); i++) {\r\n            myData1.child(listChild2.get(i)).addChildEventListener(new ChildEventListener() {\r\n                @Override\r\n                public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                    BDSNews bdsNews = snapshot.getValue(BDSNews.class);\r\n\r\n                    newsTrangChuList.add(new NewsTrangChu(bdsNews.getTitle() , bdsNews.getDescription() ,\r\n                            bdsNews.getDate(),bdsNews.getPrice(), true, bdsNews.getImage()));\r\n                            mNewsTrangChuAdapter.notifyDataSetChanged();\r\n                }\r\n\r\n                @Override\r\n                public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n    private List<String> listChild1() {\r\n        listChild.add(new String(\"Nhạc cụ\"));\r\n        listChild.add(new String(\"Sách\"));\r\n        listChild.add(new String(\"Đồ thể thao, Dã ngoại\"));\r\n        listChild.add(new String(\"Đồ sưu tầm  ,Đồ cổ\"));\r\n        listChild.add(new String(\"Thiết bị chơi game\"));\r\n        listChild.add(new String(\"Sở thích khác\"));\r\n\r\n        return listChild;\r\n    }\r\n\r\n    private List<String> listChild2() {\r\n        listChild1.add(new String(\"Quần áo\"));\r\n        listChild1.add(new String(\"Đồng hồ\"));\r\n        listChild1.add(new String(\"Giày dép\"));\r\n        listChild1.add(new String(\"Túi xách\"));\r\n        listChild1.add(new String(\"Nước hoa\"));\r\n        listChild1.add(new String(\"Phụ kiện khác\"));\r\n\r\n        return listChild1;\r\n    }\r\n\r\n    private List<String> listChild3() {\r\n        listChild2.add(new String(\"Chung cư\"));\r\n        listChild2.add(new String(\"Nhà ở\"));\r\n        listChild2.add(new String(\"Đất\"));\r\n        listChild2.add(new String(\"Văn Phòng\"));\r\n        listChild2.add(new String(\"Phòng trọ\"));\r\n\r\n        return listChild2;\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        newsTrangChuList.clear();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/Fragment/FragmentTrangChu.java b/app/src/main/java/com/example/duan1/Fragment/FragmentTrangChu.java
---- a/app/src/main/java/com/example/duan1/Fragment/FragmentTrangChu.java	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/java/com/example/duan1/Fragment/FragmentTrangChu.java	(date 1670772099426)
-@@ -1,11 +1,15 @@
- package com.example.duan1.Fragment;
- 
- import android.annotation.SuppressLint;
-+import android.app.SearchManager;
-+import android.content.Context;
- import android.os.Bundle;
- 
- import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
-+import androidx.appcompat.widget.SearchView;
- import androidx.fragment.app.Fragment;
-+import androidx.recyclerview.widget.DividerItemDecoration;
- import androidx.recyclerview.widget.GridLayoutManager;
- import androidx.recyclerview.widget.LinearLayoutManager;
- import androidx.recyclerview.widget.RecyclerView;
-@@ -14,9 +18,15 @@
- import android.os.Handler;
- import android.os.Looper;
- import android.view.LayoutInflater;
-+import android.view.Menu;
-+import android.view.MenuInflater;
- import android.view.MotionEvent;
- import android.view.View;
- import android.view.ViewGroup;
-+import android.widget.AdapterView;
-+import android.widget.ArrayAdapter;
-+import android.widget.Spinner;
-+import android.widget.Toast;
- 
- import com.example.duan1.Adapter.NewsTrangChuAdapter;
- import com.example.duan1.Adapter.historyNewsAdapter;
-@@ -28,6 +38,8 @@
- import com.example.duan1.model.giaiTriNews;
- import com.example.duan1.model.historyNews;
- import com.example.duan1.model.photosSlider;
-+import com.example.duan1.model.product_type;
-+import com.example.duan1.model.thoiTrang;
- import com.example.duan1.model.thoiTrangNews;
- import com.google.firebase.database.ChildEventListener;
- import com.google.firebase.database.DataSnapshot;
-@@ -50,14 +62,22 @@
-     private CircleIndicator circleIndicator;
-     private slidersAdapter slidersAdapter;
-     private List<photosSlider> mListPhoto = new ArrayList<>();
-+
-     private Timer mTimer;
-+    private Context mContext;
-+    private SearchView searchView;
-+    private String LoaiTin;
-+    historyNewsAdapter historyNewsAdapter;
-     public MainActivity mainActivity;
-+    Spinner spn_phanLoaiTin;
-     private RecyclerView rcvNewsTrangChu;
-     private List<NewsTrangChu> newsTrangChuList = new ArrayList<>();
-+    private List<historyNews> listFilter = new ArrayList<>();
-     private NewsTrangChuAdapter mNewsTrangChuAdapter;
-     private List<String> listChild = new ArrayList<>();
-     private List<String> listChild1 = new ArrayList<>();
-     private List<String> listChild2 = new ArrayList<>();
-+    private RecyclerView rcvFilter;
-     DatabaseReference myData = FirebaseDatabase.getInstance().getReference("Tin").child("GiaiTri");
-     DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference("Tin").child("BDS");
-     DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference("Tin").child("ThoiTrang");
-@@ -68,10 +88,13 @@
-                              Bundle savedInstanceState) {
-         View view = inflater.inflate(R.layout.fragment_trang_chu, container, false);
-         mainActivity = (MainActivity) getActivity();
-+        searchView = view.findViewById(R.id.searchView);
- 
- 
-+
-+        spn_phanLoaiTin = view.findViewById(R.id.spn_phanLoaiTin);
-         viewPager = view.findViewById(R.id.viewPager_slide);
--        
-+        rcvFilter = view.findViewById(R.id.rcvFilter);
-         circleIndicator = view.findViewById(R.id.circle_indicator);
- 
-         slidersAdapter = new slidersAdapter(getContext(), getListPhoto());
-@@ -84,19 +107,28 @@
-         listChild1();
-         listChild2();
-         listChild3();
-+        eventClickSPN();
-+        getValuesSpinner();
-+        searchNews();
-+
-+
-         newsTrangChuList.clear();
-         getListNews();
-         rcvNewsTrangChu = view.findViewById(R.id.rcv_news_trangchu);
-+        mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
-+
-         new Handler().postDelayed(new Runnable() {
-             @Override
-             public void run() {
--                mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
-+
-                 GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-                 rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
-                 mNewsTrangChuAdapter.setDATA(newsTrangChuList);
-                 rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
-             }
--        },500);
-+        }, 500);
-+
-+
- //        mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
- //        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
- //        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
-@@ -111,6 +143,178 @@
-         return view;
-     }
- 
-+    private void getValuesSpinner() {
-+        LoaiTin = spn_phanLoaiTin.getSelectedItem().toString();
-+        System.out.println("Loại Tin : " + LoaiTin);
-+    }
-+
-+    private void eventClickSPN() {
-+        product_type[] product_types = FragmentTrangChu.productType.getProductType();
-+        ArrayAdapter<productType> adapter = new ArrayAdapter(getContext(), android.R.layout.simple_spinner_item, product_types);
-+        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
-+        spn_phanLoaiTin.setAdapter(adapter);
-+        spn_phanLoaiTin.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
-+            @Override
-+            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {
-+                getValuesSpinner();
-+                if (LoaiTin.equalsIgnoreCase("Bất động sản")) {
-+                    showLoaiTinBDS();
-+                } else if (LoaiTin.equalsIgnoreCase("Giải trí")) {
-+                    showLoaiTinGiaiTri();
-+                }else if(LoaiTin.equalsIgnoreCase("Thời trang")) {
-+                    showLoaiTinThoiTrang();
-+                }else {
-+                    GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-+                    rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
-+                    mNewsTrangChuAdapter.setDATA(newsTrangChuList);
-+                    rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
-+                }
-+            }
-+
-+            @Override
-+            public void onNothingSelected(AdapterView<?> adapterView) {
-+
-+            }
-+        });
-+
-+    }
-+    private void showLoaiTinThoiTrang() {
-+        List<NewsTrangChu> listFilter = new ArrayList<>();
-+
-+        for (int i = 0; i < newsTrangChuList.size(); i++) {
-+            String tenDanhMuc = newsTrangChuList.get(i).getTenDanhMuc();
-+            if (tenDanhMuc.equals("Quần áo") || tenDanhMuc.equals("Đồng hồ") || tenDanhMuc.equals("Giày dép") || tenDanhMuc.equals("Túi xách")
-+                    || tenDanhMuc.equals("Nước hoa")) {
-+//                listFilter.clear();
-+
-+                listFilter.add(new NewsTrangChu(newsTrangChuList.get(i).getTitle(), newsTrangChuList.get(i).getDescripsion()
-+                        , newsTrangChuList.get(i).getTime(), newsTrangChuList.get(i).getFee(), true, newsTrangChuList.get(i).getImage()
-+                        , newsTrangChuList.get(i).getTenDanhMuc()));
-+            }
-+        }
-+        mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
-+        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-+        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
-+        mNewsTrangChuAdapter.setDATA(listFilter);
-+        rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
-+        mNewsTrangChuAdapter.notifyDataSetChanged();
-+    }
-+    private void showLoaiTinGiaiTri() {
-+        List<NewsTrangChu> listFilter = new ArrayList<>();
-+
-+        for (int i = 0; i < newsTrangChuList.size(); i++) {
-+            String tenDanhMuc = newsTrangChuList.get(i).getTenDanhMuc();
-+            if (tenDanhMuc.equals("Nhạc cụ") || tenDanhMuc.equalsIgnoreCase("Sách") || tenDanhMuc.equalsIgnoreCase("Đồ thể thao, Dã ngoại")
-+                    || tenDanhMuc.equals("Đồ sưu tầm  ,Đồ cổ") || tenDanhMuc.equals("Thiết bị chơi game")) {
-+//                listFilter.clear();
-+
-+                listFilter.add(new NewsTrangChu(newsTrangChuList.get(i).getTitle(), newsTrangChuList.get(i).getDescripsion()
-+                        , newsTrangChuList.get(i).getTime(), newsTrangChuList.get(i).getFee(), true, newsTrangChuList.get(i).getImage()
-+                        , newsTrangChuList.get(i).getTenDanhMuc()));
-+            }
-+        }
-+        mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
-+        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-+        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
-+        mNewsTrangChuAdapter.setDATA(listFilter);
-+        rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
-+        mNewsTrangChuAdapter.notifyDataSetChanged();
-+    }
-+
-+    private void showLoaiTinBDS() {
-+        List<NewsTrangChu> listFilter = new ArrayList<>();
-+
-+
-+        for (int i = 0; i < newsTrangChuList.size(); i++) {
-+            String tenDanhMuc = newsTrangChuList.get(i).getTenDanhMuc();
-+            if (tenDanhMuc.equals("Chung cư") || tenDanhMuc.equals("Nhà ở") || tenDanhMuc.equals("Đất") ||
-+                    tenDanhMuc.equalsIgnoreCase("Văn Phòng") || tenDanhMuc.equalsIgnoreCase("Phòng Trọ")) {
-+
-+                listFilter.add(new NewsTrangChu(newsTrangChuList.get(i).getTitle(), newsTrangChuList.get(i).getDescripsion()
-+                        , newsTrangChuList.get(i).getTime(), newsTrangChuList.get(i).getFee(), true, newsTrangChuList.get(i).getImage()
-+                        , newsTrangChuList.get(i).getTenDanhMuc()));
-+
-+            }
-+        }
-+        mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
-+        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-+        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
-+        mNewsTrangChuAdapter.setDATA(listFilter);
-+        rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
-+        mNewsTrangChuAdapter.notifyDataSetChanged();
-+    }
-+
-+
-+    public static class productType {
-+        public static product_type[] getProductType() {
-+
-+            product_type prd2 = new product_type("Bất động sản");
-+            product_type prd3 = new product_type("Thời trang");
-+            product_type prd4 = new product_type("Giải trí");
-+            product_type prd1 = new product_type("Tất Cả");
-+            return new product_type[]{prd1, prd2, prd3, prd4};
-+
-+
-+        }
-+    }
-+
-+    private void searchNews() {
-+        searchView.clearFocus();
-+        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
-+            @Override
-+            public boolean onQueryTextSubmit(String query) {
-+
-+                return false;
-+            }
-+
-+            @Override
-+            public boolean onQueryTextChange(String newText) {
-+                if (newText == null || newText.trim().isEmpty()) {
-+                  return false;
-+
-+                } else {
-+                    filterList(newText);
-+                }
-+                return true;
-+            }
-+        });
-+    }
-+
-+    private void filterList(String newText) {
-+        List<historyNews> listFilter1 = new ArrayList<>();
-+
-+        for (int i = 0; i < listFilter.size(); i++) {
-+
-+            if (listFilter.get(i).getTitle_historyNews().toLowerCase().contains(newText.toLowerCase()) ||
-+                    listFilter.get(i).getTenDanhMuc().toLowerCase().equalsIgnoreCase(newText.toLowerCase())) {
-+                listFilter1.add(listFilter.get(i));
-+            }
-+        }
-+        if (newText.isEmpty()) {
-+            listFilter1.clear();
-+            historyNewsAdapter = new historyNewsAdapter(getContext(), null);
-+            rcvFilter.setLayoutManager(new LinearLayoutManager(getContext()));
-+            rcvFilter.setAdapter(historyNewsAdapter);
-+            RecyclerView.ItemDecoration decoration = new DividerItemDecoration(getContext(), DividerItemDecoration.VERTICAL);
-+            rcvFilter.addItemDecoration(decoration);
-+        }
-+        if (listFilter1.isEmpty()) {
-+            historyNewsAdapter = new historyNewsAdapter(getContext(), listFilter);
-+            rcvFilter.setLayoutManager(new LinearLayoutManager(getContext()));
-+            rcvFilter.setAdapter(historyNewsAdapter);
-+            RecyclerView.ItemDecoration decoration = new DividerItemDecoration(getContext(), DividerItemDecoration.VERTICAL);
-+            rcvFilter.addItemDecoration(decoration);
-+        } else {
-+            historyNewsAdapter = new historyNewsAdapter(getContext(), listFilter1);
-+            rcvFilter.setLayoutManager(new LinearLayoutManager(getContext()));
-+            rcvFilter.setAdapter(historyNewsAdapter);
-+            RecyclerView.ItemDecoration decoration = new DividerItemDecoration(getContext(), DividerItemDecoration.VERTICAL);
-+            rcvFilter.addItemDecoration(decoration);
-+        }
-+
-+    }
-+
-+
-     private void autoSliderImg() {
- 
-         if (mTimer == null) {
-@@ -160,14 +364,16 @@
- 
-         return mListPhoto;
-     }
-+
-     private void getListNews() {
-         for (int i = 0; i < listChild.size(); i++) {
-             myData.child(listChild.get(i)).addChildEventListener(new ChildEventListener() {
-                 @Override
-                 public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
-                     giaiTriNews giaiTriNews = snapshot.getValue(giaiTriNews.class);
--                    newsTrangChuList.add(new NewsTrangChu(giaiTriNews.getTitle() , giaiTriNews.getDescription(),
--                            giaiTriNews.getDate(),giaiTriNews.getPrice(),true, ""));
-+                    newsTrangChuList.add(new NewsTrangChu(giaiTriNews.getTitle(), giaiTriNews.getDescription(),
-+                            giaiTriNews.getDate(), giaiTriNews.getPrice(), true, "", giaiTriNews.getTenDanhMuc()));
-+                    listFilter.add(new historyNews(giaiTriNews.getId(), giaiTriNews.getTitle(), null, giaiTriNews.getDate(), giaiTriNews.getTenDanhMuc(), null));
-                     mNewsTrangChuAdapter.notifyDataSetChanged();
-                 }
- 
-@@ -199,8 +405,11 @@
-                 public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
-                     thoiTrangNews thoiTrangNews = snapshot.getValue(com.example.duan1.model.thoiTrangNews.class);
-                     newsTrangChuList.add(new NewsTrangChu(thoiTrangNews.getTitlePost(), thoiTrangNews.getDescriptionPost(),
--                            thoiTrangNews.getDate(), thoiTrangNews.getPrice(), true , ""));
-+                            thoiTrangNews.getDate(), thoiTrangNews.getPrice(), true, "", thoiTrangNews.getTenDanhMuc()));
-+
-+                    listFilter.add(new historyNews(thoiTrangNews.getId(), thoiTrangNews.getTitlePost(), null, thoiTrangNews.getDate(), thoiTrangNews.getTenDanhMuc(), null));
-                     mNewsTrangChuAdapter.notifyDataSetChanged();
-+
-                 }
- 
-                 @Override
-@@ -230,9 +439,11 @@
-                 public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
-                     BDSNews bdsNews = snapshot.getValue(BDSNews.class);
- 
--                    newsTrangChuList.add(new NewsTrangChu(bdsNews.getTitle() , bdsNews.getDescription() ,
--                            bdsNews.getDate(),bdsNews.getPrice(), true, bdsNews.getImage()));
--                            mNewsTrangChuAdapter.notifyDataSetChanged();
-+                    newsTrangChuList.add(new NewsTrangChu(bdsNews.getTitle(), bdsNews.getDescription(),
-+                            bdsNews.getDate(), bdsNews.getPrice(), true, bdsNews.getImage(), bdsNews.getTenDanhMuc()));
-+
-+                    listFilter.add(new historyNews(bdsNews.getId(), bdsNews.getTitle(), null, bdsNews.getDate(), bdsNews.getTenDanhMuc(), null));
-+                    mNewsTrangChuAdapter.notifyDataSetChanged();
-                 }
- 
-                 @Override
-@@ -258,7 +469,9 @@
- 
-         }
- 
-+
-     }
-+
-     private List<String> listChild1() {
-         listChild.add(new String("Nhạc cụ"));
-         listChild.add(new String("Sách"));
-Index: app/src/main/java/com/example/duan1/MainActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.app.AlertDialog;\r\nimport android.app.Dialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.view.Gravity;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Fragment.FragmentDaoCho;\r\nimport com.example.duan1.Fragment.FragmentQuanLiTin;\r\nimport com.example.duan1.Fragment.FragmentThem;\r\nimport com.example.duan1.Fragment.FragmentTrangChu;\r\nimport com.example.duan1.model.Users;\r\n\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.android.material.navigation.NavigationBarView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    BottomNavigationView bottomNavigationView;\r\n    FloatingActionButton floatingActionButton;\r\n\r\n    FragmentTrangChu fragmentTrangChu = new FragmentTrangChu();\r\n    FragmentQuanLiTin fragmentQuanLiTin = new FragmentQuanLiTin();\r\n    FragmentDaoCho fragmentDaoCho = new FragmentDaoCho();\r\n    FragmentThem fragmentThem = new FragmentThem();\r\n    private FirebaseUser currentUser;\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseDatabase database;\r\n    private DatabaseReference myRef;\r\n    public static String name;\r\n    public static int id;\r\n\r\n\r\n    @SuppressLint(\"MissingInflatedId\")\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        initUi();\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        currentUser = mAuth.getCurrentUser();\r\n\r\n        database = FirebaseDatabase.getInstance();\r\n        myRef = database.getReference(\"Users\");\r\n        if (currentUser!= null){\r\n            getUser();\r\n        }\r\n\r\n        floatingActionButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n//        currentUser = mAuth.getCurrentUser();\r\n\r\n                if (currentUser != null) {\r\n\r\n                    showDialogChooseListProduct();\r\n\r\n                } else {\r\n                    MainActivity.showDiaLogWarning(MainActivity.this, \"Vui lòng đăng nhập để có thể đăng bán sản phẩm\");\r\n                }\r\n            }\r\n        });\r\n\r\n        bottomNavigationView.setOnItemSelectedListener(new NavigationBarView.OnItemSelectedListener() {\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                switch (item.getItemId()) {\r\n                    case R.id.home:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentTrangChu).commit();\r\n                        return true;\r\n\r\n                    case R.id.believe:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentQuanLiTin).commit();\r\n                        return true;\r\n\r\n                    case R.id.fab:\r\n                        return true;\r\n\r\n                    case R.id.market:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentDaoCho).commit();\r\n                        return true;\r\n\r\n                    case R.id.more:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentThem).commit();\r\n                        return true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void getUser() {\r\n        List<Users> mListUser = new ArrayList<>();\r\n\r\n        String email = currentUser.getEmail();\r\n        myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                mListUser.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren()) {\r\n                    Users user = snapshot1.getValue(Users.class);\r\n                    mListUser.add(user);\r\n                }\r\n\r\n                for (int i = 0; i < mListUser.size(); i++) {\r\n                    if (mListUser.get(i).getEmail().equals(email)) {\r\n                        name = (mListUser.get(i).getName());\r\n                        id = mListUser.get(i).getId();\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Toast.makeText(MainActivity.this, \"Error get Id and Name from Firebase\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void showDialogChooseListProduct() {\r\n\r\n\r\n        final Dialog dialog = new Dialog(this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.layout_dialog_chon_danh_muc);\r\n        getUser();\r\n        Window window = dialog.getWindow();\r\n        if (window == null) {\r\n            return;\r\n        }\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.BOTTOM;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        RelativeLayout layout_batDongSan = dialog.findViewById(R.id.layout_batDongSan);\r\n        RelativeLayout layout_XeCo = dialog.findViewById(R.id.layout_XeCo);\r\n        RelativeLayout layout_thoiTrang = dialog.findViewById(R.id.layout_thoiTrang);\r\n        RelativeLayout layout_dienTu = dialog.findViewById(R.id.layout_dienTu);\r\n        RelativeLayout layout_giaiTri = dialog.findViewById(R.id.layout_giaiTri);\r\n        RelativeLayout layout_dienGiaDung = dialog.findViewById(R.id.layout_dienGiaDung);\r\n        ImageView icon_close = dialog.findViewById(R.id.icon_close);\r\n\r\n        icon_close.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n        layout_giaiTri.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucGiaiTriActivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        layout_dienGiaDung.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(MainActivity.this, \"Id : \" + id + \" NAme : \" + name, Toast.LENGTH_SHORT).show();\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucDienMayActivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        layout_batDongSan.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(MainActivity.this, \"Id : \" + id + \" NAme : \" + name, Toast.LENGTH_SHORT).show();\r\n\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucBDSActivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        layout_XeCo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(MainActivity.this, \"Id : \" + id + \" NAme : \" + name, Toast.LENGTH_SHORT).show();\r\n\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucXeCoActivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        layout_thoiTrang.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucThoiTrangAcrivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        layout_dienTu.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(MainActivity.this, \"Id : \" + id + \" NAme : \" + name, Toast.LENGTH_SHORT).show();\r\n\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucDoDienTuActivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        dialog.show();\r\n    }\r\n\r\n    private void initUi() {\r\n        bottomNavigationView = findViewById(R.id.bottomNavigationView);\r\n        floatingActionButton = findViewById(R.id.fab);\r\n\r\n        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentTrangChu).commit();\r\n    }\r\n\r\n    public static void showDiaLogWarning(Context context, String text) {\r\n        final AlertDialog.Builder alertDialog = new AlertDialog.Builder(context);\r\n        alertDialog.setMessage(text).setTitle(\"Warning\").setIcon(R.drawable.ic_warning)\r\n                .setNegativeButton(\"Ok\", null);\r\n        alertDialog.show();\r\n    }\r\n\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/MainActivity.java b/app/src/main/java/com/example/duan1/MainActivity.java
---- a/app/src/main/java/com/example/duan1/MainActivity.java	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/java/com/example/duan1/MainActivity.java	(date 1670732853350)
-@@ -2,15 +2,18 @@
- 
- import androidx.annotation.NonNull;
- import androidx.appcompat.app.AppCompatActivity;
-+import androidx.appcompat.widget.SearchView;
- 
- import android.annotation.SuppressLint;
- import android.app.AlertDialog;
- import android.app.Dialog;
-+import android.app.SearchManager;
- import android.content.Context;
- import android.content.Intent;
- import android.graphics.drawable.ColorDrawable;
- import android.os.Bundle;
- import android.view.Gravity;
-+import android.view.Menu;
- import android.view.MenuItem;
- import android.view.View;
- import android.view.Window;
-@@ -44,7 +47,7 @@
- 
-     BottomNavigationView bottomNavigationView;
-     FloatingActionButton floatingActionButton;
--
-+    SearchView searchView;
-     FragmentTrangChu fragmentTrangChu = new FragmentTrangChu();
-     FragmentQuanLiTin fragmentQuanLiTin = new FragmentQuanLiTin();
-     FragmentDaoCho fragmentDaoCho = new FragmentDaoCho();
-@@ -57,19 +60,21 @@
-     public static int id;
- 
- 
-+
-+
-     @SuppressLint("MissingInflatedId")
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
-         setContentView(R.layout.activity_main);
-         initUi();
--
-+        searchView = findViewById(R.id.searchView);
-         mAuth = FirebaseAuth.getInstance();
-         currentUser = mAuth.getCurrentUser();
- 
-         database = FirebaseDatabase.getInstance();
-         myRef = database.getReference("Users");
--        if (currentUser!= null){
-+        if (currentUser != null) {
-             getUser();
-         }
- 
-@@ -88,6 +93,7 @@
-             }
-         });
- 
-+
-         bottomNavigationView.setOnItemSelectedListener(new NavigationBarView.OnItemSelectedListener() {
-             @Override
-             public boolean onNavigationItemSelected(@NonNull MenuItem item) {
-Index: app/src/main/res/layout/activity_main.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    tools:context=\".MainActivity\">\r\n\r\n    <androidx.appcompat.widget.Toolbar\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"50dp\"\r\n        android:background=\"@color/Orenge\"\r\n        >\r\n\r\n        <androidx.appcompat.widget.SearchView\r\n            android:id=\"@+id/searchView\"\r\n            android:layout_width=\"200dp\"\r\n            android:layout_height=\"30dp\"\r\n            android:background=\"@drawable/bg_seachview\"\r\n            app:queryHint=\"Tìm kiếm...\"\r\n            app:iconifiedByDefault=\"false\"\r\n\r\n            />\r\n\r\n    </androidx.appcompat.widget.Toolbar>\r\n\r\n    <FrameLayout\r\n        android:id=\"@+id/container\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_marginTop=\"50dp\"\r\n        />\r\n\r\n    <com.google.android.material.bottomappbar.BottomAppBar\r\n        android:id=\"@+id/bottomAppBar\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"60dp\"\r\n        android:layout_gravity=\"bottom\"\r\n        app:fabCradleMargin=\"10dp\"\r\n        app:fabCradleRoundedCornerRadius=\"10dp\"\r\n        app:fabCradleVerticalOffset=\"10dp\"\r\n\r\n        >\r\n\r\n        <com.google.android.material.bottomnavigation.BottomNavigationView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:id=\"@+id/bottomNavigationView\"\r\n            android:layout_marginRight=\"16dp\"\r\n            app:menu=\"@menu/bottom_nav_menu\"\r\n            android:background=\"@drawable/transparent_background\"\r\n            app:itemRippleColor=\"@null\"\r\n            />\r\n\r\n    </com.google.android.material.bottomappbar.BottomAppBar>\r\n\r\n    <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:id=\"@+id/fab\"\r\n        app:layout_anchor=\"@id/bottomAppBar\"\r\n        android:src=\"@drawable/ic_baseline_add_24\"\r\n        app:elevation=\"3dp\"\r\n        />\r\n\r\n</androidx.coordinatorlayout.widget.CoordinatorLayout>\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/activity_main.xml b/app/src/main/res/layout/activity_main.xml
---- a/app/src/main/res/layout/activity_main.xml	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/res/layout/activity_main.xml	(date 1670733205277)
-@@ -6,29 +6,29 @@
-     xmlns:app="http://schemas.android.com/apk/res-auto"
-     tools:context=".MainActivity">
- 
--    <androidx.appcompat.widget.Toolbar
--        android:layout_width="match_parent"
--        android:layout_height="50dp"
--        android:background="@color/Orenge"
--        >
-+<!--    <androidx.appcompat.widget.Toolbar-->
-+<!--        android:layout_width="match_parent"-->
-+<!--        android:layout_height="50dp"-->
-+<!--        android:background="@color/Orenge"-->
-+<!--        >-->
- 
--        <androidx.appcompat.widget.SearchView
--            android:id="@+id/searchView"
--            android:layout_width="200dp"
--            android:layout_height="30dp"
--            android:background="@drawable/bg_seachview"
--            app:queryHint="Tìm kiếm..."
--            app:iconifiedByDefault="false"
-+<!--        <androidx.appcompat.widget.SearchView-->
-+<!--            android:id="@+id/searchView"-->
-+<!--            android:layout_width="200dp"-->
-+<!--            android:layout_height="30dp"-->
-+<!--            android:background="@drawable/bg_seachview"-->
-+<!--            app:queryHint="Tìm kiếm..."-->
-+<!--            app:iconifiedByDefault="false"-->
- 
--            />
-+<!--            />-->
- 
--    </androidx.appcompat.widget.Toolbar>
-+<!--    </androidx.appcompat.widget.Toolbar>-->
- 
-     <FrameLayout
-         android:id="@+id/container"
-         android:layout_width="match_parent"
-         android:layout_height="match_parent"
--        android:layout_marginTop="50dp"
-+
-         />
- 
-     <com.google.android.material.bottomappbar.BottomAppBar
-Index: app/src/main/java/com/example/duan1/model/BDSNews.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1.model;\r\n\r\npublic class BDSNews {\r\n    private int id;\r\n    private String title;\r\n    private String description;\r\n    private double price;\r\n    private String dienTich ;\r\n    private String adress;\r\n    private String tenPhanKhu;\r\n    private String loaiDat;\r\n    private String direction;\r\n    private String soPhongNgu;\r\n    private String soPhongWc;\r\n    private int idUser;\r\n    private String nameUser;\r\n    private String tenDanhMuc;\r\n    private String date;\r\n    private String image;\r\n\r\n    public BDSNews(int maxID, String strTitlePost, String strDescription, double dbPrice, String strDienTich, String strAddress, String strTenKhu, String strLoaiHinhDat, String strSoPhongNgu, String strSoPhongWc, int idUser, String nameUser, String tenDanhMuc, String date, String s) {\r\n    }\r\n\r\n    public BDSNews() {\r\n    }\r\n\r\n    public BDSNews(int id, String title, String description, double price, String dienTich, String adress, String tenPhanKhu, String loaiDat, String direction, String soPhongNgu, String soPhongWc, int idUser, String nameUser, String tenDanhMuc, String date, String image) {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.description = description;\r\n        this.price = price;\r\n        this.dienTich = dienTich;\r\n        this.adress = adress;\r\n        this.tenPhanKhu = tenPhanKhu;\r\n        this.loaiDat = loaiDat;\r\n        this.direction = direction;\r\n        this.soPhongNgu = soPhongNgu;\r\n        this.soPhongWc = soPhongWc;\r\n        this.idUser = idUser;\r\n        this.nameUser = nameUser;\r\n        this.tenDanhMuc = tenDanhMuc;\r\n        this.date = date;\r\n        this.image = image;\r\n    }\r\n\r\n        public BDSNews(int maxID, String strTitlePost, String strDescription, double dbPrice, String strDienTich,\r\n                   String strAddress, String strTenKhu, String strLoaiHinhDat,\r\n                   String strSoPhongNgu, String strSoPhongWc, int idUser, String nameUser , String tenDanhMuc, String date) {\r\n        this.id = maxID;\r\n        this.title = strTitlePost;\r\n        this.description = strDescription;\r\n        this.price = dbPrice;\r\n        this.dienTich = strDienTich;\r\n        this.adress = strAddress;\r\n        this.tenPhanKhu = strTenKhu;\r\n        this.loaiDat = strLoaiHinhDat;\r\n        this.soPhongNgu = strSoPhongNgu;\r\n        this.soPhongWc = strSoPhongWc;\r\n        this.idUser = idUser;\r\n        this.nameUser = nameUser;\r\n        this.tenDanhMuc = tenDanhMuc;\r\n        this.date = date;\r\n    }\r\n\r\n\r\n    public BDSNews(int id, String title, String description, double price,\r\n                   String dienTich, String adress\r\n                  , int idUser, String nameUser , String tenDanhMuc, String date\r\n    ) {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.description = description;\r\n        this.price = price;\r\n        this.dienTich = dienTich;\r\n        this.adress = adress;\r\n        this.idUser = idUser;\r\n        this.nameUser = nameUser;\r\n        this.tenDanhMuc = tenDanhMuc;\r\n        this.date = date;\r\n    }\r\n\r\n    public BDSNews(int id, String title, String description, double price,\r\n                   String dienTich, String adress, String tenPhanKhu, String loaiDat, String direction\r\n            , int idUser, String nameUser,String tenDanhMuc, String date ) {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.description = description;\r\n        this.price = price;\r\n        this.dienTich = dienTich;\r\n        this.adress = adress;\r\n        this.tenPhanKhu = tenPhanKhu;\r\n        this.loaiDat = loaiDat;\r\n        this.direction = direction;\r\n        this.idUser = idUser;\r\n        this.nameUser = nameUser;\r\n        this.tenDanhMuc = tenDanhMuc;\r\n        this.date = date;\r\n    }\r\n\r\n    public String getDate() {\r\n        return date;\r\n    }\r\n\r\n    public void setDate(String date) {\r\n        this.date = date;\r\n    }\r\n\r\n    public String getTenDanhMuc() {\r\n        return tenDanhMuc;\r\n    }\r\n\r\n    public void setTenDanhMuc(String tenDanhMuc) {\r\n        this.tenDanhMuc = tenDanhMuc;\r\n    }\r\n\r\n    public int getIdUser() {\r\n        return idUser;\r\n    }\r\n\r\n    public void setIdUser(int idUser) {\r\n        this.idUser = idUser;\r\n    }\r\n\r\n    public String getNameUser() {\r\n        return nameUser;\r\n    }\r\n\r\n    public void setNameUser(String nameUser) {\r\n        this.nameUser = nameUser;\r\n    }\r\n\r\n    public String getSoPhongNgu() {\r\n        return soPhongNgu;\r\n    }\r\n\r\n    public void setSoPhongNgu(String soPhongNgu) {\r\n        this.soPhongNgu = soPhongNgu;\r\n    }\r\n\r\n    public String getSoPhongWc() {\r\n        return soPhongWc;\r\n    }\r\n\r\n    public void setSoPhongWc(String soPhongWc) {\r\n        this.soPhongWc = soPhongWc;\r\n    }\r\n\r\n    public String getTenPhanKhu() {\r\n        return tenPhanKhu;\r\n    }\r\n\r\n    public void setTenPhanKhu(String tenPhanKhu) {\r\n        this.tenPhanKhu = tenPhanKhu;\r\n    }\r\n\r\n    public String getLoaiDat() {\r\n        return loaiDat;\r\n    }\r\n\r\n    public void setLoaiDat(String loaiDat) {\r\n        this.loaiDat = loaiDat;\r\n    }\r\n\r\n    public String getDirection() {\r\n        return direction;\r\n    }\r\n\r\n    public void setDirection(String direction) {\r\n        this.direction = direction;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(double price) {\r\n        this.price = price;\r\n    }\r\n\r\n    public String getDienTich() {\r\n        return dienTich;\r\n    }\r\n\r\n    public void setDienTich(String dienTich) {\r\n        this.dienTich = dienTich;\r\n    }\r\n\r\n    public String getAdress() {\r\n        return adress;\r\n    }\r\n\r\n    public void setAdress(String adress) {\r\n        this.adress = adress;\r\n    }\r\n\r\n    public String getImage() {\r\n        return image;\r\n    }\r\n\r\n    public void setImage(String image) {\r\n        this.image = image;\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/model/BDSNews.java b/app/src/main/java/com/example/duan1/model/BDSNews.java
---- a/app/src/main/java/com/example/duan1/model/BDSNews.java	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/java/com/example/duan1/model/BDSNews.java	(date 1670682170684)
-@@ -18,7 +18,9 @@
-     private String date;
-     private String image;
- 
--    public BDSNews(int maxID, String strTitlePost, String strDescription, double dbPrice, String strDienTich, String strAddress, String strTenKhu, String strLoaiHinhDat, String strSoPhongNgu, String strSoPhongWc, int idUser, String nameUser, String tenDanhMuc, String date, String s) {
-+    public BDSNews(int maxID, String strTitlePost, String strDescription, double dbPrice, String strDienTich,
-+                   String strAddress, String strTenKhu, String strLoaiHinhDat, String strSoPhongNgu,
-+                   String strSoPhongWc, int idUser, String nameUser, String tenDanhMuc, String date, String s) {
-     }
- 
-     public BDSNews() {
-@@ -45,7 +47,7 @@
- 
-         public BDSNews(int maxID, String strTitlePost, String strDescription, double dbPrice, String strDienTich,
-                    String strAddress, String strTenKhu, String strLoaiHinhDat,
--                   String strSoPhongNgu, String strSoPhongWc, int idUser, String nameUser , String tenDanhMuc, String date) {
-+                   String strSoPhongNgu, String strSoPhongWc, int idUser, String nameUser , String tenDanhMuc, String date ) {
-         this.id = maxID;
-         this.title = strTitlePost;
-         this.description = strDescription;
-@@ -60,6 +62,8 @@
-         this.nameUser = nameUser;
-         this.tenDanhMuc = tenDanhMuc;
-         this.date = date;
-+
-+
-     }
- 
- 
-Index: app/src/main/java/com/example/duan1/model/NewsTrangChu.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1.model;\r\n\r\npublic class NewsTrangChu {\r\n    private String title,descripsion, time;\r\n    private double fee;\r\n    private boolean favorite;\r\n    private String image;\r\n\r\n//    public int getsoluonganh(){\r\n//        return getArrURL().size();\r\n//    }\r\n\r\n    public NewsTrangChu() {\r\n    }\r\n\r\n\r\n    public NewsTrangChu(String title, String descripsion, String time, double fee, boolean favorite, String image) {\r\n        this.title = title;\r\n        this.descripsion = descripsion;\r\n        this.time = time;\r\n        this.fee = fee;\r\n        this.favorite = favorite;\r\n        this.image = image;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public String getDescripsion() {\r\n        return descripsion;\r\n    }\r\n\r\n    public void setDescripsion(String descripsion) {\r\n        this.descripsion = descripsion;\r\n    }\r\n\r\n    public Double getFee() {\r\n        return fee;\r\n    }\r\n\r\n    public void setFee(Double fee) {\r\n        this.fee = fee;\r\n    }\r\n\r\n    public String getTime() {\r\n        return time;\r\n    }\r\n\r\n    public void setTime(String time) {\r\n        this.time = time;\r\n    }\r\n\r\n    public boolean isFavorite() {\r\n        return favorite;\r\n    }\r\n\r\n    public void setFavorite(boolean favorite) {\r\n        this.favorite = favorite;\r\n    }\r\n\r\n    public void setFee(double fee) {\r\n        this.fee = fee;\r\n    }\r\n\r\n    public String getImage() {\r\n        return image;\r\n    }\r\n\r\n    public void setImage(String image) {\r\n        this.image = image;\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/model/NewsTrangChu.java b/app/src/main/java/com/example/duan1/model/NewsTrangChu.java
---- a/app/src/main/java/com/example/duan1/model/NewsTrangChu.java	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/java/com/example/duan1/model/NewsTrangChu.java	(date 1670764968639)
-@@ -1,10 +1,11 @@
- package com.example.duan1.model;
- 
- public class NewsTrangChu {
--    private String title,descripsion, time;
-+    private String title,descripsion, time ;
-     private double fee;
-     private boolean favorite;
-     private String image;
-+    private String tenDanhMuc;
- 
- //    public int getsoluonganh(){
- //        return getArrURL().size();
-@@ -14,13 +15,23 @@
-     }
- 
- 
--    public NewsTrangChu(String title, String descripsion, String time, double fee, boolean favorite, String image) {
-+    public NewsTrangChu(String title, String descripsion, String time, double fee, boolean favorite,
-+                        String image, String tenDanhMuc) {
-         this.title = title;
-         this.descripsion = descripsion;
-         this.time = time;
-         this.fee = fee;
-         this.favorite = favorite;
-         this.image = image;
-+        this.tenDanhMuc = tenDanhMuc;
-+    }
-+
-+    public String getTenDanhMuc() {
-+        return tenDanhMuc;
-+    }
-+
-+    public void setTenDanhMuc(String tenDanhMuc) {
-+        this.tenDanhMuc = tenDanhMuc;
-     }
- 
-     public String getTitle() {
-Index: .idea/misc.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable-v24/ic_launcher_foreground.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/background_title.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_button_login.xml\" value=\"0.142\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_button_register.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_corner.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_input.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_overlay.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/duongvien_goctron.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_add_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_home_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_more_horiz_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_newspaper_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_shopping_basket_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/transparent_background.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_bdsactivity.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_dien_may.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_do_dien_tu.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_giai_tri.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_thoi_trang.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_thoi_trang_acrivity.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_xe_co.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dag_tin_giai_tri.xml\" value=\"0.12978142076502733\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_bdsactivity.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_bdsdat.xml\" value=\"0.21\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_bdsphong_tro.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_thoi_trang.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_edit_account.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_login.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_main.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_register.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_splash_screen.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_sua_tin_bdsactivity.xml\" value=\"0.18206521739130435\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_sua_tin_bdsdat.xml\" value=\"0.18206521739130435\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_sua_tin_phong_tro.xml\" value=\"0.18206521739130435\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_sua_tin_thoi_trang.xml\" value=\"0.18206521739130435\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/dialog_item_bat_dong_san.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_quan_li_tin.xml\" value=\"0.19\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_them.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_trang_chu.xml\" value=\"0.13541666666666666\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_bds.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_dien_may.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_the_thao.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_thoi_trang.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_direction.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_dmuc_dien_tu.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_dmuc_xe_co.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_image_add_news.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_quan_ly_tin_dang.xml\" value=\"0.18206521739130435\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_slider.xml\" value=\"0.2\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/layout_dialog_chon_danh_muc.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/slider_item_layout.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/menu/bottom_nav_menu.xml\" value=\"0.225\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/menu/menu_them.xml\" value=\"0.225\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/menu/popup_menu.xml\" value=\"0.225\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"Android Studio default JDK\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/.idea/misc.xml b/.idea/misc.xml
---- a/.idea/misc.xml	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/.idea/misc.xml	(date 1670729840522)
-@@ -16,6 +16,7 @@
-         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_more_horiz_24.xml" value="0.128" />
-         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_newspaper_24.xml" value="0.128" />
-         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_shopping_basket_24.xml" value="0.128" />
-+        <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_search.xml" value="0.1345" />
-         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/transparent_background.xml" value="0.128" />
-         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_bdsactivity.xml" value="0.1721014492753623" />
-         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_dien_may.xml" value="0.1721014492753623" />
-@@ -56,6 +57,7 @@
-         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/layout_dialog_chon_danh_muc.xml" value="0.1721014492753623" />
-         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/slider_item_layout.xml" value="0.17028985507246377" />
-         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/menu/bottom_nav_menu.xml" value="0.225" />
-+        <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/menu/item_search_menu.xml" value="0.225" />
-         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/menu/menu_them.xml" value="0.225" />
-         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/menu/popup_menu.xml" value="0.225" />
-       </map>
-Index: app/src/main/java/com/example/duan1/dangTinBDSDatActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.Manifest;\r\nimport android.app.AlertDialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.photoAdapter;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.direction;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\npublic class dangTinBDSDatActivity extends AppCompatActivity implements com.example.duan1.Adapter.photoAdapter.CountOfImageWhenRemove {\r\n    private TextView tvTenDanhMuc;\r\n    private ImageView imgBackPage;\r\n\r\n    private EditText edtTitlePost, edtDescription, edtTenPhanKhu, edtLoaiHinhDat, edtAddress, edtDienTich, edtPrice;\r\n    private LinearLayout addImageProduct;\r\n    private Button btnDangTin ,btnSuaTin;\r\n    private Spinner spn_Direction;\r\n    private String strTitlePost, strDescription, strTenPhanKhu, strAddress, strLoaiHinhDat, strDienTich,\r\n            strPrice, strDirection, nameUser, tenDanhMuc ,date;\r\n    private double dbPrice;\r\n    private String title_Post = null;\r\n    private chonDanhMucThoiTrangAcrivity chonDanhMucThoiTrangAcrivity;\r\n\r\n\r\n    private com.example.duan1.Adapter.photoAdapter photoAdapter;\r\n    private RecyclerView rcvView_select_img_Dat;\r\n    private ArrayList<Uri> imageUri;\r\n    private int REQUEST_PERMISSION_CODE = 35;\r\n    private int PICK_IMAGE = 1;\r\n    private int update_count = 0, maxID, idUser , idEdit;\r\n    private ProgressDialog progressDialog;\r\n    DatabaseReference myData;\r\n    StorageReference imageFolder;\r\n    private List<BDSNews> listBDS;\r\n    MainActivity mainActivity;\r\n    BDSNews bdsNewsId;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_dang_tin_bdsdat);\r\n\r\n        imageFolder = FirebaseStorage.getInstance().getReference().child(\"Image.jpg\");\r\n        myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"BDS\");\r\n        imageUri = new ArrayList<>();\r\n\r\n        nameUser = mainActivity.name;\r\n        idUser = mainActivity.id;\r\n\r\n        initUi();\r\n        clickBackPage();\r\n        eventClickSpinner();\r\n        getListBds();\r\n        clickAddImageFashion();\r\n        clickDangTin();\r\n        getCurrentDate();\r\n        if(title_Post == null || title_Post.equals(\"\")){\r\n            btnDangTin.setVisibility(View.VISIBLE);\r\n            btnSuaTin.setVisibility(View.INVISIBLE);\r\n        }else {\r\n            btnSuaTin.setVisibility(View.VISIBLE);\r\n            btnDangTin.setVisibility(View.INVISIBLE);\r\n            setTextInput();\r\n            editNews();\r\n        }\r\n    }\r\n    private void getCurrentDate() {\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n        Calendar c = Calendar.getInstance();\r\n        date = sdf.format(c.getTime());\r\n        System.out.println(\"Date : \" + date);\r\n    }\r\n    private void editNews() {\r\n        btnSuaTin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog = new ProgressDialog(dangTinBDSDatActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strTenPhanKhu = edtTenPhanKhu.getText().toString().trim();\r\n                strLoaiHinhDat = edtLoaiHinhDat.getText().toString().trim();\r\n                strAddress = edtAddress.getText().toString().trim();\r\n                strPrice = edtPrice.getText().toString();\r\n                strDienTich = edtDienTich.getText().toString();\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n\r\n                } catch (Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n\r\n                strDirection = spn_Direction.getSelectedItem().toString();\r\n\r\n\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty() || strTenPhanKhu.isEmpty() || strLoaiHinhDat.isEmpty()\r\n                        || strDienTich.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dangTinBDSDatActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n                    for (update_count = 0; update_count < imageUri.size(); update_count++) {\r\n                        Uri indexImage = imageUri.get(update_count);\r\n                        StorageReference imageName = imageFolder.child(\"Image \" + indexImage.getLastPathSegment());\r\n                        imageName.child(strTitlePost).putFile(indexImage).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                            @Override\r\n                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                                imageName.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                    @Override\r\n                                    public void onSuccess(Uri uri) {\r\n                                        String Url = String.valueOf(uri);\r\n                                        StoreLick(Url);\r\n\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    String strId = String.valueOf(idEdit);\r\n                    myData.child(tenDanhMuc).child(strId).setValue(new BDSNews(idEdit, strTitlePost, strDescription, dbPrice\r\n                                    , strDienTich, strAddress, strTenPhanKhu, strLoaiHinhDat,\r\n                                    strDirection, idUser, nameUser,tenDanhMuc, date))\r\n                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dangTinBDSDatActivity.this, \"Sửa tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setTextInput() {\r\n        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n        DatabaseReference databaseReference = firebaseDatabase.getReference(\"Tin\").child(\"BDS\");\r\n        databaseReference.child(tenDanhMuc).addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                BDSNews bdsNews = snapshot.getValue(BDSNews.class);\r\n                listBDS.clear();\r\n                listBDS.add(bdsNews);\r\n                if (bdsNews.getTitle().equals(title_Post)){\r\n                    edtTitlePost.setText(bdsNews.getTitle());\r\n                    edtDescription.setText(bdsNews.getDescription());\r\n                    String price = String.valueOf(bdsNews.getPrice());\r\n                    edtPrice.setText(price);\r\n                    edtAddress.setText(bdsNews.getAdress());\r\n                    edtDienTich.setText(bdsNews.getDienTich());\r\n                    edtLoaiHinhDat.setText(bdsNews.getLoaiDat());\r\n                    edtTenPhanKhu.setText(bdsNews.getTenPhanKhu());\r\n                    idEdit = bdsNews.getId();\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickBackPage() {\r\n        imgBackPage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void eventClickSpinner() {\r\n        direction[] directions = dangTinBDSActivity.EmployeeDataUtils.getEmployees();\r\n        ArrayAdapter<direction> adapter = new ArrayAdapter<direction>(this, android.R.layout.simple_spinner_item, directions);\r\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spn_Direction.setAdapter(adapter);\r\n\r\n        spn_Direction.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                Toast.makeText(dangTinBDSDatActivity.this, \"Hướng \" + i, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickAddImageFashion() {\r\n        photoAdapter = new photoAdapter(imageUri, this, this);\r\n        rcvView_select_img_Dat.setLayoutManager(new GridLayoutManager(dangTinBDSDatActivity.this, 6));\r\n        rcvView_select_img_Dat.setAdapter(photoAdapter);\r\n\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n                    REQUEST_PERMISSION_CODE);\r\n            return;\r\n        }\r\n\r\n        addImageProduct.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                intent.setType(\"image/*\");\r\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR2) {\r\n                    intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n                }\r\n                startActivityForResult(Intent.createChooser(intent, \"select Picture\"), PICK_IMAGE);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == PICK_IMAGE && resultCode == RESULT_OK && data != null) {\r\n            if (data.getClipData() != null) {\r\n                int count = data.getClipData().getItemCount();\r\n\r\n                for (int i = 0; i < count; i++) {\r\n                    if (imageUri.size() < 9) {\r\n                        Uri imgUri = (data.getClipData().getItemAt(i).getUri());\r\n                        imageUri.add(imgUri);\r\n                    } else {\r\n\r\n                        Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                photoAdapter.notifyDataSetChanged();\r\n            } else {\r\n                if (imageUri.size() < 9) {\r\n                    Uri imgUri = data.getData();\r\n                    imageUri.add(imgUri);\r\n                } else {\r\n                    Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n\r\n            }\r\n            photoAdapter.notifyDataSetChanged();\r\n        } else {\r\n            Toast.makeText(this, \"you haven't pick any Image\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n\r\n    private void clickDangTin() {\r\n\r\n\r\n        btnDangTin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog = new ProgressDialog(dangTinBDSDatActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strTenPhanKhu = edtTenPhanKhu.getText().toString().trim();\r\n                strLoaiHinhDat = edtLoaiHinhDat.getText().toString().trim();\r\n                strAddress = edtAddress.getText().toString().trim();\r\n                strPrice = edtPrice.getText().toString();\r\n                strDienTich = edtDienTich.getText().toString();\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n\r\n                } catch (Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n\r\n                strDirection = spn_Direction.getSelectedItem().toString();\r\n\r\n\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty() || strTenPhanKhu.isEmpty() || strLoaiHinhDat.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dangTinBDSDatActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n                    for (update_count = 0; update_count < imageUri.size(); update_count++) {\r\n                        Uri indexImage = imageUri.get(update_count);\r\n                        StorageReference imageName = imageFolder.child(\"Image \" + indexImage.getLastPathSegment());\r\n                        imageName.child(strTitlePost).putFile(indexImage).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                            @Override\r\n                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                                imageName.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                    @Override\r\n                                    public void onSuccess(Uri uri) {\r\n                                        String Url = String.valueOf(uri);\r\n                                        StoreLick(Url);\r\n\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                    maxID = bdsNewsId.getId() + 1;\r\n                    String strId = String.valueOf(maxID);\r\n                    myData.child(tenDanhMuc).child(strId).setValue(new BDSNews(maxID, strTitlePost, strDescription, dbPrice\r\n                                    , strDienTich, strAddress, strTenPhanKhu, strLoaiHinhDat,\r\n                                    strDirection, idUser, nameUser, tenDanhMuc ,date))\r\n                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dangTinBDSDatActivity.this, \"Đăng tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    private List<BDSNews> getListBds() {\r\n        listBDS = new ArrayList<>();\r\n        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n        DatabaseReference databaseReference = firebaseDatabase.getReference(\"Tin\").child(\"BDS\");\r\n        databaseReference.child(tenDanhMuc).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                listBDS.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren()) {\r\n                    BDSNews bdsNews = snapshot1.getValue(BDSNews.class);\r\n                    listBDS.add(bdsNews);\r\n                    bdsNewsId = bdsNews;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Toast.makeText(dangTinBDSDatActivity.this, \"Load data Error\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return listBDS;\r\n\r\n    }\r\n\r\n    private void StoreLick(String url) {\r\n        DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference().child(\"List Image\");\r\n        HashMap<String, String> hashMap = new HashMap<>();\r\n        hashMap.put(\"Imglink\", url);\r\n        databaseReference.push().setValue(hashMap);\r\n\r\n    }\r\n\r\n    private void initUi() {\r\n        tvTenDanhMuc = findViewById(R.id.tvTenDanhMuc);\r\n        Intent intent = getIntent();\r\n        title_Post = intent.getStringExtra(\"title\");\r\n        tvTenDanhMuc.setText(\"Danh Mục - \" + intent.getStringExtra(\"tenDanhMuc\"));\r\n        imgBackPage = findViewById(R.id.icon_back);\r\n        spn_Direction = findViewById(R.id.spn_Direction);\r\n        edtTitlePost = findViewById(R.id.edtTitle_postDat);\r\n        edtDescription = findViewById(R.id.edtDesc);\r\n        edtTenPhanKhu = findViewById(R.id.edtTenPhanKhu);\r\n        edtAddress = findViewById(R.id.edtAddressDat);\r\n        addImageProduct = findViewById(R.id.addImageProduct);\r\n        edtLoaiHinhDat = findViewById(R.id.loaiHinhDat);\r\n        edtDienTich = findViewById(R.id.dienTichDat);\r\n        edtPrice = findViewById(R.id.price);\r\n        btnDangTin = findViewById(R.id.btnDangTin);\r\n        btnSuaTin = findViewById(R.id.btnSuaTin);\r\n        rcvView_select_img_Dat = findViewById(R.id.rcvView_select_img_Dat);\r\n        Intent intent1 = getIntent();\r\n        tenDanhMuc = intent1.getStringExtra(\"tenDanhMuc\");\r\n\r\n    }\r\n\r\n    @Override\r\n    public void clicked(int getSize) {\r\n\r\n    }\r\n\r\n    public static class EmployeeDataUtils {\r\n        public static direction[] getEmployees() {\r\n            direction drt1 = new direction(\"Nam\");\r\n            direction drt2 = new direction(\"Bắc\");\r\n            direction drt3 = new direction(\"Đông\");\r\n            direction drt4 = new direction(\"Tây\");\r\n            direction drt5 = new direction(\"Đông-Nam\");\r\n            direction drt6 = new direction(\"Tây-Băc\");\r\n            direction drt7 = new direction(\"Đông-Bắc\");\r\n            direction drt8 = new direction(\"Tây-Nam\");\r\n            return new direction[]{drt1, drt2, drt3, drt4, drt5, drt6, drt7, drt8};\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/dangTinBDSDatActivity.java b/app/src/main/java/com/example/duan1/dangTinBDSDatActivity.java
---- a/app/src/main/java/com/example/duan1/dangTinBDSDatActivity.java	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/java/com/example/duan1/dangTinBDSDatActivity.java	(date 1670681714900)
-@@ -13,9 +13,11 @@
- import android.app.ProgressDialog;
- import android.content.Intent;
- import android.content.pm.PackageManager;
-+import android.graphics.Bitmap;
- import android.net.Uri;
- import android.os.Build;
- import android.os.Bundle;
-+import android.provider.MediaStore;
- import android.view.View;
- import android.widget.AdapterView;
- import android.widget.ArrayAdapter;
-@@ -31,6 +33,7 @@
- import com.example.duan1.model.BDSNews;
- import com.example.duan1.model.direction;
- import com.example.duan1.model.thoiTrangNews;
-+import com.google.android.gms.tasks.OnFailureListener;
- import com.google.android.gms.tasks.OnSuccessListener;
- import com.google.firebase.database.ChildEventListener;
- import com.google.firebase.database.DataSnapshot;
-@@ -42,6 +45,8 @@
- import com.google.firebase.storage.StorageReference;
- import com.google.firebase.storage.UploadTask;
- 
-+import java.io.ByteArrayOutputStream;
-+import java.io.IOException;
- import java.text.SimpleDateFormat;
- import java.util.ArrayList;
- import java.util.Calendar;
-@@ -61,7 +66,8 @@
-     private double dbPrice;
-     private String title_Post = null;
-     private chonDanhMucThoiTrangAcrivity chonDanhMucThoiTrangAcrivity;
--
-+    private Bitmap bitmapselect;
-+    private Calendar calendar = Calendar.getInstance();
- 
-     private com.example.duan1.Adapter.photoAdapter photoAdapter;
-     private RecyclerView rcvView_select_img_Dat;
-@@ -344,24 +350,31 @@
- 
-                 } else {
-                     progressDialog.show();
--                    for (update_count = 0; update_count < imageUri.size(); update_count++) {
--                        Uri indexImage = imageUri.get(update_count);
--                        StorageReference imageName = imageFolder.child("Image " + indexImage.getLastPathSegment());
--                        imageName.child(strTitlePost).putFile(indexImage).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {
--                            @Override
--                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {
--                                imageName.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {
--                                    @Override
--                                    public void onSuccess(Uri uri) {
--                                        String Url = String.valueOf(uri);
--                                        StoreLick(Url);
--
--                                    }
--                                });
--                            }
--                        });
--                    }
--                    maxID = bdsNewsId.getId() + 1;
-+                    if(bdsNewsId == null){
-+                        maxID = 0;
-+                    }else {
-+                        maxID = bdsNewsId.getId() + 1;
-+                    }
-+                    upImage(maxID);
-+
-+//                    for (update_count = 0; update_count < imageUri.size(); update_count++) {
-+//                        Uri indexImage = imageUri.get(update_count);
-+//                        StorageReference imageName = imageFolder.child("Image " + indexImage.getLastPathSegment());
-+//                        imageName.child(strTitlePost).putFile(indexImage).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {
-+//                            @Override
-+//                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {
-+//                                imageName.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {
-+//                                    @Override
-+//                                    public void onSuccess(Uri uri) {
-+//                                        String Url = String.valueOf(uri);
-+//                                        StoreLick(Url);
-+//
-+//                                    }
-+//                                });
-+//                            }
-+//                        });
-+//                    }
-+
-                     String strId = String.valueOf(maxID);
-                     myData.child(tenDanhMuc).child(strId).setValue(new BDSNews(maxID, strTitlePost, strDescription, dbPrice
-                                     , strDienTich, strAddress, strTenPhanKhu, strLoaiHinhDat,
-@@ -380,6 +393,63 @@
- 
-     }
- 
-+    private void upImage(int id) {
-+        if (imageUri.size() == 0){
-+            return;
-+        }
-+        Uri uri = imageUri.get(0);
-+        try {
-+            bitmapselect = MediaStore.Images.Media.getBitmap(getContentResolver(),uri);
-+            FirebaseStorage storage = FirebaseStorage.getInstance();
-+            StorageReference storageRef = storage.getReference();
-+            StorageReference mountainsRef = storageRef.child(tenDanhMuc+"/image"+calendar.getTimeInMillis());
-+            ByteArrayOutputStream baos = new ByteArrayOutputStream();
-+            bitmapselect.compress(Bitmap.CompressFormat.JPEG, 100, baos);
-+            byte[] dataImage = baos.toByteArray();
-+
-+            UploadTask uploadTask = mountainsRef.putBytes(dataImage);
-+            uploadTask.addOnFailureListener(new OnFailureListener() {
-+                @Override
-+                public void onFailure(@NonNull Exception exception) {
-+                    // Handle unsuccessful uploads
-+                    progressDialog.dismiss();
-+                    Toast.makeText(dangTinBDSDatActivity.this, "Lỗi cập nhật hình ảnh!", Toast.LENGTH_SHORT).show();
-+                }
-+            }).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {
-+                @Override
-+                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {
-+                    // taskSnapshot.getMetadata() contains file metadata such as size, content-type, etc.
-+
-+                    mountainsRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {
-+                        @Override
-+                        public void onSuccess(Uri uri) {
-+                            String strImage = String.valueOf(uri);
-+                            UpdateImageUrl(strImage, id);
-+                            progressDialog.dismiss();
-+                        }
-+                    }).addOnFailureListener(new OnFailureListener() {
-+                        @Override
-+                        public void onFailure(@NonNull Exception exception) {
-+                            // Handle any errors
-+                            progressDialog.dismiss();
-+                            Toast.makeText(dangTinBDSDatActivity.this, "Lỗi tải URL hình ảnh!", Toast.LENGTH_SHORT).show();
-+                        }
-+                    });
-+                }
-+            });
-+        } catch (IOException e) {
-+            Toast.makeText(mainActivity, "Lỗi try-catch", Toast.LENGTH_SHORT).show();
-+        }
-+
-+    }
-+
-+    private void UpdateImageUrl(String strImage, int id) {
-+            DatabaseReference databaseReference = FirebaseDatabase.getInstance()
-+                    .getReference()
-+                    .child("Tin/BDS/Đất/"+id+"/image");
-+            databaseReference.setValue(strImage);
-+
-+    }
- 
-     private List<BDSNews> getListBds() {
-         listBDS = new ArrayList<>();
-Index: app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1.Fragment;\r\n\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.os.Handler;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.historyNewsAdapter;\r\nimport com.example.duan1.MainActivity;\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.giaiTriNews;\r\nimport com.example.duan1.model.historyNews;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class FragmentQuanLiTin extends Fragment {\r\n    private RecyclerView rcvQuanLyTinDang;\r\n    private historyNewsAdapter historyNewsAdapter;\r\n    private List<historyNews> listHistoryNews;\r\n\r\n    private String nameUser;\r\n    private int idUser;\r\n    private List<String> listChild = new ArrayList<>();\r\n    private List<String> listChild1 = new ArrayList<>();\r\n    private List<String> listChild2 = new ArrayList<>();\r\n\r\n    int id = 0;\r\n\r\n    DatabaseReference myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"GiaiTri\");\r\n    DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"BDS\");\r\n    DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"ThoiTrang\");\r\n    MainActivity mainActivity;\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_quan_li_tin, container, false);\r\n        rcvQuanLyTinDang = view.findViewById(R.id.rcvQuanLyTin);\r\n        mainActivity = (MainActivity) getActivity();\r\n        listHistoryNews = new ArrayList<>();\r\n        idUser = mainActivity.id;\r\n        nameUser = mainActivity.name;\r\n        listChild1();\r\n        listChild2();\r\n        listChild3();\r\n        getListHistoryNews();\r\n        new Handler().postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                historyNewsAdapter = new historyNewsAdapter(getContext(), listHistoryNews);\r\n                rcvQuanLyTinDang.setLayoutManager(new LinearLayoutManager(getContext()));\r\n                rcvQuanLyTinDang.setAdapter(historyNewsAdapter);\r\n            }\r\n        }, 500);\r\n\r\n        return view;\r\n    }\r\n\r\n    public void getListHistoryNews() {\r\n        for (int i = 0; i < listChild.size(); i++) {\r\n            myData.child(listChild.get(i)).addChildEventListener(new ChildEventListener() {\r\n                @Override\r\n                public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                    giaiTriNews giaiTriNews = snapshot.getValue(giaiTriNews.class);\r\n\r\n                    if (giaiTriNews.getIdUser() == idUser) {\r\n\r\n                        listHistoryNews.add(new historyNews(id, giaiTriNews.getTitle(), giaiTriNews.getDescription() , giaiTriNews.getDate(), giaiTriNews.getTenDanhMuc()));\r\n                        id++;\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n        }\r\n        for (int i = 0; i < listChild1.size(); i++) {\r\n            myData2.child(listChild1.get(i)).addChildEventListener(new ChildEventListener() {\r\n                @Override\r\n                public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                    thoiTrangNews thoiTrangNews = snapshot.getValue(com.example.duan1.model.thoiTrangNews.class);\r\n                    if (thoiTrangNews.getIdUser() == idUser) {\r\n\r\n                        listHistoryNews.add(new historyNews(id, thoiTrangNews.getTitlePost(), thoiTrangNews.getDescriptionPost(), thoiTrangNews.getDate(),thoiTrangNews.getTenDanhMuc()));\r\n                        id++;\r\n                    }\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n        }\r\n        for (int i = 0; i < listChild2.size(); i++) {\r\n            myData1.child(listChild2.get(i)).addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    for (DataSnapshot snapshot1: snapshot.getChildren()){\r\n                        BDSNews bdsNews = snapshot1.getValue(BDSNews.class);\r\n                        if (bdsNews.getIdUser() == idUser) {\r\n                            listHistoryNews.add(new historyNews(id, bdsNews.getTitle(), bdsNews.getDescription() , bdsNews.getDate(), bdsNews.getTenDanhMuc(), bdsNews.getImage()));\r\n                            id++;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private List<String> listChild1() {\r\n        listChild.add(new String(\"Nhạc cụ\"));\r\n        listChild.add(new String(\"Sách\"));\r\n        listChild.add(new String(\"Đồ thể thao, Dã ngoại\"));\r\n        listChild.add(new String(\"Đồ sưu tầm  ,Đồ cổ\"));\r\n        listChild.add(new String(\"Thiết bị chơi game\"));\r\n        listChild.add(new String(\"Sở thích khác\"));\r\n\r\n        return listChild;\r\n    }\r\n\r\n    private List<String> listChild2() {\r\n        listChild1.add(new String(\"Quần áo\"));\r\n        listChild1.add(new String(\"Đồng hồ\"));\r\n        listChild1.add(new String(\"Giày dép\"));\r\n        listChild1.add(new String(\"Túi xách\"));\r\n        listChild1.add(new String(\"Nước hoa\"));\r\n        listChild1.add(new String(\"Phụ kiện khác\"));\r\n\r\n        return listChild1;\r\n    }\r\n\r\n    private List<String> listChild3() {\r\n        listChild2.add(new String(\"Chung cư\"));\r\n        listChild2.add(new String(\"Nhà ở\"));\r\n        listChild2.add(new String(\"Đất\"));\r\n        listChild2.add(new String(\"Văn Phòng\"));\r\n        listChild2.add(new String(\"Phòng trọ\"));\r\n\r\n        return listChild2;\r\n    }\r\n\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java b/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java
---- a/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java	(date 1670728671933)
-@@ -1,11 +1,13 @@
- package com.example.duan1.Fragment;
- 
- 
-+import android.content.Context;
- import android.os.Bundle;
- 
- import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
- import androidx.fragment.app.Fragment;
-+import androidx.recyclerview.widget.DividerItemDecoration;
- import androidx.recyclerview.widget.LinearLayoutManager;
- import androidx.recyclerview.widget.RecyclerView;
- 
-@@ -39,6 +41,7 @@
-     private RecyclerView rcvQuanLyTinDang;
-     private historyNewsAdapter historyNewsAdapter;
-     private List<historyNews> listHistoryNews;
-+    private Context mContext;
- 
-     private String nameUser;
-     private int idUser;
-@@ -71,6 +74,8 @@
-                 historyNewsAdapter = new historyNewsAdapter(getContext(), listHistoryNews);
-                 rcvQuanLyTinDang.setLayoutManager(new LinearLayoutManager(getContext()));
-                 rcvQuanLyTinDang.setAdapter(historyNewsAdapter);
-+                RecyclerView.ItemDecoration decoration = new DividerItemDecoration(getContext() , DividerItemDecoration.VERTICAL);
-+                rcvQuanLyTinDang.addItemDecoration(decoration);
-             }
-         }, 500);
- 
-Index: app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1.Adapter;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.dagTinGiaiTriActivity;\r\nimport com.example.duan1.dangTinBDSActivity;\r\nimport com.example.duan1.dangTinBDSDatActivity;\r\nimport com.example.duan1.dangTinBDSPhongTroActivity;\r\nimport com.example.duan1.dangTinThoiTrangActivity;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.giaiTriNews;\r\nimport com.example.duan1.model.historyNews;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class historyNewsAdapter extends RecyclerView.Adapter<historyNewsAdapter.HolderView>  {\r\n    private Context mContext;\r\n    private List<historyNews> listHistory;\r\n    private List<String> listChild = new ArrayList<>();\r\n    private List<String> listChild1 = new ArrayList<>();\r\n    private List<String> listChild2 = new ArrayList<>();\r\n    private String title_News;\r\n    private int id;\r\n\r\n    DatabaseReference myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"GiaiTri\");\r\n    DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"BDS\");\r\n    DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"ThoiTrang\");\r\n\r\n    public historyNewsAdapter(Context mContext, List<historyNews> listHistory) {\r\n        this.mContext = mContext;\r\n        this.listHistory =listHistory;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public HolderView onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_quan_ly_tin_dang, parent, false);\r\n\r\n        return new HolderView(view);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull HolderView holder,final int position) {\r\n        historyNews giaiTriNews =  listHistory.get(position);\r\n        String tenDanhMuc = giaiTriNews.getTenDanhMuc();\r\n        String Title_Post = giaiTriNews.getTitle_historyNews();\r\n\r\n        listChild1();\r\n        listChild2();\r\n        listChild3();\r\n        holder.title_historyNews.setText(giaiTriNews.getTitle_historyNews());\r\n        holder.desc_historyNews.setText(giaiTriNews.getDesc_historyNews());\r\n        holder.time_historyNews.setText(giaiTriNews.getTime_historyNews());\r\n        String strImage = giaiTriNews.getImage();\r\n        Picasso.with(mContext)\r\n                .load(strImage)\r\n                .placeholder(R.drawable.ic_message)\r\n                .error(R.drawable.ic_message)\r\n                .into(holder.imgSP);\r\n        holder.icon_option.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                XoaTin(giaiTriNews.getTitle_historyNews());\r\n//                System.out.println(giaiTriNews.getTitle_historyNews());\r\n            }\r\n        });\r\n        int id = giaiTriNews.getId();\r\n        holder.layout_item.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                if(tenDanhMuc.equals(\"Quần áo\") || tenDanhMuc.equals(\"Đồng hồ\") || tenDanhMuc.equals(\"Giày dép\") ||tenDanhMuc.equals(\"Túi xách\")\r\n                || tenDanhMuc.equals(\"Nước hoa\") ){\r\n                    Intent intent = new Intent(mContext , dangTinThoiTrangActivity.class);\r\n                    intent.putExtra(\"title1\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n\r\n                    mContext.startActivity(intent);\r\n                }else if(tenDanhMuc.equals(\"Phòng trọ\")) {\r\n                    Intent intent = new Intent(mContext , dangTinBDSPhongTroActivity.class);\r\n                    intent.putExtra(\"title1\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    mContext.startActivity(intent);\r\n                }else if(tenDanhMuc.equals(\"Đất\")) {\r\n                    Intent intent = new Intent(mContext , dangTinBDSDatActivity.class);\r\n                    intent.putExtra(\"title\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    intent.putExtra(\"id\", id);\r\n                    mContext.startActivity(intent);\r\n                }else if(tenDanhMuc.equals(\"Văn Phòng\")\r\n                        || tenDanhMuc.equalsIgnoreCase(\"Nhà ở\")\r\n                        || tenDanhMuc.equalsIgnoreCase(\"Chung cư\")){\r\n                    Intent intent = new Intent(mContext , dangTinBDSActivity.class);\r\n                    intent.putExtra(\"title\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    mContext.startActivity(intent);\r\n                }else {\r\n                    Intent intent = new Intent(mContext , dagTinGiaiTriActivity.class);\r\n                    intent.putExtra(\"title\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    mContext.startActivity(intent);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    @Override\r\n    public int getItemCount() {\r\n        if (listHistory != null) {\r\n            return listHistory.size();\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\nprivate void XoaTin(String title){\r\n    for(int i = 0 ; i < listChild.size() ;i++) {\r\n        myData.child(listChild.get(i)).addChildEventListener(new ChildEventListener() {\r\n\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                giaiTriNews giaiTriNew = snapshot.getValue(giaiTriNews.class);\r\n                if(giaiTriNew.getTitle().equals(title)){\r\n                    String id = String.valueOf(giaiTriNew.getId());\r\n                    String tenDanhMuc = String.valueOf(giaiTriNew.getTenDanhMuc());\r\n                        myData.child(tenDanhMuc).child(id).removeValue();\r\n                        notifyDataSetChanged();\r\n                        Toast.makeText(mContext.getApplicationContext(), \"Đã xóa Tin\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    for (int i = 0; i< listChild2.size() ;i++) {\r\n        myData1.child(listChild2.get(i)).addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                BDSNews bdsNews = snapshot.getValue(BDSNews.class);\r\n                if(bdsNews.getTitle().equals(title)){\r\n                    String id = String.valueOf(bdsNews.getId());\r\n                    String tenDanhMuc = String.valueOf(bdsNews.getTenDanhMuc());\r\n                    System.out.println(tenDanhMuc);\r\n                    myData1.child(tenDanhMuc).child(id).removeValue();\r\n                    notifyDataSetChanged();\r\n                    Toast.makeText(mContext.getApplicationContext(), \"Đã xóa Tin\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    for(int i = 0; i < listChild1.size();i++){\r\n        myData2.child(listChild1.get(i)).addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                thoiTrangNews thoiTrangNews = snapshot.getValue(com.example.duan1.model.thoiTrangNews.class);\r\n                if(thoiTrangNews.getTitlePost().equals(title)){\r\n                    String id = String.valueOf(thoiTrangNews.getId());\r\n                    String tenDanhMuc = String.valueOf(thoiTrangNews.getTenDanhMuc());\r\n                    \r\n                    myData2.child(tenDanhMuc).child(id).removeValue();\r\n                    notifyDataSetChanged();\r\n                    Toast.makeText(mContext, \"Xóa Thành công\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n    public class HolderView extends RecyclerView.ViewHolder {\r\n        private TextView title_historyNews, desc_historyNews, time_historyNews;\r\n        private ImageView icon_option, imgSP;\r\n    private RelativeLayout layout_item;\r\n        public HolderView(@NonNull View itemView) {\r\n            super(itemView);\r\n            title_historyNews = itemView.findViewById(R.id.title_historyNews);\r\n            desc_historyNews = itemView.findViewById(R.id.desc_historyNews);\r\n            time_historyNews = itemView.findViewById(R.id.time_historyNews);\r\n            icon_option = itemView.findViewById(R.id.icon_option);\r\n            layout_item = itemView.findViewById(R.id.layout_item);\r\n            imgSP = itemView.findViewById(R.id.imgTinDang);\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    private void suaTin() {\r\n    }\r\n\r\n    private List<String> listChild1() {\r\n        listChild.add(new String(\"Nhạc cụ\"));\r\n        listChild.add(new String(\"Sách\"));\r\n        listChild.add(new String(\"Đồ thể thao, Dã ngoại\"));\r\n        listChild.add(new String(\"Đồ sưu tầm  ,Đồ cổ\"));\r\n        listChild.add(new String(\"Thiết bị chơi game\"));\r\n        listChild.add(new String(\"Sở thích khác\"));\r\n\r\n        return listChild;\r\n    }\r\n\r\n    private List<String> listChild2() {\r\n        listChild1.add(new String(\"Quần áo\"));\r\n        listChild1.add(new String(\"Đồng hồ\"));\r\n        listChild1.add(new String(\"Giày dép\"));\r\n        listChild1.add(new String(\"Túi xách\"));\r\n        listChild1.add(new String(\"Nước hoa\"));\r\n        listChild1.add(new String(\"Phụ kiện khác\"));\r\n\r\n        return listChild1;\r\n    }\r\n\r\n    private List<String> listChild3() {\r\n        listChild2.add(new String(\"Chung cư\"));\r\n        listChild2.add(new String(\"Nhà ở\"));\r\n        listChild2.add(new String(\"Đất\"));\r\n        listChild2.add(new String(\"Văn Phòng\"));\r\n        listChild2.add(new String(\"Phòng trọ\"));\r\n\r\n        return listChild2;\r\n    }\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java b/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java
---- a/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java	(date 1670735230476)
-@@ -51,6 +51,10 @@
-         this.mContext = mContext;
-         this.listHistory =listHistory;
-     }
-+public void setFilter(List<historyNews> listFilter){
-+        this.listHistory = listFilter;
-+        notifyDataSetChanged();
-+}
- 
-     @NonNull
-     @Override
-Index: app/src/main/res/drawable/ic_search_main.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/drawable/ic_search_main.xml b/app/src/main/res/drawable/ic_search_main.xml
-new file mode 100644
---- /dev/null	(date 1670731191787)
-+++ b/app/src/main/res/drawable/ic_search_main.xml	(date 1670731191787)
-@@ -0,0 +1,5 @@
-+<vector android:alpha="0.9" android:height="24dp" android:tint="#020202"
-+    android:viewportHeight="24" android:viewportWidth="24"
-+    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
-+    <path android:fillColor="@android:color/white" android:pathData="M15.5,14h-0.79l-0.28,-0.27C15.41,12.59 16,11.11 16,9.5 16,5.91 13.09,3 9.5,3S3,5.91 3,9.5 5.91,16 9.5,16c1.61,0 3.09,-0.59 4.23,-1.57l0.27,0.28v0.79l5,4.99L20.49,19l-4.99,-5zM9.5,14C7.01,14 5,11.99 5,9.5S7.01,5 9.5,5 14,7.01 14,9.5 11.99,14 9.5,14z"/>
-+</vector>
-Index: app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.duan1;\r\n\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\n\r\nimport android.Manifest;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.photoAdapter;\r\nimport com.example.duan1.model.product_type;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.FirebaseApp;\r\nimport com.google.firebase.appcheck.FirebaseAppCheck;\r\nimport com.google.firebase.appcheck.playintegrity.PlayIntegrityAppCheckProviderFactory;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\n\r\npublic class dangTinThoiTrangActivity extends AppCompatActivity implements photoAdapter.CountOfImageWhenRemove {\r\n    private TextView tvTenDanhMuc;\r\n    private ImageView imgBackPage, addImageProduct;\r\n    private Spinner spn_product_type;\r\n    private EditText edtTitlePost, edtDescription, edtPrice, edtAddress;\r\n    private Button btnDangTin ,btnSuaTin ;\r\n    private com.example.duan1.Adapter.photoAdapter photoAdapter;\r\n    private RecyclerView rcvView_select_img_fashion;\r\n    StorageReference imageFolder;\r\n\r\n    private String strTitlePost, strDescription, strPrice, strLoaiSanPham, strAddress, nameUser\r\n            , tenDanhMuc , title_Post , date , title_Post1;\r\n    private int idUser;\r\n    private double dbPrice;\r\n    private List<thoiTrangNews> listFashion;\r\n    thoiTrangNews newsFashion;\r\n    FirebaseApp firebaseApp;\r\n    FirebaseAppCheck firebaseAppCheck;\r\n\r\n    private int REQUEST_PERMISSION_CODE = 35;\r\n    private int PICK_IMAGE = 1;\r\n    private int update_count = 0, maxID;\r\n    private ArrayList<Uri> imageUri = new ArrayList<>();\r\n    private ProgressDialog progressDialog;\r\n    DatabaseReference myData;\r\n    MainActivity mainActivity;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_dang_tin_thoi_trang);\r\n        imageFolder = FirebaseStorage.getInstance().getReference().child(\"Image\").child(\"images\" + System.currentTimeMillis() +\"jpg\");\r\n        myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"ThoiTrang\");\r\n\r\n        nameUser = mainActivity.name;\r\n        idUser = mainActivity.id;\r\n\r\n\r\n\r\n        initUi();\r\n        clickBAckPage();\r\n        eventClickSPN();\r\n        clickAddImageFashion();\r\n        getListFashion();\r\n        clickDangTin();\r\n        getCurrentDate();\r\n        if(title_Post1 == null || title_Post1.equals(\"\")){\r\n            btnDangTin.setVisibility(View.VISIBLE);\r\n            btnSuaTin.setVisibility(View.INVISIBLE);\r\n        }else {\r\n            btnSuaTin.setVisibility(View.VISIBLE);\r\n            btnDangTin.setVisibility(View.INVISIBLE);\r\n            setTextInput();\r\n            suaTin();\r\n        }\r\n\r\n    }\r\n\r\n    private void suaTin() {\r\n        btnSuaTin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                firebaseApp.initializeApp(dangTinThoiTrangActivity.this);\r\n                firebaseAppCheck = FirebaseAppCheck.getInstance();\r\n                firebaseAppCheck.installAppCheckProviderFactory(PlayIntegrityAppCheckProviderFactory.getInstance());\r\n\r\n                progressDialog = new ProgressDialog(dangTinThoiTrangActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strPrice = edtPrice.getText().toString();\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n                } catch (Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n\r\n                strLoaiSanPham = spn_product_type.getSelectedItem().toString();\r\n                strAddress = edtAddress.getText().toString();\r\n\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dangTinThoiTrangActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n                    for (update_count = 0; update_count < imageUri.size(); update_count++) {\r\n                        Uri indexImage = imageUri.get(update_count);\r\n                        StorageReference imageName = imageFolder.child(\"Image \" + indexImage.getLastPathSegment());\r\n                        imageName.child(strTitlePost).putFile(indexImage).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                            @Override\r\n                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                                imageName.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                    @Override\r\n                                    public void onSuccess(Uri uri) {\r\n                                        String Url = String.valueOf(uri);\r\n                                        StoreLick(Url);\r\n\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n                maxID = newsFashion.getId();\r\n                String strId = String.valueOf(maxID);\r\n                myData.child(tenDanhMuc).child(strId ).setValue(new thoiTrangNews(maxID ,\r\n                        strTitlePost,\r\n                        strDescription,\r\n                        strLoaiSanPham,\r\n                        dbPrice,\r\n                        strAddress ,\r\n                        idUser,\r\n                        nameUser,tenDanhMuc,date)) .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                    @Override\r\n                    public void onSuccess(Void unused) {\r\n                        Toast.makeText(dangTinThoiTrangActivity.this, \"Sửa tin thành công\", Toast.LENGTH_SHORT).show();\r\n                        progressDialog.dismiss();\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setTextInput() {\r\n        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n        DatabaseReference databaseReference1 = firebaseDatabase.getReference(\"Tin\").child(\"ThoiTrang\");\r\n        databaseReference1.child(tenDanhMuc).addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                thoiTrangNews thoiTrangNews = snapshot.getValue(com.example.duan1.model.thoiTrangNews.class);\r\n                listFashion.add(thoiTrangNews);\r\n                if(thoiTrangNews.getTitlePost().equals(title_Post1)) {\r\n                    edtTitlePost.setText(thoiTrangNews.getTitlePost());\r\n                    edtAddress.setText(thoiTrangNews.getAddress());\r\n                    edtDescription.setText(thoiTrangNews.getDescriptionPost());\r\n                    String price = String.valueOf(thoiTrangNews.getPrice());\r\n                    edtPrice.setText(price);\r\n                    newsFashion = thoiTrangNews;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void getCurrentDate() {\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n        Calendar c = Calendar.getInstance();\r\n         date = sdf.format(c.getTime());\r\n        System.out.println(\"Date : \" + date);\r\n    }\r\n\r\n\r\n    private void clickDangTin() {\r\n\r\n        btnDangTin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                firebaseApp.initializeApp(dangTinThoiTrangActivity.this);\r\n                firebaseAppCheck = FirebaseAppCheck.getInstance();\r\n                firebaseAppCheck.installAppCheckProviderFactory(PlayIntegrityAppCheckProviderFactory.getInstance());\r\n\r\n                progressDialog = new ProgressDialog(dangTinThoiTrangActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strPrice = edtPrice.getText().toString();\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n                } catch (Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n\r\n                strLoaiSanPham = spn_product_type.getSelectedItem().toString();\r\n                strAddress = edtAddress.getText().toString();\r\n\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dangTinThoiTrangActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n                for (update_count = 0; update_count < imageUri.size(); update_count++) {\r\n                    Uri indexImage = imageUri.get(update_count);\r\n                    StorageReference imageName = imageFolder.child(\"Image \" + indexImage.getLastPathSegment());\r\n                    imageName.child(strTitlePost).putFile(indexImage).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                        @Override\r\n                        public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                            imageName.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                @Override\r\n                                public void onSuccess(Uri uri) {\r\n                                    String Url = String.valueOf(uri);\r\n                                    StoreLick(Url);\r\n\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n                    }\r\n                    maxID = newsFashion.getId() + 1;\r\n                    String strId = String.valueOf(maxID);\r\n                    myData.child(tenDanhMuc).child(strId ).setValue(new thoiTrangNews(maxID ,\r\n                                    strTitlePost,\r\n                                    strDescription,\r\n                                    strLoaiSanPham,\r\n                                    dbPrice,\r\n                                    strAddress ,\r\n                                    idUser,\r\n                                    nameUser,tenDanhMuc, date)) .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dangTinThoiTrangActivity.this, \"Đăng tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void StoreLick(String url) {\r\n        DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference().child(\"List Image\");\r\n        HashMap<String, String> hashMap = new HashMap<>();\r\n        hashMap.put(\"Imglink\", url);\r\n        databaseReference.push().setValue(hashMap);\r\n    }\r\n\r\n    private List<thoiTrangNews> getListFashion() {\r\n         listFashion = new ArrayList<>();\r\n        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n        DatabaseReference databaseReference = firebaseDatabase.getReference(\"Tin\").child(\"ThoiTrang\");\r\n\r\n        databaseReference.child(tenDanhMuc).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                listFashion.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren() ){\r\n                    thoiTrangNews thoiTrangNews = snapshot1.getValue(thoiTrangNews.class);\r\n                    listFashion.add(thoiTrangNews);\r\n                    newsFashion = thoiTrangNews;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Toast.makeText(dangTinThoiTrangActivity.this, \"Load data Error\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return listFashion;\r\n\r\n    }\r\n\r\n\r\n//      @Override\r\n//      public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n//       Task<Uri> urlTask = taskSnapshot.getStorage().getDownloadUrl();\r\n//      while (!urlTask.isSuccessful());\r\n//      Uri downloadUrl = urlTask.getResult();\r\n//       FriendlyMessage friendlyMessage = new FriendlyMessage(null, mUsername, downloadUrl.toString());\r\n//      mDatabaseReference.push().setValue(friendlyMessage); }\r\n\r\n    private void clickAddImageFashion() {\r\n        photoAdapter = new photoAdapter(imageUri, this, this);\r\n        rcvView_select_img_fashion.setLayoutManager(new GridLayoutManager(dangTinThoiTrangActivity.this, 6));\r\n        rcvView_select_img_fashion.setAdapter(photoAdapter);\r\n\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n                    REQUEST_PERMISSION_CODE);\r\n            return;\r\n        }\r\n\r\n        addImageProduct.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                intent.setType(\"image/*\");\r\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR2) {\r\n                    intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n                }\r\n                startActivityForResult(Intent.createChooser(intent, \"select Picture\"), PICK_IMAGE);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == PICK_IMAGE && resultCode == RESULT_OK && data != null) {\r\n            if (data.getClipData() != null) {\r\n                int count = data.getClipData().getItemCount();\r\n\r\n                for (int i = 0; i < count; i++) {\r\n                    if (imageUri.size() < 9) {\r\n                        Uri imgUri = (data.getClipData().getItemAt(i).getUri());\r\n                        imageUri.add(imgUri);\r\n                    } else {\r\n                        Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                photoAdapter.notifyDataSetChanged();\r\n            } else {\r\n                if (imageUri.size() < 9) {\r\n                    Uri imgUri = data.getData();\r\n                    imageUri.add(imgUri);\r\n                } else {\r\n                    Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n\r\n            }\r\n            photoAdapter.notifyDataSetChanged();\r\n        } else {\r\n            Toast.makeText(this, \"you haven't pick any Image\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void eventClickSPN() {\r\n        product_type[] product_type = dangTinThoiTrangActivity.productType.getProductType();\r\n        ArrayAdapter<product_type> adapter = new ArrayAdapter<product_type>(this, android.R.layout.simple_spinner_item, product_type);\r\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spn_product_type.setAdapter(adapter);\r\n\r\n        spn_product_type.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                Toast.makeText(dangTinThoiTrangActivity.this, \"Loại sản phẩm \" + i, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickBAckPage() {\r\n        imgBackPage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void initUi() {\r\n        tvTenDanhMuc = findViewById(R.id.tvTenDanhMucTT);\r\n        Intent intent = getIntent();\r\n        title_Post1 = intent.getStringExtra(\"title1\");\r\n        tvTenDanhMuc.setText(\"Danh Mục - \" + intent.getStringExtra(\"tenDanhMuc\"));\r\n        imgBackPage = findViewById(R.id.icon_backTT);\r\n        spn_product_type = findViewById(R.id.spn_product_type);\r\n        edtTitlePost = findViewById(R.id.title_postTT);\r\n        edtDescription = findViewById(R.id.description_postTT);\r\n        edtPrice = findViewById(R.id.priceTT);\r\n        edtAddress = findViewById(R.id.addressTT);\r\n        btnDangTin = findViewById(R.id.btnDangTinTT);\r\n        rcvView_select_img_fashion = findViewById(R.id.rcvView_select_img_fashion);\r\n        addImageProduct = findViewById(R.id.addImageProductTT);\r\n        btnSuaTin = findViewById(R.id.btnSuaTin);\r\n\r\n        imageUri = new ArrayList<>();\r\n        Intent intent1 = getIntent();\r\n        tenDanhMuc = intent1.getStringExtra(\"tenDanhMuc\");\r\n        title_Post = intent1.getStringExtra(\"title\");\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void clicked(int getSize) {\r\n\r\n    }\r\n\r\n    public static class productType {\r\n        public static product_type[] getProductType() {\r\n            product_type prd1 = new product_type(\"Nam\");\r\n            product_type prd2 = new product_type(\"Nữ\");\r\n            product_type prd3 = new product_type(\"Cả hai\");\r\n            return new product_type[]{prd1, prd2, prd3};\r\n\r\n\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java b/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java
---- a/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java	(revision 8b530af99d85d04b50d11e1e6b9cac2474dd3bc2)
-+++ b/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java	(date 1670765782311)
-@@ -273,7 +273,12 @@
-                     });
-                 }
-                     }
-+                if(newsFashion == null) {
-+                    maxID = 0;
-+                }else {
-                     maxID = newsFashion.getId() + 1;
-+
-+                }
-                     String strId = String.valueOf(maxID);
-                     myData.child(tenDanhMuc).child(strId ).setValue(new thoiTrangNews(maxID ,
-                                     strTitlePost,
-Index: app/src/main/res/menu/item_search_menu.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/menu/item_search_menu.xml b/app/src/main/res/menu/item_search_menu.xml
-new file mode 100644
---- /dev/null	(date 1670732316421)
-+++ b/app/src/main/res/menu/item_search_menu.xml	(date 1670732316421)
-@@ -0,0 +1,10 @@
-+<?xml version="1.0" encoding="utf-8"?>
-+<menu xmlns:android="http://schemas.android.com/apk/res/android"
-+    xmlns:app="http://schemas.android.com/apk/res-auto">
-+    <item
-+        android:id="@+id/search_main"
-+        android:title="Tìm kiếm"
-+        android:icon="@drawable/ic_search_main"
-+        app:showAsAction="always"
-+        app:actionViewClass="androidx.appcompat.widget.SearchView"/>
-+</menu>
-\ No newline at end of file
-Index: app/src/main/res/drawable/ic_search.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/drawable/ic_search.xml b/app/src/main/res/drawable/ic_search.xml
-new file mode 100644
---- /dev/null	(date 1670729814247)
-+++ b/app/src/main/res/drawable/ic_search.xml	(date 1670729814247)
-@@ -0,0 +1,5 @@
-+<vector android:alpha="0.9" android:height="24dp" android:tint="#322F2F"
-+    android:viewportHeight="24" android:viewportWidth="24"
-+    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
-+    <path android:fillColor="@android:color/white" android:pathData="M15.5,14h-0.79l-0.28,-0.27C15.41,12.59 16,11.11 16,9.5 16,5.91 13.09,3 9.5,3S3,5.91 3,9.5 5.91,16 9.5,16c1.61,0 3.09,-0.59 4.23,-1.57l0.27,0.28v0.79l5,4.99L20.49,19l-4.99,-5zM9.5,14C7.01,14 5,11.99 5,9.5S7.01,5 9.5,5 14,7.01 14,9.5 11.99,14 9.5,14z"/>
-+</vector>
Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_3_02_CH__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_3_02_CH__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_3_02_CH__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_3_02_CH__Changes_.xml	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_12_12_2022_3_02_CH_[Changes]" date="1670832154113" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_12_2022_3_02_CH_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/12/2022 3:02 CH [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_10_12_2022_10_16_SA_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_10_12_2022_10_16_SA_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_10_12_2022_10_16_SA_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_10_12_2022_10_16_SA_[Changes]/shelved.patch	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ /dev/null	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
@@ -1,968 +0,0 @@
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]/shelved.patch	(revision a7ff6eabccd93f3e582ffe980b17ec3dbd7a8ec9)
-+++ /dev/null	(revision a7ff6eabccd93f3e582ffe980b17ec3dbd7a8ec9)
-@@ -1,949 +0,0 @@
--Index: app/src/main/java/com/example/duan1/model/thoiTrangNews.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1.model;\r\n\r\nimport android.net.Uri;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class thoiTrangNews {\r\n    private int id;\r\n    private String titlePost;\r\n    private String descriptionPost;\r\n    private String typeproduct;\r\n\r\n    private double price;\r\n    private String address;\r\n\r\n    public thoiTrangNews() {\r\n    }\r\n\r\n    public thoiTrangNews(int id, String titlePost, String descriptionPost, String typeproduct, double price, String address) {\r\n        this.id = id;\r\n        this.titlePost = titlePost;\r\n        this.descriptionPost = descriptionPost;\r\n        this.typeproduct = typeproduct;\r\n        this.price = price;\r\n        this.address = address;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTitlePost() {\r\n        return titlePost;\r\n    }\r\n\r\n    public void setTitlePost(String titlePost) {\r\n        this.titlePost = titlePost;\r\n    }\r\n\r\n    public String getDescriptionPost() {\r\n        return descriptionPost;\r\n    }\r\n\r\n    public void setDescriptionPost(String descriptionPost) {\r\n        this.descriptionPost = descriptionPost;\r\n    }\r\n\r\n    public String getTypeproduct() {\r\n        return typeproduct;\r\n    }\r\n\r\n    public void setTypeproduct(String typeproduct) {\r\n        this.typeproduct = typeproduct;\r\n    }\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(double price) {\r\n        this.price = price;\r\n    }\r\n\r\n    public String getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public void setAddress(String address) {\r\n        this.address = address;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/model/thoiTrangNews.java b/app/src/main/java/com/example/duan1/model/thoiTrangNews.java
----- a/app/src/main/java/com/example/duan1/model/thoiTrangNews.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/model/thoiTrangNews.java	(date 1670002689168)
--@@ -10,20 +10,40 @@
--     private String titlePost;
--     private String descriptionPost;
--     private String typeproduct;
---
--     private double price;
--     private String address;
--+    private int idUser;
--+    private String nameUser;
-- 
--     public thoiTrangNews() {
--     }
-- 
---    public thoiTrangNews(int id, String titlePost, String descriptionPost, String typeproduct, double price, String address) {
--+    public thoiTrangNews(int id, String titlePost, String descriptionPost, String typeproduct
--+            , double price, String address, int idUser, String nameUser) {
--         this.id = id;
--         this.titlePost = titlePost;
--         this.descriptionPost = descriptionPost;
--         this.typeproduct = typeproduct;
--         this.price = price;
--         this.address = address;
--+        this.idUser = idUser;
--+        this.nameUser = nameUser;
--+    }
--+
--+    public int getIdUser() {
--+        return idUser;
--+    }
--+
--+    public void setIdUser(int idUser) {
--+        this.idUser = idUser;
--+    }
--+
--+    public String getNameUser() {
--+        return nameUser;
--+    }
--+
--+    public void setNameUser(String nameUser) {
--+        this.nameUser = nameUser;
--     }
-- 
--     public int getId() {
--Index: app/src/main/java/com/example/duan1/chonDanhMucThoiTrangAcrivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\n\r\nimport com.example.duan1.Adapter.dmucBatDongSanAdapter;\r\nimport com.example.duan1.Adapter.dmucThoiTrangAdapter;\r\nimport com.example.duan1.model.danhMucBatDongSan;\r\nimport com.example.duan1.model.thoiTrang;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class chonDanhMucThoiTrangAcrivity extends AppCompatActivity {\r\n    ImageView backPage;\r\n    RecyclerView rcvChonDanhMuc;\r\n    List<thoiTrang> listTT;\r\n    dmucThoiTrangAdapter dmucThoiTrangAdapter;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_chon_danh_muc_thoi_trang_acrivity);\r\n        initUi();\r\n        clickBackPage();\r\n\r\n        listTT = new ArrayList<>();\r\n        dmucThoiTrangAdapter = new dmucThoiTrangAdapter(getApplicationContext() , getList());\r\n\r\n        rcvChonDanhMuc.setAdapter(dmucThoiTrangAdapter);\r\n        rcvChonDanhMuc.setLayoutManager(new LinearLayoutManager(this));\r\n    }\r\n\r\n    private List<thoiTrang> getList() {\r\n        listTT.add(new thoiTrang(\"Quần áo\"));\r\n        listTT.add(new thoiTrang(\"Đồng hồ\"));\r\n        listTT.add(new thoiTrang(\"Giày dép\"));\r\n        listTT.add(new thoiTrang(\"Túi xách\"));\r\n        listTT.add(new thoiTrang(\"Nước hoa\"));\r\n        listTT.add(new thoiTrang(\"Phụ kiện khác\"));\r\n        return listTT;\r\n    }\r\n\r\n    private void clickBackPage() {\r\n        backPage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void initUi() {\r\n        backPage = findViewById(R.id.icon_back);\r\n        rcvChonDanhMuc = findViewById(R.id.rcvChonDanhMucThoiTrang);\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/chonDanhMucThoiTrangAcrivity.java b/app/src/main/java/com/example/duan1/chonDanhMucThoiTrangAcrivity.java
----- a/app/src/main/java/com/example/duan1/chonDanhMucThoiTrangAcrivity.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/chonDanhMucThoiTrangAcrivity.java	(date 1670001863314)
--@@ -4,13 +4,13 @@
-- import androidx.recyclerview.widget.LinearLayoutManager;
-- import androidx.recyclerview.widget.RecyclerView;
-- 
--+import android.content.Intent;
-- import android.os.Bundle;
-- import android.view.View;
-- import android.widget.ImageView;
--+import android.widget.Toast;
-- 
---import com.example.duan1.Adapter.dmucBatDongSanAdapter;
-- import com.example.duan1.Adapter.dmucThoiTrangAdapter;
---import com.example.duan1.model.danhMucBatDongSan;
-- import com.example.duan1.model.thoiTrang;
-- 
-- import java.util.ArrayList;
--@@ -21,13 +21,16 @@
--     RecyclerView rcvChonDanhMuc;
--     List<thoiTrang> listTT;
--     dmucThoiTrangAdapter dmucThoiTrangAdapter;
--+    public static int IdUser = 0;
--+    public static String nameUser = "";
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--         super.onCreate(savedInstanceState);
--         setContentView(R.layout.activity_chon_danh_muc_thoi_trang_acrivity);
--         initUi();
--         clickBackPage();
---
--+        getNameUser();
--+        getIdUser();
--         listTT = new ArrayList<>();
--         dmucThoiTrangAdapter = new dmucThoiTrangAdapter(getApplicationContext() , getList());
-- 
--@@ -35,6 +38,8 @@
--         rcvChonDanhMuc.setLayoutManager(new LinearLayoutManager(this));
--     }
-- 
--+
--+
--     private List<thoiTrang> getList() {
--         listTT.add(new thoiTrang("Quần áo"));
--         listTT.add(new thoiTrang("Đồng hồ"));
--@@ -58,4 +63,16 @@
--         backPage = findViewById(R.id.icon_back);
--         rcvChonDanhMuc = findViewById(R.id.rcvChonDanhMucThoiTrang);
--     }
--+    public int getIdUser() {
--+        Intent intent = getIntent();
--+        Bundle bundle = intent.getExtras();
--+        int id = bundle.getInt("Id");
--+        return IdUser = id;
--+    }
--+    public String getNameUser() {
--+        Intent intent = getIntent();
--+        Bundle bundle = intent.getExtras();
--+        String name = bundle.getString("Name");
--+        return nameUser =  name;
--+    }
-- }
--\ No newline at end of file
--Index: app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1;\r\n\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\n\r\nimport android.Manifest;\r\nimport android.app.AlertDialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.photoAdapter;\r\nimport com.example.duan1.model.Users;\r\nimport com.example.duan1.model.product_type;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\n\r\npublic class dangTinThoiTrangActivity extends AppCompatActivity implements photoAdapter.CountOfImageWhenRemove {\r\n    private TextView tvTenDanhMuc;\r\n    private ImageView imgBackPage, addImageProduct;\r\n    private Spinner spn_product_type;\r\n    private EditText edtTitlePost, edtDescription, edtPrice, edtAddress;\r\n    private Button btnDangTin;\r\n    private com.example.duan1.Adapter.photoAdapter photoAdapter;\r\n    private RecyclerView rcvView_select_img_fashion;\r\n    StorageReference imageFolder;\r\n    private String strTitlePost, strDescription, strPrice, strLoaiSanPham, strAddress;\r\n    private double dbPrice;\r\n\r\n\r\n    private int REQUEST_PERMISSION_CODE = 35;\r\n    private int PICK_IMAGE = 1;\r\n    private int update_count = 0 , maxID = 0;\r\n    private ArrayList<Uri> imageUri;\r\n    private ProgressDialog progressDialog;\r\n    DatabaseReference myData;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_dang_tin_thoi_trang);\r\n        imageFolder = FirebaseStorage.getInstance().getReference().child(\"Image.jpg\");\r\n        myData = FirebaseDatabase.getInstance().getReference(\"Tin\");\r\n        initUi();\r\n        clickBAckPage();\r\n        eventClickSPN();\r\n        clickAddImageFashion();\r\n        clickDangTin();\r\n\r\n    }\r\n\r\n    public void getId() {\r\n        myData.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if(snapshot.exists()){\r\n                    maxID = (int) snapshot.getChildrenCount();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickDangTin() {\r\n        Intent intent = getIntent();\r\n        String tenDanhMuc = intent.getStringExtra(\"tenDanhMuc\");\r\n\r\n\r\n        btnDangTin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog = new ProgressDialog(dangTinThoiTrangActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n                getId();\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strPrice = edtPrice.getText().toString();\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n                } catch(Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n\r\n                strLoaiSanPham = spn_product_type.getSelectedItem().toString();\r\n                strAddress = edtAddress.getText().toString();\r\n\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dangTinThoiTrangActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n                    for (update_count = 0; update_count < imageUri.size(); update_count++) {\r\n                        Uri indexImage = imageUri.get(update_count);\r\n                        StorageReference imageName = imageFolder.child(\"Image \" + indexImage.getLastPathSegment());\r\n                        imageName.child(strTitlePost).putFile(indexImage).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                            @Override\r\n                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                                imageName.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                    @Override\r\n                                    public void onSuccess(Uri uri) {\r\n                                        String Url = String.valueOf(uri);\r\n                                        StoreLick(Url);\r\n\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                    String strId = String.valueOf(maxID);\r\n                    myData.child(tenDanhMuc).child(strId).setValue(new thoiTrangNews(maxID,\r\n                                    strTitlePost,\r\n                                    strDescription,\r\n                                    strLoaiSanPham,\r\n                                    dbPrice,\r\n                                    strAddress))\r\n                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dangTinThoiTrangActivity.this, \"Đăng tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void StoreLick(String url) {\r\n        DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference().child(\"List Image\");\r\n        HashMap<String, String> hashMap = new HashMap<>();\r\n        hashMap.put(\"Imglink\", url);\r\n        databaseReference.push().setValue(hashMap);\r\n\r\n    }\r\n//    private List<thoiTrangNews> getListFashion() {\r\n//        List<thoiTrangNews> listFashion = new ArrayList<>();\r\n//        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n//        DatabaseReference databaseReference = firebaseDatabase.getReference(\"ThoiTrangNews\");\r\n//        databaseReference.addValueEventListener(new ValueEventListener() {\r\n//            @Override\r\n//            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n//                listFashion.clear();\r\n//                for (DataSnapshot snapshot1 : snapshot.getChildren() ){\r\n//                    thoiTrangNews thoiTrangNews = snapshot1.getValue(thoiTrangNews.class);\r\n//                    listFashion.add(thoiTrangNews);\r\n//                }\r\n//            }\r\n//\r\n//            @Override\r\n//            public void onCancelled(@NonNull DatabaseError error) {\r\n//                Toast.makeText(dangTinThoiTrangActivity.this, \"Load data Error\", Toast.LENGTH_SHORT).show();\r\n//            }\r\n//        });\r\n//\r\n//        return listFashion;\r\n//\r\n//    }\r\n\r\n    /*\r\n     * @Override\r\n     * public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n     *  Task<Uri> urlTask = taskSnapshot.getStorage().getDownloadUrl();\r\n     * while (!urlTask.isSuccessful());\r\n     * Uri downloadUrl = urlTask.getResult();\r\n     *  FriendlyMessage friendlyMessage = new FriendlyMessage(null, mUsername, downloadUrl.toString());\r\n     *  mDatabaseReference.push().setValue(friendlyMessage); }\r\n     * */\r\n    private void clickAddImageFashion() {\r\n        photoAdapter = new photoAdapter(imageUri, this, this);\r\n        rcvView_select_img_fashion.setLayoutManager(new GridLayoutManager(dangTinThoiTrangActivity.this, 6));\r\n        rcvView_select_img_fashion.setAdapter(photoAdapter);\r\n\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n                    REQUEST_PERMISSION_CODE);\r\n            return;\r\n        }\r\n\r\n        addImageProduct.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                intent.setType(\"image/*\");\r\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR2) {\r\n                    intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n                }\r\n                startActivityForResult(Intent.createChooser(intent, \"select Picture\"), PICK_IMAGE);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == PICK_IMAGE && resultCode == RESULT_OK && data != null) {\r\n            if (data.getClipData() != null) {\r\n                int count = data.getClipData().getItemCount();\r\n\r\n                for (int i = 0; i < count; i++) {\r\n                    if (imageUri.size() < 9) {\r\n                        Uri imgUri = (data.getClipData().getItemAt(i).getUri());\r\n                        imageUri.add(imgUri);\r\n                    } else {\r\n                        Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                photoAdapter.notifyDataSetChanged();\r\n            } else {\r\n                if (imageUri.size() < 9) {\r\n                    Uri imgUri = data.getData();\r\n                    imageUri.add(imgUri);\r\n                } else {\r\n                    Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n\r\n            }\r\n            photoAdapter.notifyDataSetChanged();\r\n        } else {\r\n            Toast.makeText(this, \"you haven't pick any Image\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void eventClickSPN() {\r\n        product_type[] product_type = dangTinThoiTrangActivity.productType.getProductType();\r\n        ArrayAdapter<product_type> adapter = new ArrayAdapter<product_type>(this, android.R.layout.simple_spinner_item, product_type);\r\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spn_product_type.setAdapter(adapter);\r\n\r\n        spn_product_type.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                Toast.makeText(dangTinThoiTrangActivity.this, \"Loại sản phẩm \" + i, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickBAckPage() {\r\n        imgBackPage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void initUi() {\r\n        tvTenDanhMuc = findViewById(R.id.tvTenDanhMucTT);\r\n        Intent intent = getIntent();\r\n        tvTenDanhMuc.setText(\"Danh Mục - \" + intent.getStringExtra(\"tenDanhMuc\"));\r\n        imgBackPage = findViewById(R.id.icon_backTT);\r\n        spn_product_type = findViewById(R.id.spn_product_type);\r\n        edtTitlePost = findViewById(R.id.title_postTT);\r\n        edtDescription = findViewById(R.id.description_postTT);\r\n        edtPrice = findViewById(R.id.priceTT);\r\n        edtAddress = findViewById(R.id.addressTT);\r\n        btnDangTin = findViewById(R.id.btnDangTinTT);\r\n        rcvView_select_img_fashion = findViewById(R.id.rcvView_select_img_fashion);\r\n        addImageProduct = findViewById(R.id.addImageProductTT);\r\n\r\n\r\n        imageUri = new ArrayList<>();\r\n    }\r\n\r\n    @Override\r\n    public void clicked(int getSize) {\r\n\r\n    }\r\n\r\n    public static class productType {\r\n        public static product_type[] getProductType() {\r\n            product_type prd1 = new product_type(\"Nam\");\r\n            product_type prd2 = new product_type(\"Nữ\");\r\n            product_type prd3 = new product_type(\"Cả hai\");\r\n            return new product_type[]{prd1, prd2, prd3};\r\n\r\n\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java b/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java
----- a/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java	(date 1670004570259)
--@@ -11,14 +11,12 @@
-- 
-- 
-- import android.Manifest;
---import android.app.AlertDialog;
-- import android.app.ProgressDialog;
-- import android.content.Intent;
-- import android.content.pm.PackageManager;
-- import android.net.Uri;
-- import android.os.Build;
-- import android.os.Bundle;
---import android.util.Log;
-- import android.view.View;
-- import android.widget.AdapterView;
-- import android.widget.ArrayAdapter;
--@@ -30,7 +28,6 @@
-- import android.widget.Toast;
-- 
-- import com.example.duan1.Adapter.photoAdapter;
---import com.example.duan1.model.Users;
-- import com.example.duan1.model.product_type;
-- import com.example.duan1.model.thoiTrangNews;
-- import com.google.android.gms.tasks.OnSuccessListener;
--@@ -45,7 +42,6 @@
-- 
-- import java.util.ArrayList;
-- import java.util.HashMap;
---import java.util.List;
-- 
-- 
-- public class dangTinThoiTrangActivity extends AppCompatActivity implements photoAdapter.CountOfImageWhenRemove {
--@@ -57,13 +53,15 @@
--     private com.example.duan1.Adapter.photoAdapter photoAdapter;
--     private RecyclerView rcvView_select_img_fashion;
--     StorageReference imageFolder;
---    private String strTitlePost, strDescription, strPrice, strLoaiSanPham, strAddress;
--+    private String strTitlePost, strDescription, strPrice, strLoaiSanPham, strAddress, nameUser;
--+    private int idUser;
--     private double dbPrice;
--+    chonDanhMucThoiTrangAcrivity chonDanhMucThoiTrangAcrivity;
-- 
-- 
--     private int REQUEST_PERMISSION_CODE = 35;
--     private int PICK_IMAGE = 1;
---    private int update_count = 0 , maxID = 0;
--+    private int update_count = 0, maxID;
--     private ArrayList<Uri> imageUri;
--     private ProgressDialog progressDialog;
--     DatabaseReference myData;
--@@ -73,16 +71,23 @@
--         super.onCreate(savedInstanceState);
--         setContentView(R.layout.activity_dang_tin_thoi_trang);
--         imageFolder = FirebaseStorage.getInstance().getReference().child("Image.jpg");
---        myData = FirebaseDatabase.getInstance().getReference("Tin");
--+        myData = FirebaseDatabase.getInstance().getReference("Tin").child("ThoiTrang");
--+
--+        nameUser = chonDanhMucThoiTrangAcrivity.nameUser;
--+        idUser = chonDanhMucThoiTrangAcrivity.IdUser;
--+
--+
--         initUi();
--         clickBAckPage();
--         eventClickSPN();
--         clickAddImageFashion();
--+
--         clickDangTin();
-- 
--     }
-- 
---    public void getId() {
--+
--+    public void getIdIncrement() {
--         myData.addValueEventListener(new ValueEventListener() {
--             @Override
--             public void onDataChange(@NonNull DataSnapshot snapshot) {
--@@ -106,15 +111,17 @@
--         btnDangTin.setOnClickListener(new View.OnClickListener() {
--             @Override
--             public void onClick(View view) {
--+
--+
--                 progressDialog = new ProgressDialog(dangTinThoiTrangActivity.this);
--                 progressDialog.setMessage("Please wait for save");
---                getId();
--+                getIdIncrement();
--                 strTitlePost = edtTitlePost.getText().toString().trim();
--                 strDescription = edtDescription.getText().toString();
--                 strPrice = edtPrice.getText().toString();
--                 try {
--                     dbPrice = Double.parseDouble(strPrice);
---                } catch(Exception e) {
--+                } catch (Exception e) {
--                     System.err.println("Lỗi Parse kiểu dữ liệu");
--                 }
-- 
--@@ -145,12 +152,15 @@
--                         });
--                     }
--                     String strId = String.valueOf(maxID);
---                    myData.child(tenDanhMuc).child(strId).setValue(new thoiTrangNews(maxID,
--+                    Toast.makeText(dangTinThoiTrangActivity.this, "Max ID : " + maxID , Toast.LENGTH_SHORT).show();
--+                    myData.child(tenDanhMuc).child(strId ).setValue(new thoiTrangNews(maxID ,
--                                     strTitlePost,
--                                     strDescription,
--                                     strLoaiSanPham,
--                                     dbPrice,
---                                    strAddress))
--+                                    strAddress ,
--+                                    idUser,
--+                                    nameUser))
--                             .addOnSuccessListener(new OnSuccessListener<Void>() {
--                                 @Override
--                                 public void onSuccess(Void unused) {
--@@ -158,7 +168,6 @@
--                                     progressDialog.dismiss();
--                                 }
--                             });
---
--                 }
--             }
--         });
--Index: app/src/main/java/com/example/duan1/MainActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.fragment.app.FragmentManager;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.app.AlertDialog;\r\nimport android.app.Dialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.os.Bundle;\r\nimport android.view.Gravity;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Fragment.FragmentDaoCho;\r\nimport com.example.duan1.Fragment.FragmentQuanLiTin;\r\nimport com.example.duan1.Fragment.FragmentThem;\r\nimport com.example.duan1.Fragment.FragmentTrangChu;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.android.material.navigation.NavigationBarView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    BottomNavigationView bottomNavigationView;\r\n    FloatingActionButton floatingActionButton;\r\n\r\n    FragmentTrangChu fragmentTrangChu = new FragmentTrangChu();\r\n    FragmentQuanLiTin fragmentQuanLiTin = new FragmentQuanLiTin();\r\n    FragmentDaoCho fragmentDaoCho = new FragmentDaoCho();\r\n    FragmentThem fragmentThem = new FragmentThem();\r\n\r\n\r\n    @SuppressLint(\"MissingInflatedId\")\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        initUi();\r\n\r\n        FirebaseAuth auth = FirebaseAuth.getInstance();\r\n        FirebaseUser user = auth.getCurrentUser();\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference(\"Users\");\r\n\r\n        floatingActionButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                showDialogChooseListProduct();\r\n            }\r\n        });\r\n\r\n        bottomNavigationView.setOnItemSelectedListener(new NavigationBarView.OnItemSelectedListener() {\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                switch (item.getItemId()){\r\n                    case R.id.home:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentTrangChu).commit();\r\n                        return true;\r\n\r\n                    case R.id.believe:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentQuanLiTin).commit();\r\n                        return true;\r\n\r\n                    case R.id.fab:\r\n                        return true;\r\n\r\n                    case R.id.market:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentDaoCho).commit();\r\n                        return true;\r\n\r\n                    case R.id.more:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentThem).commit();\r\n                        return true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n        });\r\n        \r\n    }\r\n\r\n    private void showDialogChooseListProduct() {\r\n        final Dialog dialog = new Dialog(this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.layout_dialog_chon_danh_muc);\r\n\r\n        Window window = dialog.getWindow();\r\n        if(window == null) {\r\n            return;\r\n        }\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.BOTTOM;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        RelativeLayout layout_batDongSan = dialog.findViewById(R.id.layout_batDongSan);\r\n        RelativeLayout layout_XeCo = dialog.findViewById(R.id.layout_XeCo);\r\n        RelativeLayout layout_thoiTrang = dialog.findViewById(R.id.layout_thoiTrang);\r\n        RelativeLayout layout_dienTu = dialog.findViewById(R.id.layout_dienTu);\r\n        RelativeLayout layout_giaiTri = dialog.findViewById(R.id.layout_giaiTri);\r\n        RelativeLayout layout_dienGiaDung = dialog.findViewById(R.id.layout_dienGiaDung);\r\n        ImageView icon_close = dialog.findViewById(R.id.icon_close);\r\n\r\n        icon_close.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n        layout_giaiTri.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucGiaiTriActivity.class));\r\n            }\r\n        });\r\n        layout_dienGiaDung.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucDienMayActivity.class));\r\n\r\n            }\r\n        });\r\n        layout_batDongSan.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(MainActivity.this, \"danh mục batDongSan\", Toast.LENGTH_SHORT).show();\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucBDSActivity.class));\r\n            }\r\n        });\r\n        layout_XeCo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucXeCoActivity.class));\r\n\r\n            }\r\n        });\r\n        layout_thoiTrang.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucThoiTrangAcrivity.class));\r\n\r\n            }\r\n        });\r\n        layout_dienTu.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext() , chonDanhMucDoDienTuActivity.class));\r\n\r\n            }\r\n        });\r\n        dialog.show();\r\n    }\r\n\r\n\r\n    private void initUi() {\r\n        bottomNavigationView = findViewById(R.id.bottomNavigationView);\r\n        floatingActionButton = findViewById(R.id.fab);\r\n\r\n        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentTrangChu).commit();\r\n    }\r\n    public static void showDiaLogWarning(Context context , String text) {\r\n        final AlertDialog.Builder alertDialog = new AlertDialog.Builder(context);\r\n        alertDialog.setMessage(text).setTitle(\"Warning\").setIcon(R.drawable.ic_warning)\r\n                .setNegativeButton(\"Ok\" , null);\r\n        alertDialog.show();\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/MainActivity.java b/app/src/main/java/com/example/duan1/MainActivity.java
----- a/app/src/main/java/com/example/duan1/MainActivity.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/MainActivity.java	(date 1669998235359)
--@@ -2,7 +2,6 @@
-- 
-- import androidx.annotation.NonNull;
-- import androidx.appcompat.app.AppCompatActivity;
---import androidx.fragment.app.FragmentManager;
-- 
-- import android.annotation.SuppressLint;
-- import android.app.AlertDialog;
--@@ -24,13 +23,22 @@
-- import com.example.duan1.Fragment.FragmentQuanLiTin;
-- import com.example.duan1.Fragment.FragmentThem;
-- import com.example.duan1.Fragment.FragmentTrangChu;
--+import com.example.duan1.model.Users;
--+import com.facebook.login.LoginManager;
-- import com.google.android.material.bottomnavigation.BottomNavigationView;
-- import com.google.android.material.floatingactionbutton.FloatingActionButton;
-- import com.google.android.material.navigation.NavigationBarView;
-- import com.google.firebase.auth.FirebaseAuth;
-- import com.google.firebase.auth.FirebaseUser;
--+import com.google.firebase.database.DataSnapshot;
--+import com.google.firebase.database.DatabaseError;
-- import com.google.firebase.database.DatabaseReference;
-- import com.google.firebase.database.FirebaseDatabase;
--+import com.google.firebase.database.ValueEventListener;
--+import com.squareup.picasso.Picasso;
--+
--+import java.util.ArrayList;
--+import java.util.List;
-- 
-- public class MainActivity extends AppCompatActivity {
-- 
--@@ -41,7 +49,12 @@
--     FragmentQuanLiTin fragmentQuanLiTin = new FragmentQuanLiTin();
--     FragmentDaoCho fragmentDaoCho = new FragmentDaoCho();
--     FragmentThem fragmentThem = new FragmentThem();
---
--+    private FirebaseUser currentUser;
--+    private FirebaseAuth mAuth;
--+    private FirebaseDatabase database;
--+    private DatabaseReference myRef;
--+    private String name ;
--+    private int id;
-- 
--     @SuppressLint("MissingInflatedId")
--     @Override
--@@ -49,16 +62,28 @@
--         super.onCreate(savedInstanceState);
--         setContentView(R.layout.activity_main);
--         initUi();
--+//        onPostResume();
-- 
--+
--+        mAuth = FirebaseAuth.getInstance();
--+        currentUser = mAuth.getCurrentUser();
--         FirebaseAuth auth = FirebaseAuth.getInstance();
--         FirebaseUser user = auth.getCurrentUser();
---        FirebaseDatabase database = FirebaseDatabase.getInstance();
---        DatabaseReference myRef = database.getReference("Users");
--+         database = FirebaseDatabase.getInstance();
--+         myRef = database.getReference("Users");
--+
-- 
--         floatingActionButton.setOnClickListener(new View.OnClickListener() {
--             @Override
--             public void onClick(View view) {
---                showDialogChooseListProduct();
--+
--+                currentUser = mAuth.getCurrentUser();
--+                if(currentUser != null) {
--+                    showDialogChooseListProduct();
--+
--+                } else {
--+                    MainActivity.showDiaLogWarning(MainActivity.this , "Vui lòng đăng nhập để có thể đăng bán sản phẩm");
--+                }
--             }
--         });
-- 
--@@ -92,80 +117,140 @@
--         
--     }
-- 
--+
--+
--     private void showDialogChooseListProduct() {
---        final Dialog dialog = new Dialog(this);
---        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
---        dialog.setContentView(R.layout.layout_dialog_chon_danh_muc);
--+        List<Users> mListUser = new ArrayList<>();
--+
--+        String email = currentUser.getEmail();
--+        myRef.addValueEventListener(new ValueEventListener() {
--+            @Override
--+            public void onDataChange(@NonNull DataSnapshot snapshot) {
--+                mListUser.clear();
--+                for (DataSnapshot snapshot1 : snapshot.getChildren()){
--+                    Users user = snapshot1.getValue(Users.class);
--+                    mListUser.add(user);
--+                }
--+
--+                for (int i = 0; i < mListUser.size(); i++){
--+                    if (mListUser.get(i).getEmail().equals(email)){
--+                        name = (mListUser.get(i).getName());
--+                        id = mListUser.get(i).getId();
--+                    }
--+                }
--+            }
--+
--+            @Override
--+            public void onCancelled(@NonNull DatabaseError error) {
--+                Toast.makeText(MainActivity.this, "Error get Id and Name from Firebase", Toast.LENGTH_SHORT).show();
--+            }
--+        });
--+
--+            final Dialog dialog = new Dialog(this);
--+            dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
--+            dialog.setContentView(R.layout.layout_dialog_chon_danh_muc);
-- 
---        Window window = dialog.getWindow();
---        if(window == null) {
---            return;
---        }
---        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);
---        dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
---        WindowManager.LayoutParams windowAttributes = window.getAttributes();
---        windowAttributes.gravity = Gravity.BOTTOM;
---        window.setAttributes(windowAttributes);
--+            Window window = dialog.getWindow();
--+            if(window == null) {
--+                return;
--+            }
--+            window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);
--+            dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));
--+            WindowManager.LayoutParams windowAttributes = window.getAttributes();
--+            windowAttributes.gravity = Gravity.BOTTOM;
--+            window.setAttributes(windowAttributes);
-- 
---        RelativeLayout layout_batDongSan = dialog.findViewById(R.id.layout_batDongSan);
---        RelativeLayout layout_XeCo = dialog.findViewById(R.id.layout_XeCo);
---        RelativeLayout layout_thoiTrang = dialog.findViewById(R.id.layout_thoiTrang);
---        RelativeLayout layout_dienTu = dialog.findViewById(R.id.layout_dienTu);
---        RelativeLayout layout_giaiTri = dialog.findViewById(R.id.layout_giaiTri);
---        RelativeLayout layout_dienGiaDung = dialog.findViewById(R.id.layout_dienGiaDung);
---        ImageView icon_close = dialog.findViewById(R.id.icon_close);
--+            RelativeLayout layout_batDongSan = dialog.findViewById(R.id.layout_batDongSan);
--+            RelativeLayout layout_XeCo = dialog.findViewById(R.id.layout_XeCo);
--+            RelativeLayout layout_thoiTrang = dialog.findViewById(R.id.layout_thoiTrang);
--+            RelativeLayout layout_dienTu = dialog.findViewById(R.id.layout_dienTu);
--+            RelativeLayout layout_giaiTri = dialog.findViewById(R.id.layout_giaiTri);
--+            RelativeLayout layout_dienGiaDung = dialog.findViewById(R.id.layout_dienGiaDung);
--+            ImageView icon_close = dialog.findViewById(R.id.icon_close);
-- 
---        icon_close.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                dialog.dismiss();
---            }
---        });
---        layout_giaiTri.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                startActivity(new Intent(getApplicationContext() , chonDanhMucGiaiTriActivity.class));
---            }
---        });
---        layout_dienGiaDung.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                startActivity(new Intent(getApplicationContext() , chonDanhMucDienMayActivity.class));
---
---            }
---        });
---        layout_batDongSan.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                Toast.makeText(MainActivity.this, "danh mục batDongSan", Toast.LENGTH_SHORT).show();
---                startActivity(new Intent(getApplicationContext() , chonDanhMucBDSActivity.class));
---            }
---        });
---        layout_XeCo.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                startActivity(new Intent(getApplicationContext() , chonDanhMucXeCoActivity.class));
--+            icon_close.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    dialog.dismiss();
--+                }
--+            });
--+            layout_giaiTri.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucGiaiTriActivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            layout_dienGiaDung.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    Toast.makeText(MainActivity.this, "Id : " +id + " NAme : " + name, Toast.LENGTH_SHORT).show();
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucDienMayActivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            layout_batDongSan.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    Toast.makeText(MainActivity.this, "Id : " +id + " NAme : " + name, Toast.LENGTH_SHORT).show();
--+
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucBDSActivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            layout_XeCo.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    Toast.makeText(MainActivity.this, "Id : " +id + " NAme : " + name, Toast.LENGTH_SHORT).show();
-- 
---            }
---        });
---        layout_thoiTrang.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                startActivity(new Intent(getApplicationContext() , chonDanhMucThoiTrangAcrivity.class));
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucXeCoActivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            layout_thoiTrang.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
-- 
---            }
---        });
---        layout_dienTu.setOnClickListener(new View.OnClickListener() {
---            @Override
---            public void onClick(View view) {
---                startActivity(new Intent(getApplicationContext() , chonDanhMucDoDienTuActivity.class));
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucThoiTrangAcrivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            layout_dienTu.setOnClickListener(new View.OnClickListener() {
--+                @Override
--+                public void onClick(View view) {
--+                    Toast.makeText(MainActivity.this, "Id : " +id + " NAme : " + name, Toast.LENGTH_SHORT).show();
-- 
---            }
---        });
---        dialog.show();
--+                    Intent intent = new Intent(getApplicationContext() , chonDanhMucDoDienTuActivity.class);
--+                    Bundle bundle = new Bundle();
--+                    bundle.putString("Name" , name);
--+                    bundle.putInt("Id" , id);
--+                    intent.putExtras(bundle);
--+                    startActivity(intent);
--+                }
--+            });
--+            dialog.show();
--     }
-- 
---
--     private void initUi() {
--         bottomNavigationView = findViewById(R.id.bottomNavigationView);
--         floatingActionButton = findViewById(R.id.fab);
--Index: app/src/main/res/layout/fragment_quan_li_tin.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".Fragment.FragmentQuanLiTin\"\r\n    android:orientation=\"vertical\"\r\n    android:gravity=\"center\"\r\n    android:background=\"@color/teal_200\"\r\n    >\r\n\r\n    <TextView\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"Fragment Quản lí tin\"\r\n        android:textColor=\"@color/black\"\r\n        android:textSize=\"30dp\"\r\n        />\r\n\r\n</LinearLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/fragment_quan_li_tin.xml b/app/src/main/res/layout/fragment_quan_li_tin.xml
----- a/app/src/main/res/layout/fragment_quan_li_tin.xml	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/res/layout/fragment_quan_li_tin.xml	(date 1669962762987)
--@@ -5,16 +5,47 @@
--     android:layout_height="match_parent"
--     tools:context=".Fragment.FragmentQuanLiTin"
--     android:orientation="vertical"
---    android:gravity="center"
---    android:background="@color/teal_200"
---    >
---
---    <TextView
---        android:layout_width="wrap_content"
---        android:layout_height="wrap_content"
---        android:text="Fragment Quản lí tin"
---        android:textColor="@color/black"
---        android:textSize="30dp"
---        />
--+    >
--+
--+    <RelativeLayout
--+        android:layout_width="match_parent"
--+        android:layout_height="wrap_content"
--+        android:padding="10dp"
--+        android:background="#D8E6AF53"
--+        android:orientation="horizontal" >
--+
--+        <TextView
--+            android:id="@+id/tv_title_dat"
--+            android:layout_width="wrap_content"
--+            android:layout_height="wrap_content"
--+            android:layout_marginEnd="35dp"
--+            android:gravity="center"
--+            android:text="Quản Lí Tin Đăng"
--+            android:textColor="#0B0B0B"
--+            android:textSize="18dp"
--+            android:textStyle="bold" />
--+        <LinearLayout
--+            android:layout_width="wrap_content"
--+            android:layout_height="wrap_content"
--+            android:layout_alignEnd="@+id/tv_title_dat"
--+            android:layout_alignParentRight="true"
--+            android:orientation="horizontal">
--+
--+        <ImageView
--+            android:id="@+id/icon_notifi"
--+            android:layout_width="28dp"
--+            android:layout_height="28dp"
--+            android:layout_marginRight="10dp"
--+            android:src="@drawable/ic_notifi" />
--+
--+            <ImageView
--+                android:layout_width="28dp"
--+                android:layout_height="28dp"
--+                android:layout_marginRight="10dp"
--+                android:src="@drawable/ic_message" />
--+        </LinearLayout>
--+
--+
--+    </RelativeLayout>
-- 
-- </LinearLayout>
--\ No newline at end of file
--Index: app/src/main/res/layout/activity_dang_tin_thoi_trang.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    tools:context=\".dangTinThoiTrangActivity\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:padding=\"10dp\"\r\n        android:background=\"#D8E6AF53\"\r\n        android:orientation=\"horizontal\" >\r\n\r\n        <ImageView\r\n            android:id=\"@+id/icon_backTT\"\r\n            android:layout_width=\"35dp\"\r\n            android:layout_height=\"35dp\"\r\n            android:src=\"@drawable/ic_back_page\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_title_dat\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginEnd=\"35dp\"\r\n            android:layout_toRightOf=\"@+id/icon_back\"\r\n            android:gravity=\"center\"\r\n            android:text=\"Đăng tin\"\r\n            android:textColor=\"#0B0B0B\"\r\n            android:textSize=\"20dp\"\r\n            android:textStyle=\"bold\" />\r\n        <ImageView\r\n            android:id=\"@+id/iconCloser\"\r\n            android:layout_width=\"35dp\"\r\n            android:layout_height=\"35dp\"\r\n            android:src=\"@drawable/ic_close\"\r\n            android:layout_marginLeft=\"10dp\"\r\n            android:layout_alignParentEnd=\"true\"\r\n\r\n            />\r\n    </RelativeLayout>\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"6dp\"\r\n                android:background=\"@drawable/duongvien_goctron\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"Danh mục*\"\r\n                    android:textSize=\"12dp\" />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/tvTenDanhMucTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"Bất động sản - Nhà ở\"\r\n                    android:textColor=\"#252424\"\r\n                    android:textSize=\"16dp\"\r\n                    android:textStyle=\"bold\" />\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:background=\"@drawable/bg_corner\"\r\n                    android:padding=\"5dp\"\r\n                    android:text=\"TIÊU ĐỀ TIN ĐĂNG VÀ MÔ TẢ CHI TIẾT\"\r\n                    android:textColor=\"#9A9191\"\r\n                    android:textSize=\"16dp\" />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/title_postTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"6dp\"\r\n                    android:background=\"@drawable/bg_input\"\r\n                    android:hint=\"Tiêu đề tin đăng\"\r\n                    android:padding=\"10dp\"\r\n                    tools:ignore=\"DuplicateIds\" />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/description_postTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"6dp\"\r\n                    android:background=\"@drawable/bg_input\"\r\n                    android:hint=\"Mô tả chi tiết Nên co loại quần áo ,\r\n             Nam / Nữ , Kích cỡ , Nhãn hiệu\r\n            , chất liệu , Màu sắc .v.v.\"\r\n                    android:padding=\"10dp\"\r\n                    tools:ignore=\"DuplicateIds\" />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/priceTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"6dp\"\r\n                    android:background=\"@drawable/bg_input\"\r\n                    android:hint=\"Giá\"\r\n                    android:padding=\"10dp\"\r\n                    tools:ignore=\"DuplicateIds\" />\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:padding=\"6dp\"\r\n                    android:text=\"Loại sản phẩm\"\r\n                    android:textSize=\"20dp\"\r\n                    android:textStyle=\"bold\" />\r\n\r\n                <Spinner\r\n                    android:id=\"@+id/spn_product_type\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\" />\r\n            </LinearLayout>\r\n\r\n            <TextView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:background=\"@drawable/bg_corner\"\r\n                android:padding=\"5dp\"\r\n                android:text=\"HÌNH ẢNH SẢN PHẨM\"\r\n                android:textColor=\"#9A9191\"\r\n                android:textSize=\"16dp\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:background=\"@drawable/duongvien_goctron\"\r\n                android:gravity=\"center_horizontal\"\r\n                android:orientation=\"vertical\"\r\n                android:padding=\"10dp\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/addImageProductTT\"\r\n                    android:layout_width=\"40dp\"\r\n                    android:layout_height=\"40dp\"\r\n                    android:src=\"@drawable/ic_camera\" />\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:text=\"Đăng từ 02 đến 05 hình\"\r\n                    android:textColor=\"#7E7A7A\" />\r\n\r\n                <androidx.recyclerview.widget.RecyclerView\r\n                    android:id=\"@+id/rcvView_select_img_fashion\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_gravity=\"start\"\r\n                    android:scrollbarStyle=\"outsideInset\"\r\n                    android:scrollbars=\"horizontal\" />\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_margin=\"10dp\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:background=\"@drawable/bg_corner\"\r\n                    android:padding=\"5dp\"\r\n                    android:text=\"VỀ NGƯỜI BÁN\"\r\n                    android:textColor=\"#9A9191\"\r\n                    android:textSize=\"16dp\" />\r\n\r\n                <EditText\r\n                    android:id=\"@+id/addressTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:background=\"@drawable/bg_input\"\r\n                    android:hint=\"diaChi\"\r\n                    android:padding=\"10dp\"\r\n                    tools:ignore=\"DuplicateIds\" />\r\n\r\n                <Button\r\n                    android:id=\"@+id/btnDangTinTT\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_margin=\"10dp\"\r\n                    android:padding=\"10dp\"\r\n                    android:text=\"Đăng tin\" />\r\n\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n    </ScrollView>\r\n</LinearLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/activity_dang_tin_thoi_trang.xml b/app/src/main/res/layout/activity_dang_tin_thoi_trang.xml
----- a/app/src/main/res/layout/activity_dang_tin_thoi_trang.xml	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/res/layout/activity_dang_tin_thoi_trang.xml	(date 1669961879061)
--@@ -25,7 +25,7 @@
--             android:layout_width="match_parent"
--             android:layout_height="wrap_content"
--             android:layout_marginEnd="35dp"
---            android:layout_toRightOf="@+id/icon_back"
--+            android:layout_toRightOf="@+id/icon_backTT"
--             android:gravity="center"
--             android:text="Đăng tin"
--             android:textColor="#0B0B0B"
--Index: app/src/main/java/com/example/duan1/model/Users.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1.model;\r\n\r\nimport com.google.firebase.database.Exclude;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class Users implements Serializable {\r\n\r\n    private int id;\r\n    private String name;\r\n    private String email;\r\n    private String sdt;\r\n    private String image;\r\n    private String password;\r\n\r\n    public Users() {\r\n    }\r\n\r\n    public Users(int id, String name, String email, String sdt, String image, String password) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.email = email;\r\n        this.sdt = sdt;\r\n        this.image = image;\r\n        this.password = password;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getSdt() {\r\n        return sdt;\r\n    }\r\n\r\n    public void setSdt(String sdt) {\r\n        this.sdt = sdt;\r\n    }\r\n\r\n    public String getImage() {\r\n        return image;\r\n    }\r\n\r\n    public void setImage(String image) {\r\n        this.image = image;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    @Exclude\r\n    public Map<String, Object> toMap() {\r\n        HashMap<String, Object> result = new HashMap<>();\r\n        result.put(\"id\", id);\r\n        result.put(\"name\", name);\r\n        result.put(\"email\", email);\r\n        result.put(\"sdt\", sdt);\r\n        result.put(\"image\", image);\r\n        result.put(\"password\", password);\r\n\r\n        return result;\r\n    }\r\n\r\n    @Exclude\r\n    public Map<String, Object> toMapImage() {\r\n        HashMap<String, Object> result = new HashMap<>();\r\n        result.put(\"id\", id);\r\n        result.put(\"name\", name);\r\n        result.put(\"email\", email);\r\n        result.put(\"sdt\", sdt);\r\n        result.put(\"image\", image);\r\n        result.put(\"password\", password);\r\n\r\n        return result;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/model/Users.java b/app/src/main/java/com/example/duan1/model/Users.java
----- a/app/src/main/java/com/example/duan1/model/Users.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/model/Users.java	(date 1669969272856)
--@@ -100,4 +100,16 @@
-- 
--         return result;
--     }
--+
--+    @Override
--+    public String toString() {
--+        return "Users{" +
--+                "id=" + id +
--+                ", name='" + name + '\'' +
--+                ", email='" + email + '\'' +
--+                ", sdt='" + sdt + '\'' +
--+                ", image='" + image + '\'' +
--+                ", password='" + password + '\'' +
--+                '}';
--+    }
-- }
--Index: app/src/main/res/drawable/ic_notifi.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/drawable/ic_notifi.xml b/app/src/main/res/drawable/ic_notifi.xml
--new file mode 100644
----- /dev/null	(date 1669962037513)
--+++ b/app/src/main/res/drawable/ic_notifi.xml	(date 1669962037513)
--@@ -0,0 +1,5 @@
--+<vector android:alpha="0.9" android:height="24dp" android:tint="#2D2929"
--+    android:viewportHeight="24" android:viewportWidth="24"
--+    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
--+    <path android:fillColor="@android:color/white" android:pathData="M12,22c1.1,0 2,-0.9 2,-2h-4c0,1.1 0.89,2 2,2zM18,16v-5c0,-3.07 -1.64,-5.64 -4.5,-6.32L13.5,4c0,-0.83 -0.67,-1.5 -1.5,-1.5s-1.5,0.67 -1.5,1.5v0.68C7.63,5.36 6,7.92 6,11v5l-2,2v1h16v-1l-2,-2z"/>
--+</vector>
--Index: app/src/main/java/com/example/duan1/Login.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1;\r\n\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\n\r\nimport android.os.PersistableBundle;\r\nimport android.text.Editable;\r\nimport android.text.TextUtils;\r\nimport android.text.TextWatcher;\r\nimport android.util.Patterns;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.model.Users;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginManager;\r\nimport com.facebook.login.LoginResult;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\n\r\npublic class Login extends AppCompatActivity {\r\n\r\n    private static final int RC_SIGN_IN = 1000;\r\n    private ImageView imgBack;\r\n    private CircleImageView imgLoginFacebook, imgLoginGoole, imgLoginZalo;\r\n    private TextView tvResetPassword, tvRegister;\r\n    private EditText edtNumberPhone, edtPassword;\r\n    private Button btnLogin;\r\n\r\n    private FirebaseAuth mAuth;\r\n    private CallbackManager callbackManager;\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    private GoogleSignInOptions gso;\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n        initUi();\r\n\r\n        //login Facebook\r\n        callbackManager = CallbackManager.Factory.create();\r\n        LoginManager.getInstance().registerCallback(callbackManager,\r\n                new FacebookCallback<LoginResult>() {\r\n                    @Override\r\n                    public void onSuccess(LoginResult loginResult) {\r\n                        Toast.makeText(Login.this, \"Đăng nhập thành công!\", Toast.LENGTH_SHORT).show();\r\n                        Intent intent = new Intent(Login.this, MainActivity.class);\r\n                        setResult(RESULT_OK,intent );\r\n                        finish();\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancel() {\r\n                        // App code\r\n                    }\r\n\r\n                    @Override\r\n                    public void onError(FacebookException exception) {\r\n                        // App code\r\n                    }\r\n                });\r\n\r\n        //login Goolgle\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n        initListenerClick();\r\n        initListenerTextChange();\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    private void initUi() {\r\n        imgBack = findViewById(R.id.img_back);\r\n        imgLoginFacebook = findViewById(R.id.img_login_facebook);\r\n        imgLoginGoole = findViewById(R.id.img_login_google);\r\n        imgLoginZalo = findViewById(R.id.img_login_zalo);\r\n        tvResetPassword = findViewById(R.id.tv_reset_password);\r\n        tvRegister = findViewById(R.id.tv_register);\r\n        edtNumberPhone = findViewById(R.id.edt_numberphone);\r\n        edtPassword = findViewById(R.id.edt_password);\r\n        btnLogin = findViewById(R.id.btn_login);\r\n\r\n        // Initialize Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n    }\r\n\r\n    private void initListenerClick() {\r\n        //click back\r\n        imgBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code back\r\n                finish();\r\n            }\r\n        });\r\n\r\n        //click login facebook\r\n        imgLoginFacebook.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login facebook\r\n                LoginManager.getInstance().logInWithReadPermissions(Login.this, Arrays.asList(\"public_profile\"));\r\n            }\r\n        });\r\n\r\n        //click login google\r\n        imgLoginGoole.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login google\r\n                LoginGoogle();\r\n            }\r\n        });\r\n\r\n        //click login zalo\r\n        imgLoginZalo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login zalo\r\n                Toast.makeText(Login.this, \"Login zalo from Login\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        //click reset password\r\n        tvResetPassword.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code reset password\r\n                Toast.makeText(Login.this, \"reset Password from Login\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        //click register\r\n        tvRegister.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code register\r\n                startActivity(new Intent(Login.this, Register.class));\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n    private void initListenerTextChange() {\r\n        edtNumberPhone.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n                if (edtNumberPhone.getText().toString().trim().equals(\"\") || edtPassword.getText().toString().trim().equals(\"\")){\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_login);\r\n                    return;\r\n                }else{\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_register);\r\n                    OnLogin();\r\n                }\r\n            }\r\n        });\r\n\r\n        edtPassword.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n                if (edtNumberPhone.getText().toString().trim().equals(\"\") || edtPassword.getText().toString().trim().equals(\"\")){\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_login);\r\n                    return;\r\n                }else{\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_register);\r\n                    OnLogin();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public static boolean isValidEmail(CharSequence target) {\r\n        return (!TextUtils.isEmpty(target) && Patterns.EMAIL_ADDRESS.matcher(target).matches());\r\n    }\r\n\r\n    private void OnLogin(){\r\n\r\n        //click login\r\n        btnLogin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login\r\n                ProgressDialog progressDialog = new ProgressDialog(Login.this);\r\n                String email = edtNumberPhone.getText().toString().trim();\r\n                if (!isValidEmail(email)){\r\n                    edtNumberPhone.setError(\"Email không đúng!\");\r\n                    return;\r\n                }\r\n                String password = edtPassword.getText().toString().trim();\r\n                if (password.length() < 6 ){\r\n                    edtPassword.setError(\"Mật khẩu phải bằng hoặc trên 6 kí tự\");\r\n                    return;\r\n                }\r\n\r\n                progressDialog.setTitle(\"Xin chờ\");\r\n                progressDialog.show();\r\n\r\n                mAuth.signInWithEmailAndPassword(email, password)\r\n                        .addOnCompleteListener(Login.this, new OnCompleteListener<AuthResult>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<AuthResult> task) {\r\n\r\n                                Handler handler = new Handler();\r\n                                handler.postDelayed(new Runnable() {\r\n                                    @Override\r\n                                    public void run() {\r\n\r\n                                        if (task.isSuccessful()) {\r\n                                            // Sign in success, update UI with the signed-in user's information\r\n                                            List<Users> mListUser = new ArrayList<>();\r\n                                            FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                                            DatabaseReference myRef = database.getReference(\"Users\");\r\n                    \r\n                                            myRef.addValueEventListener(new ValueEventListener() {\r\n                                                @Override\r\n                                                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                                    mListUser.clear();\r\n                                                    for (DataSnapshot snapshot1 : snapshot.getChildren()){\r\n                                                        Users user = snapshot1.getValue(Users.class);\r\n                                                        mListUser.add(user);\r\n\r\n                                                    }\r\n                                                    for (int i = 0; i < mListUser.size(); i++){\r\n                                                        if (mListUser.get(i).getEmail().equals(email) && mListUser.get(i).getPassword().equals(password)){\r\n                                                            Toast.makeText(Login.this, \"Đăng nhập thành công!\", Toast.LENGTH_SHORT).show();\r\n                                                            Intent intent = new Intent(Login.this, MainActivity.class);\r\n                                                            setResult(RESULT_OK,intent );\r\n                                                            finish();\r\n\r\n                                                        }\r\n                                                    }\r\n                                                }\r\n\r\n                                                @Override\r\n                                                public void onCancelled(@NonNull DatabaseError error) {\r\n                                                    FirebaseAuth.getInstance().signOut();\r\n                                                    Toast.makeText(Login.this, \"Đăng nhập thất bại!\", Toast.LENGTH_SHORT).show();\r\n                                                }\r\n                                            });\r\n//                                            int dem = 0;\r\n//\r\n//                                            if (dem == 0){\r\n//                                                Toast.makeText(Login.this, \"Đăng nhập thất bại!\", Toast.LENGTH_SHORT).show();\r\n//                                            }\r\n                                        } else {\r\n                                            // If sign in fails, display a message to the user.\r\n                                            Toast.makeText(Login.this, \"Đăng nhập thất bại, tài khoản hoặc mật khẩu không đúng!\", Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                        progressDialog.dismiss();\r\n                                    }\r\n                                },2000);\r\n                            }\r\n                        });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void LoginGoogle() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        // Pass the activity result back to the Facebook SDK\r\n        callbackManager.onActivityResult(requestCode, resultCode, data);\r\n\r\n        //google\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            try {\r\n                task.getResult(ApiException.class);\r\n                Toast.makeText(Login.this, \"Đăng nhập thành công!\", Toast.LENGTH_SHORT).show();\r\n                Intent intent = new Intent(Login.this, MainActivity.class);\r\n                setResult(RESULT_OK,intent);\r\n                finish();\r\n            } catch (ApiException e) {\r\n                Toast.makeText(this, \"signInResult:failed code=\" + e.getStatusCode(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        GoogleSignInAccount account = GoogleSignIn.getLastSignedInAccount(this);\r\n        if (account != null){\r\n            finish();\r\n        }\r\n\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/Login.java b/app/src/main/java/com/example/duan1/Login.java
----- a/app/src/main/java/com/example/duan1/Login.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/Login.java	(date 1669966944057)
--@@ -80,7 +80,7 @@
--                     public void onSuccess(LoginResult loginResult) {
--                         Toast.makeText(Login.this, "Đăng nhập thành công!", Toast.LENGTH_SHORT).show();
--                         Intent intent = new Intent(Login.this, MainActivity.class);
---                        setResult(RESULT_OK,intent );
--+                        setResult(RESULT_OK, intent);
--                         finish();
--                     }
-- 
--@@ -108,7 +108,6 @@
--     }
-- 
-- 
---
--     private void initUi() {
--         imgBack = findViewById(R.id.img_back);
--         imgLoginFacebook = findViewById(R.id.img_login_facebook);
--@@ -181,7 +180,6 @@
--         });
-- 
-- 
---
--     }
-- 
--     private void initListenerTextChange() {
--@@ -198,10 +196,10 @@
-- 
--             @Override
--             public void afterTextChanged(Editable editable) {
---                if (edtNumberPhone.getText().toString().trim().equals("") || edtPassword.getText().toString().trim().equals("")){
--+                if (edtNumberPhone.getText().toString().trim().equals("") || edtPassword.getText().toString().trim().equals("")) {
--                     btnLogin.setBackgroundResource(R.drawable.bg_button_login);
--                     return;
---                }else{
--+                } else {
--                     btnLogin.setBackgroundResource(R.drawable.bg_button_register);
--                     OnLogin();
--                 }
--@@ -221,10 +219,10 @@
-- 
--             @Override
--             public void afterTextChanged(Editable editable) {
---                if (edtNumberPhone.getText().toString().trim().equals("") || edtPassword.getText().toString().trim().equals("")){
--+                if (edtNumberPhone.getText().toString().trim().equals("") || edtPassword.getText().toString().trim().equals("")) {
--                     btnLogin.setBackgroundResource(R.drawable.bg_button_login);
--                     return;
---                }else{
--+                } else {
--                     btnLogin.setBackgroundResource(R.drawable.bg_button_register);
--                     OnLogin();
--                 }
--@@ -236,7 +234,7 @@
--         return (!TextUtils.isEmpty(target) && Patterns.EMAIL_ADDRESS.matcher(target).matches());
--     }
-- 
---    private void OnLogin(){
--+    private void OnLogin() {
-- 
--         //click login
--         btnLogin.setOnClickListener(new View.OnClickListener() {
--@@ -245,12 +243,12 @@
--                 //code login
--                 ProgressDialog progressDialog = new ProgressDialog(Login.this);
--                 String email = edtNumberPhone.getText().toString().trim();
---                if (!isValidEmail(email)){
--+                if (!isValidEmail(email)) {
--                     edtNumberPhone.setError("Email không đúng!");
--                     return;
--                 }
--                 String password = edtPassword.getText().toString().trim();
---                if (password.length() < 6 ){
--+                if (password.length() < 6) {
--                     edtPassword.setError("Mật khẩu phải bằng hoặc trên 6 kí tự");
--                     return;
--                 }
--@@ -273,22 +271,24 @@
--                                             List<Users> mListUser = new ArrayList<>();
--                                             FirebaseDatabase database = FirebaseDatabase.getInstance();
--                                             DatabaseReference myRef = database.getReference("Users");
---                    
--+
--                                             myRef.addValueEventListener(new ValueEventListener() {
--                                                 @Override
--                                                 public void onDataChange(@NonNull DataSnapshot snapshot) {
--                                                     mListUser.clear();
---                                                    for (DataSnapshot snapshot1 : snapshot.getChildren()){
--+                                                    for (DataSnapshot snapshot1 : snapshot.getChildren()) {
--                                                         Users user = snapshot1.getValue(Users.class);
--                                                         mListUser.add(user);
-- 
--                                                     }
---                                                    for (int i = 0; i < mListUser.size(); i++){
---                                                        if (mListUser.get(i).getEmail().equals(email) && mListUser.get(i).getPassword().equals(password)){
--+                                                    for (int i = 0; i < mListUser.size(); i++) {
--+                                                        if (mListUser.get(i).getEmail().equals(email) && mListUser.get(i).getPassword().equals(password)) {
--                                                             Toast.makeText(Login.this, "Đăng nhập thành công!", Toast.LENGTH_SHORT).show();
--                                                             Intent intent = new Intent(Login.this, MainActivity.class);
---                                                            setResult(RESULT_OK,intent );
---                                                            finish();
--+                                                            intent.putExtra("statusLogin", 1);
--+                                                            setResult(RESULT_OK, intent);
--+                                                            startActivity(intent);
--+//                                                            finish();
-- 
--                                                         }
--                                                     }
--@@ -311,7 +311,7 @@
--                                         }
--                                         progressDialog.dismiss();
--                                     }
---                                },2000);
--+                                }, 2000);
--                             }
--                         });
--             }
--@@ -338,8 +338,10 @@
--                 task.getResult(ApiException.class);
--                 Toast.makeText(Login.this, "Đăng nhập thành công!", Toast.LENGTH_SHORT).show();
--                 Intent intent = new Intent(Login.this, MainActivity.class);
---                setResult(RESULT_OK,intent);
---                finish();
--+                setResult(RESULT_OK, intent);
--+                intent.putExtra("statusLogin", 1);
--+                startActivity(intent);
--+//                finish();
--             } catch (ApiException e) {
--                 Toast.makeText(this, "signInResult:failed code=" + e.getStatusCode(), Toast.LENGTH_SHORT).show();
--             }
--@@ -350,7 +352,7 @@
--     protected void onStart() {
--         super.onStart();
--         GoogleSignInAccount account = GoogleSignIn.getLastSignedInAccount(this);
---        if (account != null){
--+        if (account != null) {
--             finish();
--         }
-- 
--Index: app/src/main/java/com/example/duan1/Adapter/dmucTheThaoAdapter.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1.Adapter;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.dagTinGiaiTriActivity;\r\nimport com.example.duan1.dangTinThoiTrangActivity;\r\nimport com.example.duan1.model.giaiTri;\r\n\r\nimport java.util.List;\r\n\r\npublic class dmucTheThaoAdapter extends RecyclerView.Adapter<dmucTheThaoAdapter.ViewHolder> {\r\n\r\n    private Context mContext;\r\n    private List<giaiTri> listGiaiTri;\r\n\r\n    public dmucTheThaoAdapter(Context mContext, List<giaiTri> listGiaiTri) {\r\n        this.mContext = mContext;\r\n        this.listGiaiTri = listGiaiTri;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_danh_muc_the_thao, parent, false);\r\n\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n        giaiTri mGiaiTri = listGiaiTri.get(position);\r\n\r\n        holder.tenDanhMuc.setText(mGiaiTri.getTen());\r\n        holder.layout_item.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(mContext , dagTinGiaiTriActivity.class);\r\n                intent.putExtra(\"tenDanhMuc\" , mGiaiTri.getTen());\r\n                mContext.startActivity(intent);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        if(listGiaiTri != null) {\r\n            return listGiaiTri.size();\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n        TextView tenDanhMuc;\r\n        LinearLayout layout_item;\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            layout_item = itemView.findViewById(R.id.layout_item_theThao);\r\n            tenDanhMuc = itemView.findViewById(R.id.tvTenDanhMucTheThao);\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/Adapter/dmucTheThaoAdapter.java b/app/src/main/java/com/example/duan1/Adapter/dmucTheThaoAdapter.java
----- a/app/src/main/java/com/example/duan1/Adapter/dmucTheThaoAdapter.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/Adapter/dmucTheThaoAdapter.java	(date 1669998003390)
--@@ -41,6 +41,7 @@
--     public void onBindViewHolder(@NonNull ViewHolder holder, int position) {
--         giaiTri mGiaiTri = listGiaiTri.get(position);
-- 
--+
--         holder.tenDanhMuc.setText(mGiaiTri.getTen());
--         holder.layout_item.setOnClickListener(new View.OnClickListener() {
--             @Override
--Index: app/src/main/res/drawable/ic_message.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/drawable/ic_message.xml b/app/src/main/res/drawable/ic_message.xml
--new file mode 100644
----- /dev/null	(date 1669962128962)
--+++ b/app/src/main/res/drawable/ic_message.xml	(date 1669962128962)
--@@ -0,0 +1,5 @@
--+<vector android:alpha="0.9" android:height="24dp" android:tint="#2D2929"
--+    android:viewportHeight="24" android:viewportWidth="24"
--+    android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
--+    <path android:fillColor="@android:color/white" android:pathData="M20,2L4,2c-1.1,0 -1.99,0.9 -1.99,2L2,22l4,-4h14c1.1,0 2,-0.9 2,-2L22,4c0,-1.1 -0.9,-2 -2,-2zM18,14L6,14v-2h12v2zM18,11L6,11L6,9h12v2zM18,8L6,8L6,6h12v2z"/>
--+</vector>
--Index: app/src/main/java/com/example/duan1/Adapter/dmucThoiTrangAdapter.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.duan1.Adapter;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.dangTinThoiTrangActivity;\r\nimport com.example.duan1.model.thoiTrang;\r\nimport com.example.duan1.model.xeCo;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class dmucThoiTrangAdapter extends RecyclerView.Adapter<dmucThoiTrangAdapter.ViewHolder> {\r\n    private Context mContext ;\r\n    private List<thoiTrang> listThoiTrang = new ArrayList<>();\r\n\r\n    public dmucThoiTrangAdapter(Context mContext, List<thoiTrang> listThoiTrang) {\r\n        this.mContext = mContext;\r\n        this.listThoiTrang = listThoiTrang;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_danh_muc_thoi_trang, parent,false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n        thoiTrang mThoiTrang = listThoiTrang.get(position);\r\n        holder.tenDanhMuc.setText(mThoiTrang.getTenThoiTrang());\r\n        holder.layout_item_thoiTrang.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(mContext , dangTinThoiTrangActivity.class);\r\n                intent.putExtra(\"tenDanhMuc\" , mThoiTrang.getTenThoiTrang());\r\n                mContext.startActivity(intent);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        if(listThoiTrang != null ){\r\n            return listThoiTrang.size();\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder {\r\n        TextView tenDanhMuc;\r\n        LinearLayout layout_item_thoiTrang;\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            tenDanhMuc = itemView.findViewById(R.id.tvTenDanhMuc);\r\n            layout_item_thoiTrang = itemView.findViewById(R.id.layout_item_thoiTrang);\r\n        }\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/duan1/Adapter/dmucThoiTrangAdapter.java b/app/src/main/java/com/example/duan1/Adapter/dmucThoiTrangAdapter.java
----- a/app/src/main/java/com/example/duan1/Adapter/dmucThoiTrangAdapter.java	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/app/src/main/java/com/example/duan1/Adapter/dmucThoiTrangAdapter.java	(date 1670001380137)
--@@ -2,6 +2,7 @@
-- 
-- import android.content.Context;
-- import android.content.Intent;
--+import android.os.Bundle;
-- import android.view.LayoutInflater;
-- import android.view.View;
-- import android.view.ViewGroup;
--@@ -13,6 +14,7 @@
-- import androidx.recyclerview.widget.RecyclerView;
-- 
-- import com.example.duan1.R;
--+import com.example.duan1.chonDanhMucThoiTrangAcrivity;
-- import com.example.duan1.dangTinThoiTrangActivity;
-- import com.example.duan1.model.thoiTrang;
-- import com.example.duan1.model.xeCo;
--@@ -22,7 +24,8 @@
-- 
-- public class dmucThoiTrangAdapter extends RecyclerView.Adapter<dmucThoiTrangAdapter.ViewHolder> {
--     private Context mContext ;
---    private List<thoiTrang> listThoiTrang = new ArrayList<>();
--+    private List<thoiTrang> listThoiTrang ;
--+    chonDanhMucThoiTrangAcrivity chonDanhMucThoiTrangAcrivity;
-- 
--     public dmucThoiTrangAdapter(Context mContext, List<thoiTrang> listThoiTrang) {
--         this.mContext = mContext;
--@@ -33,18 +36,25 @@
--     @Override
--     public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
--         View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_danh_muc_thoi_trang, parent,false);
--+
--         return new ViewHolder(view);
--     }
-- 
--     @Override
--     public void onBindViewHolder(@NonNull ViewHolder holder, int position) {
--         thoiTrang mThoiTrang = listThoiTrang.get(position);
--+
--         holder.tenDanhMuc.setText(mThoiTrang.getTenThoiTrang());
--+
--+
--+
--         holder.layout_item_thoiTrang.setOnClickListener(new View.OnClickListener() {
--             @Override
--             public void onClick(View view) {
--                 Intent intent = new Intent(mContext , dangTinThoiTrangActivity.class);
---                intent.putExtra("tenDanhMuc" , mThoiTrang.getTenThoiTrang());
--+                Bundle bundle = new Bundle();
--+                bundle.putString("tenDanhMuc" , mThoiTrang.getTenThoiTrang());
--+                intent.putExtras(bundle);
--                 mContext.startActivity(intent);
--             }
--         });
--@@ -62,6 +72,7 @@
--     public class ViewHolder extends RecyclerView.ViewHolder {
--         TextView tenDanhMuc;
--         LinearLayout layout_item_thoiTrang;
--+
--         public ViewHolder(@NonNull View itemView) {
--             super(itemView);
--             tenDanhMuc = itemView.findViewById(R.id.tvTenDanhMuc);
--Index: .idea/misc.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable-v24/ic_launcher_foreground.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/background_title.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_button_login.xml\" value=\"0.142\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_button_register.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_corner.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_input.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/bg_overlay.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/duongvien_goctron.xml\" value=\"0.1285\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_add_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_home_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_more_horiz_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_newspaper_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/ic_baseline_shopping_basket_24.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/drawable/transparent_background.xml\" value=\"0.128\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_bdsactivity.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_dien_may.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_do_dien_tu.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_giai_tri.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_thoi_trang.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_thoi_trang_acrivity.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_chon_danh_muc_xe_co.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dag_tin_giai_tri.xml\" value=\"0.12978142076502733\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_bdsactivity.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_bdsdat.xml\" value=\"0.21\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_bdsphong_tro.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_dang_tin_thoi_trang.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_edit_account.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_login.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_main.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_register.xml\" value=\"0.25\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_splash_screen.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/dialog_item_bat_dong_san.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_quan_li_tin.xml\" value=\"0.1094224924012158\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_them.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_trang_chu.xml\" value=\"0.13541666666666666\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_bds.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_dien_may.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_the_thao.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_thoi_trang.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_direction.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_dmuc_dien_tu.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_dmuc_xe_co.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_image_add_news.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_slider.xml\" value=\"0.2\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/layout_dialog_chon_danh_muc.xml\" value=\"0.1721014492753623\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/slider_item_layout.xml\" value=\"0.17028985507246377\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/menu/bottom_nav_menu.xml\" value=\"0.225\" />\r\n        <entry key=\"..\\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/menu/menu_them.xml\" value=\"0.225\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"Android Studio default JDK\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/.idea/misc.xml b/.idea/misc.xml
----- a/.idea/misc.xml	(revision 0aad610a1db20e28afec662e3d6fb372a2a12353)
--+++ b/.idea/misc.xml	(date 1669962272860)
--@@ -36,7 +36,7 @@
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_register.xml" value="0.25" />
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/activity_splash_screen.xml" value="0.17028985507246377" />
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/dialog_item_bat_dong_san.xml" value="0.1721014492753623" />
---        <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_quan_li_tin.xml" value="0.1094224924012158" />
--+        <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_quan_li_tin.xml" value="0.19" />
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_them.xml" value="0.1721014492753623" />
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/fragment_trang_chu.xml" value="0.13541666666666666" />
--         <entry key="..\:/FPT_HoangQuocHuy/Du_An_1(LTMT)/QLDA_android1/app/src/main/res/layout/item_danh_muc_bds.xml" value="0.1721014492753623" />
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM__Changes_.xml	(revision a7ff6eabccd93f3e582ffe980b17ec3dbd7a8ec9)
-+++ /dev/null	(revision a7ff6eabccd93f3e582ffe980b17ec3dbd7a8ec9)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]" date="1670034776740" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_12_3_2022_9_31_AM_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 12/3/2022 9:31 AM [Changes]" />
--</changelist>
-\ No newline at end of file
Index: app/src/main/java/com/example/duan1/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.SearchView;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.app.AlertDialog;\r\nimport android.app.Dialog;\r\nimport android.app.SearchManager;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.net.ConnectivityManager;\r\nimport android.os.Bundle;\r\nimport android.view.Gravity;\r\nimport android.view.Menu;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Broadcast.Broadcast;\r\nimport com.example.duan1.Fragment.FragmentDaoCho;\r\nimport com.example.duan1.Fragment.FragmentQuanLiTin;\r\nimport com.example.duan1.Fragment.FragmentThem;\r\nimport com.example.duan1.Fragment.FragmentTrangChu;\r\nimport com.example.duan1.model.Users;\r\n\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\nimport com.google.android.material.navigation.NavigationBarView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    BottomNavigationView bottomNavigationView;\r\n    FloatingActionButton floatingActionButton;\r\n    SearchView searchView;\r\n    FragmentTrangChu fragmentTrangChu = new FragmentTrangChu();\r\n    FragmentQuanLiTin fragmentQuanLiTin = new FragmentQuanLiTin();\r\n    FragmentDaoCho fragmentDaoCho = new FragmentDaoCho();\r\n    FragmentThem fragmentThem = new FragmentThem();\r\n    private FirebaseUser currentUser;\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseDatabase database;\r\n    private DatabaseReference myRef;\r\n    public static String name;\r\n    public static int id;\r\n    private Broadcast broadcast;\r\n\r\n    @SuppressLint(\"MissingInflatedId\")\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        initUi();\r\n        searchView = findViewById(R.id.searchView);\r\n        mAuth = FirebaseAuth.getInstance();\r\n        currentUser = mAuth.getCurrentUser();\r\n\r\n        database = FirebaseDatabase.getInstance();\r\n        myRef = database.getReference(\"Users\");\r\n        if (currentUser != null) {\r\n            getUser();\r\n        }\r\n\r\n        floatingActionButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n//        currentUser = mAuth.getCurrentUser();\r\n\r\n                if (currentUser != null) {\r\n\r\n                    showDialogChooseListProduct();\r\n\r\n                } else {\r\n                    MainActivity.showDiaLogWarning(MainActivity.this, \"Vui lòng đăng nhập để có thể đăng bán sản phẩm\");\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        bottomNavigationView.setOnItemSelectedListener(new NavigationBarView.OnItemSelectedListener() {\r\n            @Override\r\n            public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                switch (item.getItemId()) {\r\n                    case R.id.home:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentTrangChu).commit();\r\n\r\n                        return true;\r\n\r\n                    case R.id.believe:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentQuanLiTin).commit();\r\n\r\n                        return true;\r\n\r\n                    case R.id.fab:\r\n                        return true;\r\n\r\n                    case R.id.market:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentDaoCho).commit();\r\n\r\n                        return true;\r\n\r\n                    case R.id.more:\r\n                        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentThem).commit();\r\n                        return true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void getUser() {\r\n        List<Users> mListUser = new ArrayList<>();\r\n\r\n        String email = currentUser.getEmail();\r\n        myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                mListUser.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren()) {\r\n                    Users user = snapshot1.getValue(Users.class);\r\n                    mListUser.add(user);\r\n                }\r\n\r\n                for (int i = 0; i < mListUser.size(); i++) {\r\n                    if (mListUser.get(i).getEmail().equals(email)) {\r\n                        name = (mListUser.get(i).getName());\r\n                        id = mListUser.get(i).getId();\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Toast.makeText(MainActivity.this, \"Error get Id and Name from Firebase\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void showDialogChooseListProduct() {\r\n        final Dialog dialog = new Dialog(this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.layout_dialog_chon_danh_muc);\r\n        getUser();\r\n        Window window = dialog.getWindow();\r\n        if (window == null) {\r\n            return;\r\n        }\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        dialog.getWindow().setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT));\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.BOTTOM;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        RelativeLayout layout_batDongSan = dialog.findViewById(R.id.layout_batDongSan);\r\n        RelativeLayout layout_XeCo = dialog.findViewById(R.id.layout_XeCo);\r\n        RelativeLayout layout_thoiTrang = dialog.findViewById(R.id.layout_thoiTrang);\r\n        RelativeLayout layout_dienTu = dialog.findViewById(R.id.layout_dienTu);\r\n        RelativeLayout layout_giaiTri = dialog.findViewById(R.id.layout_giaiTri);\r\n        RelativeLayout layout_dienGiaDung = dialog.findViewById(R.id.layout_dienGiaDung);\r\n        ImageView icon_close = dialog.findViewById(R.id.icon_close);\r\n\r\n        icon_close.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n        layout_giaiTri.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucGiaiTriActivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        layout_dienGiaDung.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(MainActivity.this, \"Id : \" + id + \" NAme : \" + name, Toast.LENGTH_SHORT).show();\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucDienMayActivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        layout_batDongSan.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(MainActivity.this, \"Id : \" + id + \" NAme : \" + name, Toast.LENGTH_SHORT).show();\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucBDSActivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        layout_XeCo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(MainActivity.this, \"Id : \" + id + \" NAme : \" + name, Toast.LENGTH_SHORT).show();\r\n\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucXeCoActivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        layout_thoiTrang.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucThoiTrangAcrivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        layout_dienTu.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(MainActivity.this, \"Id : \" + id + \" NAme : \" + name, Toast.LENGTH_SHORT).show();\r\n                Intent intent = new Intent(getApplicationContext(), chonDanhMucDoDienTuActivity.class);\r\n                Bundle bundle = new Bundle();\r\n                bundle.putString(\"Name\", name);\r\n                bundle.putInt(\"Id\", id);\r\n                intent.putExtras(bundle);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        dialog.show();\r\n    }\r\n\r\n    private void initUi() {\r\n        bottomNavigationView = findViewById(R.id.bottomNavigationView);\r\n        floatingActionButton = findViewById(R.id.fab);\r\n        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragmentTrangChu).commit();\r\n        broadcast = new Broadcast();\r\n    }\r\n\r\n    public static void showDiaLogWarning(Context context, String text) {\r\n        final AlertDialog.Builder alertDialog = new AlertDialog.Builder(context);\r\n        alertDialog.setMessage(text).setTitle(\"Warning\").setIcon(R.drawable.ic_warning)\r\n                .setNegativeButton(\"Ok\", null);\r\n        alertDialog.show();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        IntentFilter intentFilter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        registerReceiver(broadcast, intentFilter);\r\n        super.onStart();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        unregisterReceiver(broadcast);\r\n        super.onStop();\r\n    }\r\n\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/MainActivity.java b/app/src/main/java/com/example/duan1/MainActivity.java
--- a/app/src/main/java/com/example/duan1/MainActivity.java	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ b/app/src/main/java/com/example/duan1/MainActivity.java	(date 1671690127911)
@@ -83,7 +83,8 @@
         floatingActionButton.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View view) {
-//        currentUser = mAuth.getCurrentUser();
+                mAuth = FirebaseAuth.getInstance();
+                currentUser = mAuth.getCurrentUser();
 
                 if (currentUser != null) {
 
@@ -129,10 +130,22 @@
 
     }
 
+    @Override
+    protected void onResume() {
+        super.onResume();
+        getUser();
+    }
+
     private void getUser() {
         List<Users> mListUser = new ArrayList<>();
-
+        mAuth = FirebaseAuth.getInstance();
+        currentUser = mAuth.getCurrentUser();
+        if(currentUser == null){
+            return;
+        }
+        myRef = database.getReference("Users");
         String email = currentUser.getEmail();
+
         myRef.addValueEventListener(new ValueEventListener() {
             @Override
             public void onDataChange(@NonNull DataSnapshot snapshot) {
@@ -288,5 +301,4 @@
     }
 
 
-
 }
Index: app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1.Adapter;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.duan1.MainActivity;\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.dagTinGiaiTriActivity;\r\nimport com.example.duan1.dangTinBDSActivity;\r\nimport com.example.duan1.dangTinBDSDatActivity;\r\nimport com.example.duan1.dangTinBDSPhongTroActivity;\r\nimport com.example.duan1.dangTinThoiTrangActivity;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.giaiTriNews;\r\nimport com.example.duan1.model.historyNews;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.text.NumberFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\npublic class historyNewsAdapter extends RecyclerView.Adapter<historyNewsAdapter.HolderView>  {\r\n    private Context mContext;\r\n    private List<historyNews> listHistory;\r\n    private List<String> listChild = new ArrayList<>();\r\n    private List<String> listChild1 = new ArrayList<>();\r\n    private List<String> listChild2 = new ArrayList<>();\r\n    private String title_News;\r\n    private int id;\r\n    private MainActivity mainActivity;\r\n\r\n    DatabaseReference myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"GiaiTri\");\r\n    DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"BDS\");\r\n    DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"ThoiTrang\");\r\n\r\n    public historyNewsAdapter(Context mContext, MainActivity mainActivity, List<historyNews> listHistory) {\r\n        this.mContext = mContext;\r\n        this.listHistory =listHistory;\r\n        this.mainActivity = mainActivity;\r\n        notifyDataSetChanged();\r\n    }\r\npublic void setFilter(List<historyNews> listFilter){\r\n        this.listHistory = listFilter;\r\n        notifyDataSetChanged();\r\n}\r\n\r\n    @NonNull\r\n    @Override\r\n    public HolderView onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_quan_ly_tin_dang, parent, false);\r\n\r\n        return new HolderView(view);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull HolderView holder,final int position) {\r\n        historyNews giaiTriNews =  listHistory.get(position);\r\n        String tenDanhMuc = giaiTriNews.getTenDanhMuc();\r\n        String Title_Post = giaiTriNews.getTitle_historyNews();\r\n        Locale localeEN = new Locale(\"en\", \"EN\");\r\n        NumberFormat en = NumberFormat.getInstance(localeEN);\r\n        listChild1();\r\n        listChild2();\r\n        listChild3();\r\n        holder.title_historyNews.setText(giaiTriNews.getTitle_historyNews());\r\n        holder.desc_historyNews.setText(giaiTriNews.getDesc_historyNews());\r\n        holder.time_historyNews.setText(giaiTriNews.getTime_historyNews());\r\n        String strImage = giaiTriNews.getImage();\r\n        Picasso.with(mContext)\r\n                .load(strImage)\r\n                .placeholder(R.drawable.ic_message)\r\n                .error(R.drawable.ic_message)\r\n                .into(holder.imgSP);\r\n        holder.icon_option.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                XoaTin(giaiTriNews.getTitle_historyNews());\r\n//                System.out.println(giaiTriNews.getTitle_historyNews());\r\n            }\r\n        });\r\n        int id = giaiTriNews.getId();\r\n        holder.layout_item.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                if(tenDanhMuc.equals(\"Quần áo\") || tenDanhMuc.equals(\"Đồng hồ\") || tenDanhMuc.equals(\"Giày dép\") ||tenDanhMuc.equals(\"Túi xách\")\r\n                || tenDanhMuc.equals(\"Nước hoa\") ){\r\n                    Intent intent = new Intent(mContext , dangTinThoiTrangActivity.class);\r\n                    intent.putExtra(\"title1\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n\r\n                    mContext.startActivity(intent);\r\n                }else if(tenDanhMuc.equals(\"Phòng trọ\")) {\r\n                    Intent intent = new Intent(mContext , dangTinBDSPhongTroActivity.class);\r\n                    intent.putExtra(\"title1\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    mContext.startActivity(intent);\r\n                }else if(tenDanhMuc.equals(\"Đất\")) {\r\n                    Intent intent = new Intent(mContext , dangTinBDSDatActivity.class);\r\n                    intent.putExtra(\"title\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    intent.putExtra(\"id\", id);\r\n                    mContext.startActivity(intent);\r\n                }else if(tenDanhMuc.equals(\"Văn Phòng\")\r\n                        || tenDanhMuc.equalsIgnoreCase(\"Nhà ở\")\r\n                        || tenDanhMuc.equalsIgnoreCase(\"Chung cư\")){\r\n                    Intent intent = new Intent(mContext , dangTinBDSActivity.class);\r\n                    intent.putExtra(\"title\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    mContext.startActivity(intent);\r\n                }else {\r\n                    Intent intent = new Intent(mContext , dagTinGiaiTriActivity.class);\r\n                    intent.putExtra(\"title\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    mContext.startActivity(intent);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    @Override\r\n    public int getItemCount() {\r\n        if (listHistory != null) {\r\n            return listHistory.size();\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\nprivate void XoaTin(String title){\r\n    ProgressDialog progressDialog = new ProgressDialog(mainActivity);\r\n    progressDialog.show();\r\n        myData.addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                giaiTriNews giaiTriNew = snapshot.getValue(giaiTriNews.class);\r\n                if(giaiTriNew.getTitle().equals(title)){\r\n                    String id = String.valueOf(giaiTriNew.getId());\r\n                        myData.child(id).removeValue();\r\n                        Toast.makeText(mContext.getApplicationContext(), \"Đã xóa Tin\", Toast.LENGTH_SHORT).show();\r\n                    progressDialog.dismiss();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n\r\n        myData1.addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                BDSNews bdsNews = snapshot.getValue(BDSNews.class);\r\n                if(bdsNews.getTitle().equals(title)){\r\n                    String id = String.valueOf(bdsNews.getId());\r\n                    myData1.child(id).removeValue();\r\n                    notifyDataSetChanged();\r\n                    Toast.makeText(mContext.getApplicationContext(), \"Đã xóa Tin\", Toast.LENGTH_SHORT).show();\r\n                    progressDialog.dismiss();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        myData2.addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                thoiTrangNews thoiTrangNews = snapshot.getValue(com.example.duan1.model.thoiTrangNews.class);\r\n                if(thoiTrangNews.getTitlePost().equals(title)){\r\n                    String id = String.valueOf(thoiTrangNews.getId());\r\n                    myData2.child(id).removeValue();\r\n                    notifyDataSetChanged();\r\n                    Toast.makeText(mContext, \"Xóa Thành công\", Toast.LENGTH_SHORT).show();\r\n                    progressDialog.dismiss();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n}\r\n\r\n    public class HolderView extends RecyclerView.ViewHolder {\r\n        private TextView title_historyNews, desc_historyNews, time_historyNews;\r\n        private ImageView icon_option, imgSP;\r\n    private RelativeLayout layout_item;\r\n        public HolderView(@NonNull View itemView) {\r\n            super(itemView);\r\n            title_historyNews = itemView.findViewById(R.id.title_historyNews);\r\n            desc_historyNews = itemView.findViewById(R.id.desc_historyNews);\r\n            time_historyNews = itemView.findViewById(R.id.time_historyNews);\r\n            icon_option = itemView.findViewById(R.id.icon_option);\r\n            layout_item = itemView.findViewById(R.id.layout_item);\r\n            imgSP = itemView.findViewById(R.id.imgTinDang);\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    private void suaTin() {\r\n    }\r\n\r\n    private List<String> listChild1() {\r\n        listChild.add(new String(\"Nhạc cụ\"));\r\n        listChild.add(new String(\"Sách\"));\r\n        listChild.add(new String(\"Đồ thể thao, Dã ngoại\"));\r\n        listChild.add(new String(\"Đồ sưu tầm  ,Đồ cổ\"));\r\n        listChild.add(new String(\"Thiết bị chơi game\"));\r\n        listChild.add(new String(\"Sở thích khác\"));\r\n\r\n        return listChild;\r\n    }\r\n\r\n    private List<String> listChild2() {\r\n        listChild1.add(new String(\"Quần áo\"));\r\n        listChild1.add(new String(\"Đồng hồ\"));\r\n        listChild1.add(new String(\"Giày dép\"));\r\n        listChild1.add(new String(\"Túi xách\"));\r\n        listChild1.add(new String(\"Nước hoa\"));\r\n        listChild1.add(new String(\"Phụ kiện khác\"));\r\n\r\n        return listChild1;\r\n    }\r\n\r\n    private List<String> listChild3() {\r\n        listChild2.add(new String(\"Chung cư\"));\r\n        listChild2.add(new String(\"Nhà ở\"));\r\n        listChild2.add(new String(\"Đất\"));\r\n        listChild2.add(new String(\"Văn Phòng\"));\r\n        listChild2.add(new String(\"Phòng trọ\"));\r\n\r\n        return listChild2;\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java b/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java
--- a/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ b/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java	(date 1671690177853)
@@ -1,8 +1,13 @@
 package com.example.duan1.Adapter;
 
+import static com.example.duan1.Fragment.FragmentQuanLiTin.idUser;
+import static com.example.duan1.MainActivity.id;
+
+import android.annotation.SuppressLint;
 import android.app.ProgressDialog;
 import android.content.Context;
 import android.content.Intent;
+import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
@@ -15,6 +20,8 @@
 import androidx.annotation.Nullable;
 import androidx.recyclerview.widget.RecyclerView;
 
+import com.bumptech.glide.Glide;
+import com.example.duan1.Fragment.FragmentQuanLiTin;
 import com.example.duan1.MainActivity;
 import com.example.duan1.R;
 import com.example.duan1.dagTinGiaiTriActivity;
@@ -31,6 +38,7 @@
 import com.google.firebase.database.DatabaseError;
 import com.google.firebase.database.DatabaseReference;
 import com.google.firebase.database.FirebaseDatabase;
+import com.google.firebase.database.ValueEventListener;
 import com.squareup.picasso.Picasso;
 
 import java.text.NumberFormat;
@@ -44,13 +52,11 @@
     private List<String> listChild = new ArrayList<>();
     private List<String> listChild1 = new ArrayList<>();
     private List<String> listChild2 = new ArrayList<>();
-    private String title_News;
-    private int id;
+
     private MainActivity mainActivity;
+    private String name = FragmentQuanLiTin.nameUser;
 
-    DatabaseReference myData = FirebaseDatabase.getInstance().getReference("Tin").child("GiaiTri");
-    DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference("Tin").child("BDS");
-    DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference("Tin").child("ThoiTrang");
+    DatabaseReference myData = FirebaseDatabase.getInstance().getReference("Tin");
 
     public historyNewsAdapter(Context mContext, MainActivity mainActivity, List<historyNews> listHistory) {
         this.mContext = mContext;
@@ -58,10 +64,7 @@
         this.mainActivity = mainActivity;
         notifyDataSetChanged();
     }
-public void setFilter(List<historyNews> listFilter){
-        this.listHistory = listFilter;
-        notifyDataSetChanged();
-}
+
 
     @NonNull
     @Override
@@ -71,14 +74,11 @@
         return new HolderView(view);
     }
 
-
     @Override
-    public void onBindViewHolder(@NonNull HolderView holder,final int position) {
+    public void onBindViewHolder(@NonNull HolderView holder, int position) {
         historyNews giaiTriNews =  listHistory.get(position);
         String tenDanhMuc = giaiTriNews.getTenDanhMuc();
         String Title_Post = giaiTriNews.getTitle_historyNews();
-        Locale localeEN = new Locale("en", "EN");
-        NumberFormat en = NumberFormat.getInstance(localeEN);
         listChild1();
         listChild2();
         listChild3();
@@ -86,19 +86,26 @@
         holder.desc_historyNews.setText(giaiTriNews.getDesc_historyNews());
         holder.time_historyNews.setText(giaiTriNews.getTime_historyNews());
         String strImage = giaiTriNews.getImage();
-        Picasso.with(mContext)
-                .load(strImage)
-                .placeholder(R.drawable.ic_message)
-                .error(R.drawable.ic_message)
-                .into(holder.imgSP);
+        Glide.with(mContext).load(strImage).into(holder.imgSP);
         holder.icon_option.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View view) {
                 XoaTin(giaiTriNews.getTitle_historyNews());
-//                System.out.println(giaiTriNews.getTitle_historyNews());
+
             }
         });
         int id = giaiTriNews.getId();
+//        if(name.equals("Admin")){
+//            holder.layout_item.setOnClickListener(new View.OnClickListener() {
+//                @Override
+//                public void onClick(View view) {
+//                    Intent intent = new Intent(mContext , chitiet_news.class);
+//                    intent.putExtra("title" , giaiTriNews.getTitle_historyNews());
+//                    mContext.startActivity(intent);
+//                }
+//            });
+//        }else {
+
         holder.layout_item.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View view) {
@@ -108,35 +115,44 @@
                     Intent intent = new Intent(mContext , dangTinThoiTrangActivity.class);
                     intent.putExtra("title1" , Title_Post);
                     intent.putExtra("tenDanhMuc" , tenDanhMuc);
-
+                    intent.putExtra("idTT", id);
                     mContext.startActivity(intent);
                 }else if(tenDanhMuc.equals("Phòng trọ")) {
                     Intent intent = new Intent(mContext , dangTinBDSPhongTroActivity.class);
                     intent.putExtra("title1" , Title_Post);
                     intent.putExtra("tenDanhMuc" , tenDanhMuc);
+                    intent.putExtra("idBDS", id);
                     mContext.startActivity(intent);
                 }else if(tenDanhMuc.equals("Đất")) {
                     Intent intent = new Intent(mContext , dangTinBDSDatActivity.class);
                     intent.putExtra("title" , Title_Post);
                     intent.putExtra("tenDanhMuc" , tenDanhMuc);
-                    intent.putExtra("id", id);
+                    intent.putExtra("idD", id);
                     mContext.startActivity(intent);
                 }else if(tenDanhMuc.equals("Văn Phòng")
                         || tenDanhMuc.equalsIgnoreCase("Nhà ở")
                         || tenDanhMuc.equalsIgnoreCase("Chung cư")){
+
                     Intent intent = new Intent(mContext , dangTinBDSActivity.class);
                     intent.putExtra("title" , Title_Post);
                     intent.putExtra("tenDanhMuc" , tenDanhMuc);
+                    intent.putExtra("idBDS", id);
                     mContext.startActivity(intent);
-                }else {
+                }else if(mainActivity.name.equals("Admin")){
+                    Toast.makeText(mContext, "đang chờ layout", Toast.LENGTH_SHORT).show();
+                }
+                else {
                     Intent intent = new Intent(mContext , dagTinGiaiTriActivity.class);
                     intent.putExtra("title" , Title_Post);
                     intent.putExtra("tenDanhMuc" , tenDanhMuc);
+                    intent.putExtra("idGT", id);
                     mContext.startActivity(intent);
                 }
             }
         });
+//        }
     }
+
     @Override
     public int getItemCount() {
         if (listHistory != null) {
@@ -149,6 +165,7 @@
     ProgressDialog progressDialog = new ProgressDialog(mainActivity);
     progressDialog.show();
         myData.addChildEventListener(new ChildEventListener() {
+            @SuppressLint("NotifyDataSetChanged")
             @Override
             public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
                 giaiTriNews giaiTriNew = snapshot.getValue(giaiTriNews.class);
@@ -157,77 +174,7 @@
                         myData.child(id).removeValue();
                         Toast.makeText(mContext.getApplicationContext(), "Đã xóa Tin", Toast.LENGTH_SHORT).show();
                     progressDialog.dismiss();
-                }
-            }
-
-            @Override
-            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
-
-            }
-
-            @Override
-            public void onChildRemoved(@NonNull DataSnapshot snapshot) {
-
-            }
-
-            @Override
-            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
-
-            }
-
-            @Override
-            public void onCancelled(@NonNull DatabaseError error) {
-
-            }
-        });
-
-
-
-
-        myData1.addChildEventListener(new ChildEventListener() {
-            @Override
-            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
-                BDSNews bdsNews = snapshot.getValue(BDSNews.class);
-                if(bdsNews.getTitle().equals(title)){
-                    String id = String.valueOf(bdsNews.getId());
-                    myData1.child(id).removeValue();
-                    notifyDataSetChanged();
-                    Toast.makeText(mContext.getApplicationContext(), "Đã xóa Tin", Toast.LENGTH_SHORT).show();
-                    progressDialog.dismiss();
-                }
-            }
-
-            @Override
-            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
-
-            }
-
-            @Override
-            public void onChildRemoved(@NonNull DataSnapshot snapshot) {
-
-            }
-
-            @Override
-            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
-
-            }
-
-            @Override
-            public void onCancelled(@NonNull DatabaseError error) {
-
-            }
-        });
-
-        myData2.addChildEventListener(new ChildEventListener() {
-            @Override
-            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
-                thoiTrangNews thoiTrangNews = snapshot.getValue(com.example.duan1.model.thoiTrangNews.class);
-                if(thoiTrangNews.getTitlePost().equals(title)){
-                    String id = String.valueOf(thoiTrangNews.getId());
-                    myData2.child(id).removeValue();
-                    notifyDataSetChanged();
-                    Toast.makeText(mContext, "Xóa Thành công", Toast.LENGTH_SHORT).show();
-                    progressDialog.dismiss();
+
                 }
             }
 
Index: app/src/main/java/com/example/duan1/Register.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\r\npackage com.example.duan1;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport android.app.ProgressDialog;\r\nimport android.content.IntentFilter;\r\nimport android.net.ConnectivityManager;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.text.Editable;\r\nimport android.text.TextUtils;\r\nimport android.text.TextWatcher;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Broadcast.Broadcast;\r\nimport com.example.duan1.model.Users;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.regex.Pattern;\r\n\r\n\r\npublic class Register extends AppCompatActivity {\r\n\r\n    private ImageView imgBack;\r\n\r\n    private TextView tvTermsAndUse, tvLogin ;\r\n    private EditText edtNumberPhone, edtPassword, edtName;\r\n    private Button btnRegister;\r\n\r\n    private ProgressDialog progressDialog;\r\n    private FirebaseAuth mAuth;\r\n    private Broadcast broadcast;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_register);\r\n        initUi();\r\n        initListenerClick();\r\n\r\n    }\r\n\r\n    public static boolean isValidEmail(CharSequence target) {\r\n        return (!TextUtils.isEmpty(target) && Pattern.\r\n                compile(\"^[A-Za-z0-9]+[A-Za-z0-9]*@[A-Za-z0-9]+(\\\\\\\\.[A-Za-z0-9]+)$\").\r\n                matcher(target).matches());\r\n    }\r\n\r\n  private void initUi() {\r\n        imgBack = findViewById(R.id.img_back_register);\r\n        tvLogin = findViewById(R.id.tv_login);\r\n        tvTermsAndUse = findViewById(R.id.tv_terms_of_use);\r\n        edtNumberPhone = findViewById(R.id.edt_numberphone_register);\r\n        edtPassword = findViewById(R.id.edt_password_register);\r\n        edtName = findViewById(R.id.edt_name_register);\r\n        btnRegister = findViewById(R.id.btn_register);\r\n\r\n        // Initialize Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n        progressDialog = new ProgressDialog(this);\r\n\r\n        broadcast = new Broadcast();\r\n    }\r\n\r\n    private void initListenerClick(){\r\n\r\n        //click back\r\n        imgBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code back\r\n                finish();\r\n            }\r\n        });\r\n\r\n        //click reset password\r\n        tvTermsAndUse.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code reset password\r\n                Toast.makeText(Register.this, \"Terms and use from Login\", Toast.LENGTH_SHORT).show();\r\n\r\n            }\r\n        });\r\n\r\n        //click login\r\n        tvLogin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code register\r\n                finish();\r\n            }\r\n        });\r\n\r\n        edtName.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n                if (edtNumberPhone.getText().toString().trim().isEmpty() ||\r\n                        edtPassword.getText().toString().trim().isEmpty() ||\r\n                        edtName.getText().toString().trim().isEmpty()){\r\n                    btnRegister.setBackgroundResource(R.drawable.bg_button_login);\r\n                    return;\r\n                }else{\r\n                    btnRegister.setBackgroundResource(R.drawable.bg_button_register);\r\n                    //code register\r\n                    OnRegister(getListData());\r\n                }\r\n            }\r\n        });\r\n\r\n        edtNumberPhone.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n                if (edtNumberPhone.getText().toString().trim().isEmpty() ||\r\n                        edtPassword.getText().toString().trim().isEmpty() ||\r\n                        edtName.getText().toString().trim().isEmpty()){\r\n                    btnRegister.setBackgroundResource(R.drawable.bg_button_login);\r\n                    return;\r\n                }else{\r\n                    btnRegister.setBackgroundResource(R.drawable.bg_button_register);\r\n                    //code register\r\n                    OnRegister(getListData());\r\n                }\r\n            }\r\n        });\r\n\r\n        edtPassword.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n                if (edtNumberPhone.getText().toString().trim().isEmpty() ||\r\n                        edtPassword.getText().toString().trim().isEmpty() ||\r\n                        edtName.getText().toString().trim().isEmpty()){\r\n                    btnRegister.setBackgroundResource(R.drawable.bg_button_login);\r\n                    return;\r\n                }else{\r\n                    btnRegister.setBackgroundResource(R.drawable.bg_button_register);\r\n                    //code Register\r\n                    OnRegister(getListData());\r\n                }\r\n            }\r\n        });\r\n\r\n        tvTermsAndUse.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code terms of use\r\n                Toast.makeText(Register.this, \"Terms of use from register\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void OnRegister(List<Users> listUsers){\r\n\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference();\r\n\r\n\r\n        //click register\r\n        btnRegister.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code register\r\n                String name = edtName.getText().toString().trim();\r\n                if (name.isEmpty() || edtName == null){\r\n                    edtName.setError(\"Tên không được để trống\");\r\n                    return;\r\n                }\r\n                String email = edtNumberPhone.getText().toString().trim();\r\n                if (isValidEmail(email)){\r\n                    edtNumberPhone.setError(\"Email không đúng!\");\r\n                    return;\r\n                }\r\n                String password = edtPassword.getText().toString().trim();\r\n                if (password.length() < 6 ){\r\n                    edtPassword.setError(\"Mật khẩu phải bằng hoặc trên 6 kí tự\");\r\n                    return;\r\n                }\r\n                progressDialog.setTitle(\"Xin chờ...!\");\r\n                progressDialog.show();\r\n                mAuth.createUserWithEmailAndPassword(email, password)\r\n                        .addOnCompleteListener(Register.this, new OnCompleteListener<AuthResult>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<AuthResult> task) {\r\n\r\n                                if (task.isSuccessful()) {\r\n                                    Handler handler = new Handler();\r\n                                    handler.postDelayed(new Runnable() {\r\n                                        @Override\r\n                                        public void run() {\r\n\r\n                                        // Sign in success, update UI with the signed-in user's information\r\n\r\n                                        int size = listUsers.size();\r\n                                        int IDcuoi = -1;\r\n                                        if (size != 0){\r\n                                            IDcuoi = listUsers.get(size-1).getId();\r\n                                        }\r\n\r\n                                                Users users = new Users(IDcuoi+1, name, email,\r\n                                                        \" \", \" \", password, \" \",\r\n                                                        \" \", \" \", \" \");\r\n//                                        Users users = new Users(IDcuoi+1, name, email,\r\n//                                                \" \", \" \", password);\r\n\r\n                                        myRef.child(\"Users/\"+(IDcuoi+1)).setValue(users);\r\n                                        Toast.makeText(Register.this, \"Tạo tài khoản thành công!\",\r\n                                                Toast.LENGTH_SHORT).show();\r\n                                        finish();\r\n                                        progressDialog.dismiss();\r\n                                        }\r\n                                    },1500);\r\n\r\n                                } else {\r\n                                    Toast.makeText(Register.this, \"Tạo tài khoản thất bại!\",\r\n                                            Toast.LENGTH_SHORT).show();\r\n                                    System.out.println(task.getException());\r\n                                }\r\n\r\n\r\n\r\n\r\n\r\n\r\n                            }\r\n                        });\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private List<Users> getListData() {\r\n        List<Users> list  = new ArrayList<>();\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference(\"Users\");\r\n        myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                list.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren() ){\r\n                    Users users = snapshot1.getValue(Users.class);\r\n                    list.add(users);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Toast.makeText(Register.this, \"Tải thông tin tài khoản thất bại!\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return list;\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        IntentFilter intentFilter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        registerReceiver(broadcast, intentFilter);\r\n        super.onStart();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        unregisterReceiver(broadcast);\r\n        super.onStop();\r\n    }\r\n}\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/Register.java b/app/src/main/java/com/example/duan1/Register.java
--- a/app/src/main/java/com/example/duan1/Register.java	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ b/app/src/main/java/com/example/duan1/Register.java	(date 1671690127932)
@@ -11,6 +11,7 @@
 import android.text.Editable;
 import android.text.TextUtils;
 import android.text.TextWatcher;
+import android.util.Log;
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
@@ -254,13 +255,8 @@
                                 } else {
                                     Toast.makeText(Register.this, "Tạo tài khoản thất bại!",
                                             Toast.LENGTH_SHORT).show();
-                                    System.out.println(task.getException());
+                                    progressDialog.dismiss();
                                 }
-
-
-
-
-
 
                             }
                         });
Index: app/src/main/java/com/example/duan1/model/Tin.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/model/Tin.java b/app/src/main/java/com/example/duan1/model/Tin.java
new file mode 100644
--- /dev/null	(date 1671690121860)
+++ b/app/src/main/java/com/example/duan1/model/Tin.java	(date 1671690121860)
@@ -0,0 +1,23 @@
+package com.example.duan1.model;
+
+public class Tin {
+
+    private int id;
+    private String title;
+    private String description;
+    private double price;
+    private String dientich ;
+    private String adress;
+    private String tenphankhu;
+    private String loaidat;
+    private String direction;
+    private String soPhongNgu;
+    private String soPhongWc;
+    private int idUser;
+    private String nameuser;
+    private String tendanhmuc;
+    private String danhmucchinh;
+    private String date;
+    private String image;
+
+}
Index: app/src/main/java/com/example/duan1/Fragment/FragmentThem.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1.Fragment;\r\n\r\nimport static android.app.Activity.RESULT_OK;\r\n\r\nimport static com.facebook.FacebookSdk.getApplicationContext;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.activity.result.ActivityResult;\r\nimport androidx.activity.result.ActivityResultCallback;\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentManager;\r\nimport androidx.fragment.app.FragmentTransaction;\r\n\r\nimport android.os.Handler;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Account;\r\nimport com.example.duan1.Login;\r\nimport com.example.duan1.MainActivity;\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.Register;\r\nimport com.example.duan1.model.Users;\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.FacebookSdk;\r\nimport com.facebook.GraphRequest;\r\nimport com.facebook.GraphResponse;\r\nimport com.facebook.login.LoginManager;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.navigation.NavigationView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\npublic class FragmentThem extends Fragment implements NavigationView.OnNavigationItemSelectedListener{\r\n\r\n    private ImageView imgLoginRegister;\r\n    private TextView tvEmail;\r\n\r\n    private MainActivity mainActivity;\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseUser currentUser;\r\n    private NavigationView nav;\r\n    private ProgressDialog progressDialog;\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    private GoogleSignInOptions gso;\r\n    GoogleSignInAccount acct;\r\n\r\n    private ActivityResultLauncher<Intent> mActivityResultLauncher = registerForActivityResult(\r\n            new ActivityResultContracts.StartActivityForResult(), new ActivityResultCallback<ActivityResult>() {\r\n                @Override\r\n                public void onActivityResult(ActivityResult result) {\r\n                    if (result.getResultCode() == RESULT_OK){\r\n                            Restart();\r\n                    }\r\n                }\r\n            });\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_them, container, false);\r\n        mainActivity = (MainActivity) getActivity();\r\n        initUi(view);\r\n        AccessToken accessToken = AccessToken.getCurrentAccessToken();\r\n        boolean isLoggedIn = accessToken != null && !accessToken.isExpired();\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN).requestEmail().build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(mainActivity, gso);\r\n        acct = GoogleSignIn.getLastSignedInAccount(mainActivity);\r\n\r\n        if (isLoggedIn || currentUser != null || acct != null){\r\n            progressDialog.setTitle(\"Đang tải dữ liệu\");\r\n            progressDialog.show();\r\n            getDataUser(isLoggedIn);\r\n            new Handler().postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    initListenerClick();\r\n                    progressDialog.dismiss();\r\n                }\r\n            },500);\r\n            nav.setItemIconTintList(null);\r\n            nav.setNavigationItemSelectedListener((NavigationView.OnNavigationItemSelectedListener) this );\r\n\r\n        }else{\r\n            getDataUser(isLoggedIn);\r\n            initListenerClick();\r\n            nav.setItemIconTintList(null);\r\n            nav.setNavigationItemSelectedListener((NavigationView.OnNavigationItemSelectedListener) this );\r\n        }\r\n\r\n\r\n\r\n        return view;\r\n    }\r\n\r\n    private String checkname(String s){\r\n\r\n        if (s.isEmpty()){\r\n            return null;\r\n        }\r\n        String name = \"\";\r\n        if (s.length() > 25){\r\n            for (String s1: s.split(\"\")){\r\n                name+=s1;\r\n                if (name.length() == 25){\r\n                    break;\r\n                }\r\n            };\r\n            return name+\"...\";\r\n        }\r\n\r\n        return s;\r\n    }\r\n\r\n    private void initUi(View view) {\r\n        imgLoginRegister = view.findViewById(R.id.img_login_register);\r\n        tvEmail = view.findViewById(R.id.tvEmail);\r\n        nav = view.findViewById(R.id.nav_them);\r\n\r\n        progressDialog = new ProgressDialog(mainActivity);\r\n        mAuth = FirebaseAuth.getInstance();\r\n        currentUser = mAuth.getCurrentUser();\r\n    }\r\n\r\n    private void initListenerClick() {\r\n        imgLoginRegister.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //check đã đăng nhập hay chưa\r\n                currentUser = mAuth.getCurrentUser();\r\n                // Check if user is signed in (non-null) and update UI accordingly.\r\n                AccessToken accessToken = AccessToken.getCurrentAccessToken();\r\n                boolean isLoggedIn = accessToken != null && !accessToken.isExpired();\r\n\r\n                if(currentUser != null || isLoggedIn || acct != null){\r\n                    startActivity(new Intent(mainActivity, Account.class));\r\n                }else {\r\n                    mActivityResultLauncher.launch(new Intent(mainActivity, Login.class));\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n\r\n        int id = item.getItemId();\r\n\r\n        if(id == R.id.logout){\r\n\r\n            progressDialog.setTitle(\"Đang đăng xuất...\");\r\n            progressDialog.show();\r\n            Handler handler = new Handler();\r\n            handler.postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    progressDialog.dismiss();\r\n                    FirebaseAuth.getInstance().signOut();\r\n                    LoginManager.getInstance().logOut();\r\n                    AccessToken.setCurrentAccessToken(null);\r\n                    mGoogleSignInClient.signOut();\r\n                    Toast.makeText(mainActivity, \"Đăng xuất thành công\", Toast.LENGTH_SHORT).show();\r\n                    Restart();\r\n\r\n                }\r\n            }, 2000);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private void Restart(){\r\n        FragmentManager fragmentManager;\r\n        fragmentManager = mainActivity.getSupportFragmentManager();\r\n        FragmentTransaction fragmentTransaction1 = fragmentManager.beginTransaction();\r\n        fragmentTransaction1.replace(R.id.container, new FragmentThem());\r\n        fragmentTransaction1.detach(FragmentThem.this);\r\n        fragmentTransaction1.commit();\r\n    }\r\n\r\n    private void updateUI() {\r\n\r\n        String email = currentUser.getEmail();\r\n        List<Users> mListUser = new ArrayList<>();\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference(\"Users\");\r\n        myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                mListUser.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren()){\r\n                    Users user = snapshot1.getValue(Users.class);\r\n                    mListUser.add(user);\r\n                }\r\n                for (int i = 0; i < mListUser.size(); i++){\r\n                    if (mListUser.get(i).getEmail().equals(email)){\r\n                        if (mListUser.get(i).getName() == null){\r\n\r\n                        }\r\n                        tvEmail.setText(checkname(mListUser.get(i).getName()));\r\n                        String strImage = mListUser.get(i).getImage().trim();\r\n                        if (strImage.isEmpty()){\r\n                            return;\r\n                        }\r\n                        Picasso.with(mainActivity)\r\n                                .load(strImage)\r\n                                .placeholder(R.drawable.user_icon)\r\n                                .error(R.drawable.user_icon)\r\n                                .into(imgLoginRegister);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void getProfileUserFB() {\r\n        AccessToken accessToken = AccessToken.getCurrentAccessToken();\r\n        GraphRequest request = GraphRequest.newMeRequest(\r\n                accessToken,\r\n                new GraphRequest.GraphJSONObjectCallback() {\r\n                    @Override\r\n                    public void onCompleted(JSONObject object, GraphResponse response) {\r\n                                try {\r\n                                    String fullName = object.getString(\"name\");\r\n                                    String image = object.getJSONObject(\"picture\").getJSONObject(\"data\").getString(\"url\");\r\n                                    tvEmail.setText(checkname(fullName));\r\n                                    Picasso.with(mainActivity)\r\n                                            .load(image)\r\n                                            .placeholder(R.drawable.user_icon)\r\n                                            .error(R.drawable.user_icon)\r\n                                            .into(imgLoginRegister);\r\n\r\n                                } catch (JSONException e) {\r\n                                    Toast.makeText(mainActivity, \"Lỗi login fb\", Toast.LENGTH_SHORT).show();\r\n                                }\r\n\r\n                    }\r\n                });\r\n\r\n        Bundle parameters = new Bundle();\r\n        parameters.putString(\"fields\", \"id,name,link,picture.type(large)\");\r\n        request.setParameters(parameters);\r\n        request.executeAsync();\r\n    }\r\n\r\n    private void getProfileUserGoogle() {\r\n        String personName = acct.getDisplayName();\r\n        String personEmail = acct.getEmail();\r\n        String personPhoto = String.valueOf(acct.getPhotoUrl());\r\n        if ((personName+\" (\"+personEmail+\")\").length() > 30 ){\r\n            tvEmail.setText(checkname(personName+\" (\"+personEmail+\")\"));\r\n        }else{\r\n            tvEmail.setText(personName+\" (\"+personEmail+\")\");\r\n        }\r\n\r\n        Picasso.with(mainActivity)\r\n                .load(personPhoto)\r\n                .placeholder(R.drawable.user_icon)\r\n                .error(R.drawable.user_icon)\r\n                .into(imgLoginRegister);\r\n\r\n    }\r\n\r\n    private void getDataUser(boolean isLoggedIn){\r\n        //facebook\r\n        if (isLoggedIn){\r\n            getProfileUserFB();\r\n        }\r\n\r\n        //firebase\r\n        if (currentUser != null){\r\n            updateUI();\r\n        }\r\n\r\n        //google\r\n        if (acct != null) {\r\n            getProfileUserGoogle();\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/Fragment/FragmentThem.java b/app/src/main/java/com/example/duan1/Fragment/FragmentThem.java
--- a/app/src/main/java/com/example/duan1/Fragment/FragmentThem.java	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ b/app/src/main/java/com/example/duan1/Fragment/FragmentThem.java	(date 1671690237887)
@@ -1,27 +1,18 @@
 package com.example.duan1.Fragment;
 
 import static android.app.Activity.RESULT_OK;
-
-import static com.facebook.FacebookSdk.getApplicationContext;
-
 import android.app.ProgressDialog;
-import android.content.Context;
 import android.content.Intent;
-import android.net.Uri;
 import android.os.Bundle;
-
 import androidx.activity.result.ActivityResult;
 import androidx.activity.result.ActivityResultCallback;
 import androidx.activity.result.ActivityResultLauncher;
 import androidx.activity.result.contract.ActivityResultContracts;
 import androidx.annotation.NonNull;
-import androidx.annotation.Nullable;
 import androidx.fragment.app.Fragment;
 import androidx.fragment.app.FragmentManager;
 import androidx.fragment.app.FragmentTransaction;
-
 import android.os.Handler;
-import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.MenuItem;
 import android.view.View;
@@ -29,15 +20,12 @@
 import android.widget.ImageView;
 import android.widget.TextView;
 import android.widget.Toast;
-
 import com.example.duan1.Account;
 import com.example.duan1.Login;
 import com.example.duan1.MainActivity;
 import com.example.duan1.R;
-import com.example.duan1.Register;
 import com.example.duan1.model.Users;
 import com.facebook.AccessToken;
-import com.facebook.FacebookSdk;
 import com.facebook.GraphRequest;
 import com.facebook.GraphResponse;
 import com.facebook.login.LoginManager;
@@ -45,8 +33,6 @@
 import com.google.android.gms.auth.api.signin.GoogleSignInAccount;
 import com.google.android.gms.auth.api.signin.GoogleSignInClient;
 import com.google.android.gms.auth.api.signin.GoogleSignInOptions;
-import com.google.android.gms.tasks.OnCompleteListener;
-import com.google.android.gms.tasks.Task;
 import com.google.android.material.navigation.NavigationView;
 import com.google.firebase.auth.FirebaseAuth;
 import com.google.firebase.auth.FirebaseUser;
@@ -55,17 +41,13 @@
 import com.google.firebase.database.DatabaseReference;
 import com.google.firebase.database.FirebaseDatabase;
 import com.google.firebase.database.ValueEventListener;
-import com.google.firebase.storage.FirebaseStorage;
 import com.squareup.picasso.Picasso;
-
 import org.json.JSONException;
 import org.json.JSONObject;
-
 import java.util.ArrayList;
 import java.util.List;
 
-
-public class FragmentThem extends Fragment implements NavigationView.OnNavigationItemSelectedListener{
+public class FragmentThem extends Fragment implements NavigationView.OnNavigationItemSelectedListener {
 
     private ImageView imgLoginRegister;
     private TextView tvEmail;
@@ -83,8 +65,8 @@
             new ActivityResultContracts.StartActivityForResult(), new ActivityResultCallback<ActivityResult>() {
                 @Override
                 public void onActivityResult(ActivityResult result) {
-                    if (result.getResultCode() == RESULT_OK){
-                            Restart();
+                    if (result.getResultCode() == RESULT_OK) {
+                        Restart();
                     }
                 }
             });
@@ -100,7 +82,7 @@
         mGoogleSignInClient = GoogleSignIn.getClient(mainActivity, gso);
         acct = GoogleSignIn.getLastSignedInAccount(mainActivity);
 
-        if (isLoggedIn || currentUser != null || acct != null){
+        if (isLoggedIn || currentUser != null || acct != null) {
             progressDialog.setTitle("Đang tải dữ liệu");
             progressDialog.show();
             getDataUser(isLoggedIn);
@@ -110,36 +92,36 @@
                     initListenerClick();
                     progressDialog.dismiss();
                 }
-            },500);
+            }, 500);
             nav.setItemIconTintList(null);
-            nav.setNavigationItemSelectedListener((NavigationView.OnNavigationItemSelectedListener) this );
+            nav.setNavigationItemSelectedListener((NavigationView.OnNavigationItemSelectedListener) this);
 
-        }else{
+        } else {
             getDataUser(isLoggedIn);
             initListenerClick();
             nav.setItemIconTintList(null);
-            nav.setNavigationItemSelectedListener((NavigationView.OnNavigationItemSelectedListener) this );
+            nav.setNavigationItemSelectedListener((NavigationView.OnNavigationItemSelectedListener) this);
         }
 
 
-
         return view;
     }
 
-    private String checkname(String s){
+    private String checkname(String s) {
 
-        if (s.isEmpty()){
+        if (s.isEmpty()) {
             return null;
         }
         String name = "";
-        if (s.length() > 25){
-            for (String s1: s.split("")){
-                name+=s1;
-                if (name.length() == 25){
+        if (s.length() > 25) {
+            for (String s1 : s.split("")) {
+                name += s1;
+                if (name.length() == 25) {
                     break;
                 }
-            };
-            return name+"...";
+            }
+            ;
+            return name + "...";
         }
 
         return s;
@@ -165,9 +147,9 @@
                 AccessToken accessToken = AccessToken.getCurrentAccessToken();
                 boolean isLoggedIn = accessToken != null && !accessToken.isExpired();
 
-                if(currentUser != null || isLoggedIn || acct != null){
+                if (currentUser != null || isLoggedIn || acct != null) {
                     startActivity(new Intent(mainActivity, Account.class));
-                }else {
+                } else {
                     mActivityResultLauncher.launch(new Intent(mainActivity, Login.class));
                 }
 
@@ -180,7 +162,7 @@
 
         int id = item.getItemId();
 
-        if(id == R.id.logout){
+        if (id == R.id.logout) {
 
             progressDialog.setTitle("Đang đăng xuất...");
             progressDialog.show();
@@ -199,11 +181,23 @@
                 }
             }, 2000);
         }
+//        else if (id == R.id.listUser) {
+//            String name = tvEmail.getText().toString();
+//
+//            if (name.equals("Admin")) {
+//                Intent intent = new Intent(getContext(), listUserActivity.class);
+//                intent.putExtra("name" , name);
+//                startActivity(intent);
+//            }else {
+//               MainActivity.showDiaLogWarning(getContext() , "Chức năng chỉ dành cho Admin");
+//            }
+//
+//        }
 
         return true;
     }
 
-    private void Restart(){
+    private void Restart() {
         FragmentManager fragmentManager;
         fragmentManager = mainActivity.getSupportFragmentManager();
         FragmentTransaction fragmentTransaction1 = fragmentManager.beginTransaction();
@@ -222,18 +216,18 @@
             @Override
             public void onDataChange(@NonNull DataSnapshot snapshot) {
                 mListUser.clear();
-                for (DataSnapshot snapshot1 : snapshot.getChildren()){
+                for (DataSnapshot snapshot1 : snapshot.getChildren()) {
                     Users user = snapshot1.getValue(Users.class);
                     mListUser.add(user);
                 }
-                for (int i = 0; i < mListUser.size(); i++){
-                    if (mListUser.get(i).getEmail().equals(email)){
-                        if (mListUser.get(i).getName() == null){
+                for (int i = 0; i < mListUser.size(); i++) {
+                    if (mListUser.get(i).getEmail().equals(email)) {
+                        if (mListUser.get(i).getName() == null) {
 
                         }
                         tvEmail.setText(checkname(mListUser.get(i).getName()));
                         String strImage = mListUser.get(i).getImage().trim();
-                        if (strImage.isEmpty()){
+                        if (strImage.isEmpty()) {
                             return;
                         }
                         Picasso.with(mainActivity)
@@ -262,19 +256,19 @@
                 new GraphRequest.GraphJSONObjectCallback() {
                     @Override
                     public void onCompleted(JSONObject object, GraphResponse response) {
-                                try {
-                                    String fullName = object.getString("name");
-                                    String image = object.getJSONObject("picture").getJSONObject("data").getString("url");
-                                    tvEmail.setText(checkname(fullName));
-                                    Picasso.with(mainActivity)
-                                            .load(image)
-                                            .placeholder(R.drawable.user_icon)
-                                            .error(R.drawable.user_icon)
-                                            .into(imgLoginRegister);
+                        try {
+                            String fullName = object.getString("name");
+                            String image = object.getJSONObject("picture").getJSONObject("data").getString("url");
+                            tvEmail.setText(checkname(fullName));
+                            Picasso.with(mainActivity)
+                                    .load(image)
+                                    .placeholder(R.drawable.user_icon)
+                                    .error(R.drawable.user_icon)
+                                    .into(imgLoginRegister);
 
-                                } catch (JSONException e) {
-                                    Toast.makeText(mainActivity, "Lỗi login fb", Toast.LENGTH_SHORT).show();
-                                }
+                        } catch (JSONException e) {
+                            Toast.makeText(mainActivity, "Lỗi login fb", Toast.LENGTH_SHORT).show();
+                        }
 
                     }
                 });
@@ -289,10 +283,10 @@
         String personName = acct.getDisplayName();
         String personEmail = acct.getEmail();
         String personPhoto = String.valueOf(acct.getPhotoUrl());
-        if ((personName+" ("+personEmail+")").length() > 30 ){
-            tvEmail.setText(checkname(personName+" ("+personEmail+")"));
-        }else{
-            tvEmail.setText(personName+" ("+personEmail+")");
+        if ((personName + " (" + personEmail + ")").length() > 30) {
+            tvEmail.setText(checkname(personName + " (" + personEmail + ")"));
+        } else {
+            tvEmail.setText(personName + " (" + personEmail + ")");
         }
 
         Picasso.with(mainActivity)
@@ -303,14 +297,14 @@
 
     }
 
-    private void getDataUser(boolean isLoggedIn){
+    private void getDataUser(boolean isLoggedIn) {
         //facebook
-        if (isLoggedIn){
+        if (isLoggedIn) {
             getProfileUserFB();
         }
 
         //firebase
-        if (currentUser != null){
+        if (currentUser != null) {
             updateUI();
         }
 
Index: app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1.Fragment;\r\n\r\n\r\nimport android.content.Context;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.DividerItemDecoration;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.os.Handler;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.historyNewsAdapter;\r\nimport com.example.duan1.MainActivity;\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.NewsTrangChu;\r\nimport com.example.duan1.model.giaiTriNews;\r\nimport com.example.duan1.model.historyNews;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class FragmentQuanLiTin extends Fragment {\r\n    private RecyclerView rcvQuanLyTinDang;\r\n    private historyNewsAdapter historyNewsAdapter;\r\n    private List<historyNews> listHistoryNews;\r\n    private List<historyNews> listHistoryNewsBDS;\r\n    private List<historyNews> listHistoryNewsGT;\r\n    private List<historyNews> listHistoryNewsTT;\r\n\r\n    private Context mContext;\r\n\r\n    private String nameUser;\r\n    private int idUser;\r\n    private List<String> listChild = new ArrayList<>();\r\n    private List<String> listChild1 = new ArrayList<>();\r\n    private List<String> listChild2 = new ArrayList<>();\r\n\r\n    int id = 0;\r\n\r\n    DatabaseReference myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"GiaiTri\");\r\n    DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"BDS\");\r\n    DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"ThoiTrang\");\r\n    MainActivity mainActivity;\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_quan_li_tin, container, false);\r\n\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        if (user != null){\r\n            rcvQuanLyTinDang = view.findViewById(R.id.rcvQuanLyTin);\r\n            mainActivity = (MainActivity) getActivity();\r\n            listHistoryNews = new ArrayList<>();\r\n            listHistoryNewsBDS = new ArrayList<>();\r\n            listHistoryNewsTT = new ArrayList<>();\r\n            listHistoryNewsGT = new ArrayList<>();\r\n            idUser = mainActivity.id;\r\n            nameUser = mainActivity.name;\r\n//            listChild1();\r\n//            listChild2();\r\n//            listChild3();\r\n            getListHistoryNews();\r\n            new Handler().postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    historyNewsAdapter = new historyNewsAdapter(getContext(),mainActivity, listHistoryNews);\r\n                    rcvQuanLyTinDang.setLayoutManager(new LinearLayoutManager(getContext()));\r\n                    rcvQuanLyTinDang.setAdapter(historyNewsAdapter);\r\n//                    RecyclerView.ItemDecoration decoration = new DividerItemDecoration(getContext() , DividerItemDecoration.VERTICAL);\r\n//                    rcvQuanLyTinDang.addItemDecoration(decoration);\r\n                }\r\n            }, 500);\r\n        }\r\n\r\n        return view;\r\n    }\r\n\r\n    public void getListHistoryNews() {\r\n        myData.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                listHistoryNewsGT.clear();\r\n                for (DataSnapshot snapshot1: snapshot.getChildren()){\r\n                    giaiTriNews giaiTriNews = snapshot1.getValue(giaiTriNews.class);\r\n\r\n                    if (giaiTriNews.getIdUser() == idUser) {\r\n                        listHistoryNews.add(new historyNews(id, giaiTriNews.getTitle(),\r\n                                giaiTriNews.getDescription(), giaiTriNews.getDate(),\r\n                                giaiTriNews.getTenDanhMuc(),giaiTriNews.getImage()));\r\n                        id++;\r\n                    }\r\n                }\r\n//                addData();\r\n            }\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n        myData2.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                listHistoryNewsTT.clear();\r\n                for (DataSnapshot snapshot1: snapshot.getChildren()){\r\n                    thoiTrangNews thoiTrangNews = snapshot1.getValue(com.example.duan1.model.thoiTrangNews.class);\r\n                    if (thoiTrangNews.getIdUser() == idUser) {\r\n                        listHistoryNews.add(new historyNews(id, thoiTrangNews.getTitlePost(),\r\n                                thoiTrangNews.getDescriptionPost(), thoiTrangNews.getDate(),\r\n                                thoiTrangNews.getTenDanhMuc(),thoiTrangNews.getImage()));\r\n                        id++;\r\n                    }\r\n\r\n                }\r\n//                addData();\r\n            }\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n            myData1.addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    listHistoryNewsBDS.clear();\r\n                    for (DataSnapshot snapshot1: snapshot.getChildren()){\r\n                        BDSNews bdsNews = snapshot1.getValue(BDSNews.class);\r\n                        if (bdsNews.getIdUser() == idUser) {\r\n                            listHistoryNews.add(new historyNews(id, bdsNews.getTitle(),\r\n                                    bdsNews.getDescription() , bdsNews.getDate(),\r\n                                    bdsNews.getTenDanhMuc(), bdsNews.getImage()));\r\n                            id++;\r\n                        }\r\n                    }\r\n//                    addData();\r\n                }\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n    }\r\n\r\n\r\n//    private void addData(){\r\n//        for (int i = 0; i < listHistoryNewsBDS.size(); i++){\r\n//            listHistoryNews.add(listHistoryNewsBDS.get(i));\r\n//        }\r\n//        for (int i = 0; i < listHistoryNewsGT.size(); i++){\r\n//\r\n//            listHistoryNews.add(listHistoryNewsGT.get(i));\r\n//        }\r\n//        for (int i = 0; i < listHistoryNewsTT.size(); i++){\r\n//            listHistoryNews.add(listHistoryNewsTT.get(i));\r\n//        }\r\n//    }\r\n\r\n//    private List<String> listChild1() {\r\n//        listChild.add(new String(\"Nhạc cụ\"));\r\n//        listChild.add(new String(\"Sách\"));\r\n//        listChild.add(new String(\"Đồ thể thao, Dã ngoại\"));\r\n//        listChild.add(new String(\"Đồ sưu tầm  ,Đồ cổ\"));\r\n//        listChild.add(new String(\"Thiết bị chơi game\"));\r\n//        listChild.add(new String(\"Sở thích khác\"));\r\n//\r\n//        return listChild;\r\n//    }\r\n//\r\n//    private List<String> listChild2() {\r\n//        listChild1.add(new String(\"Quần áo\"));\r\n//        listChild1.add(new String(\"Đồng hồ\"));\r\n//        listChild1.add(new String(\"Giày dép\"));\r\n//        listChild1.add(new String(\"Túi xách\"));\r\n//        listChild1.add(new String(\"Nước hoa\"));\r\n//        listChild1.add(new String(\"Phụ kiện khác\"));\r\n//\r\n//        return listChild1;\r\n//    }\r\n//\r\n//    private List<String> listChild3() {\r\n//        listChild2.add(new String(\"Chung cư\"));\r\n//        listChild2.add(new String(\"Nhà ở\"));\r\n//        listChild2.add(new String(\"Đất\"));\r\n//        listChild2.add(new String(\"Văn Phòng\"));\r\n//        listChild2.add(new String(\"Phòng trọ\"));\r\n//\r\n//        return listChild2;\r\n//    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java b/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java
--- a/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ b/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java	(date 1671690104017)
@@ -7,6 +7,8 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 import androidx.fragment.app.Fragment;
+import androidx.fragment.app.FragmentManager;
+import androidx.fragment.app.FragmentTransaction;
 import androidx.recyclerview.widget.DividerItemDecoration;
 import androidx.recyclerview.widget.LinearLayoutManager;
 import androidx.recyclerview.widget.RecyclerView;
@@ -22,6 +24,7 @@
 import com.example.duan1.R;
 import com.example.duan1.model.BDSNews;
 import com.example.duan1.model.NewsTrangChu;
+import com.example.duan1.model.Users;
 import com.example.duan1.model.giaiTriNews;
 import com.example.duan1.model.historyNews;
 import com.example.duan1.model.thoiTrangNews;
@@ -38,6 +41,7 @@
 import com.google.firebase.storage.StorageReference;
 
 import java.util.ArrayList;
+import java.util.Collections;
 import java.util.List;
 
 public class FragmentQuanLiTin extends Fragment {
@@ -50,17 +54,18 @@
 
     private Context mContext;
 
-    private String nameUser;
-    private int idUser;
+    public static String nameUser;
+    public static int idUser;
+    private String name;
     private List<String> listChild = new ArrayList<>();
     private List<String> listChild1 = new ArrayList<>();
     private List<String> listChild2 = new ArrayList<>();
+    private FirebaseUser currentUser;
+    private FirebaseAuth mAuth;
+    private FirebaseDatabase database;
+    private DatabaseReference myRef;
 
-    int id = 0;
-
-    DatabaseReference myData = FirebaseDatabase.getInstance().getReference("Tin").child("GiaiTri");
-    DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference("Tin").child("BDS");
-    DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference("Tin").child("ThoiTrang");
+    DatabaseReference myData = FirebaseDatabase.getInstance().getReference("Tin");
     MainActivity mainActivity;
     @Override
     public View onCreateView(LayoutInflater inflater, ViewGroup container,
@@ -75,85 +80,132 @@
             listHistoryNewsBDS = new ArrayList<>();
             listHistoryNewsTT = new ArrayList<>();
             listHistoryNewsGT = new ArrayList<>();
-            idUser = mainActivity.id;
-            nameUser = mainActivity.name;
-//            listChild1();
-//            listChild2();
-//            listChild3();
+
+            mAuth = FirebaseAuth.getInstance();
+            currentUser = mAuth.getCurrentUser();
+            database = FirebaseDatabase.getInstance();
+            myRef = database.getReference("Users");
+            if (currentUser != null) {
+                getUser();
+            }else {
+                Toast.makeText(mContext, "current User Null", Toast.LENGTH_SHORT).show();
+            }
+
             getListHistoryNews();
+            historyNewsAdapter = new historyNewsAdapter(getContext(),mainActivity, listHistoryNews);
             new Handler().postDelayed(new Runnable() {
                 @Override
                 public void run() {
-                    historyNewsAdapter = new historyNewsAdapter(getContext(),mainActivity, listHistoryNews);
                     rcvQuanLyTinDang.setLayoutManager(new LinearLayoutManager(getContext()));
                     rcvQuanLyTinDang.setAdapter(historyNewsAdapter);
-//                    RecyclerView.ItemDecoration decoration = new DividerItemDecoration(getContext() , DividerItemDecoration.VERTICAL);
-//                    rcvQuanLyTinDang.addItemDecoration(decoration);
                 }
             }, 500);
+
+
         }
 
         return view;
     }
-
-    public void getListHistoryNews() {
-        myData.addValueEventListener(new ValueEventListener() {
+    private void getUser() {
+        mAuth = FirebaseAuth.getInstance();
+        currentUser = mAuth.getCurrentUser();
+        if (currentUser == null){
+            return;
+        }
+        List<Users> mListUser = new ArrayList<>();
+        String email = currentUser.getEmail();
+        myRef.addValueEventListener(new ValueEventListener() {
             @Override
             public void onDataChange(@NonNull DataSnapshot snapshot) {
-                listHistoryNewsGT.clear();
-                for (DataSnapshot snapshot1: snapshot.getChildren()){
-                    giaiTriNews giaiTriNews = snapshot1.getValue(giaiTriNews.class);
+                mListUser.clear();
+                for (DataSnapshot snapshot1 : snapshot.getChildren()) {
+                    Users user = snapshot1.getValue(Users.class);
+                    mListUser.add(user);
+                }
 
-                    if (giaiTriNews.getIdUser() == idUser) {
-                        listHistoryNews.add(new historyNews(id, giaiTriNews.getTitle(),
-                                giaiTriNews.getDescription(), giaiTriNews.getDate(),
-                                giaiTriNews.getTenDanhMuc(),giaiTriNews.getImage()));
-                        id++;
+                for (int i = 0; i < mListUser.size(); i++) {
+                    if (mListUser.get(i).getEmail().equals(email)) {
+                        nameUser = (mListUser.get(i).getName());
+                        idUser = mListUser.get(i).getId();
+                        name = nameUser;
                     }
                 }
-//                addData();
             }
+
             @Override
             public void onCancelled(@NonNull DatabaseError error) {
-
+                Toast.makeText(getContext(), "Error get Id and Name from Firebase", Toast.LENGTH_SHORT).show();
             }
         });
-
-        myData2.addValueEventListener(new ValueEventListener() {
-            @Override
-            public void onDataChange(@NonNull DataSnapshot snapshot) {
-                listHistoryNewsTT.clear();
-                for (DataSnapshot snapshot1: snapshot.getChildren()){
-                    thoiTrangNews thoiTrangNews = snapshot1.getValue(com.example.duan1.model.thoiTrangNews.class);
-                    if (thoiTrangNews.getIdUser() == idUser) {
-                        listHistoryNews.add(new historyNews(id, thoiTrangNews.getTitlePost(),
-                                thoiTrangNews.getDescriptionPost(), thoiTrangNews.getDate(),
-                                thoiTrangNews.getTenDanhMuc(),thoiTrangNews.getImage()));
-                        id++;
-                    }
-
-                }
-//                addData();
-            }
-            @Override
-            public void onCancelled(@NonNull DatabaseError error) {
-
-            }
-        });
-            myData1.addValueEventListener(new ValueEventListener() {
+    }
+    public void getListHistoryNews() {
+//        myData.addValueEventListener(new ValueEventListener() {
+//            @Override
+//            public void onDataChange(@NonNull DataSnapshot snapshot) {
+//                listHistoryNewsGT.clear();
+//                for (DataSnapshot snapshot1: snapshot.getChildren()){
+//                    giaiTriNews giaiTriNews = snapshot1.getValue(giaiTriNews.class);
+//
+//                    if (giaiTriNews.getIdUser() == idUser) {
+//                        listHistoryNews.add(new historyNews(id, giaiTriNews.getTitle(),
+//                                giaiTriNews.getDescription(), giaiTriNews.getDate(),
+//                                giaiTriNews.getTenDanhMuc(),giaiTriNews.getImage()));
+//                        id++;
+//                    }else if(name.equals("Admin")){
+//                        listHistoryNews.add(new historyNews(id, giaiTriNews.getTitle(), giaiTriNews.getDescription() , giaiTriNews.getDate(), giaiTriNews.getTenDanhMuc()));
+//                        id++;
+//
+//                    }
+//                }
+//            }
+//            @Override
+//            public void onCancelled(@NonNull DatabaseError error) {
+//
+//            }
+//        });
+//
+//        myData2.addValueEventListener(new ValueEventListener() {
+//            @Override
+//            public void onDataChange(@NonNull DataSnapshot snapshot) {
+//                listHistoryNewsTT.clear();
+//                for (DataSnapshot snapshot1: snapshot.getChildren()){
+//                    thoiTrangNews thoiTrangNews = snapshot1.getValue(com.example.duan1.model.thoiTrangNews.class);
+//                    if (thoiTrangNews.getIdUser() == idUser) {
+//                        listHistoryNews.add(new historyNews(id, thoiTrangNews.getTitlePost(),
+//                                thoiTrangNews.getDescriptionPost(), thoiTrangNews.getDate(),
+//                                thoiTrangNews.getTenDanhMuc(),thoiTrangNews.getImage()));
+//                        id++;
+//                    }else if(name.equals("Admin")){
+//                        listHistoryNews.add(new historyNews(id, thoiTrangNews.getTitlePost(), thoiTrangNews.getDescriptionPost() , thoiTrangNews.getDate(), thoiTrangNews.getTenDanhMuc()));
+//                        id++;
+//
+//                    }
+//
+//                }
+////                addData();
+//            }
+//            @Override
+//            public void onCancelled(@NonNull DatabaseError error) {
+//
+//            }
+//        });
+            myData.addValueEventListener(new ValueEventListener() {
                 @Override
                 public void onDataChange(@NonNull DataSnapshot snapshot) {
-                    listHistoryNewsBDS.clear();
+                    listHistoryNews.clear();
                     for (DataSnapshot snapshot1: snapshot.getChildren()){
                         BDSNews bdsNews = snapshot1.getValue(BDSNews.class);
                         if (bdsNews.getIdUser() == idUser) {
-                            listHistoryNews.add(new historyNews(id, bdsNews.getTitle(),
+                            listHistoryNews.add(new historyNews(bdsNews.getId(), bdsNews.getTitle(),
                                     bdsNews.getDescription() , bdsNews.getDate(),
                                     bdsNews.getTenDanhMuc(), bdsNews.getImage()));
-                            id++;
+                        }else if(name.equals("Admin")){
+                            listHistoryNews.add(new historyNews(bdsNews.getId(), bdsNews.getTitle(), bdsNews.getDescription() , bdsNews.getDate(), bdsNews.getTenDanhMuc()));
                         }
                     }
-//                    addData();
+                    Collections.reverse(listHistoryNews);
+                    historyNewsAdapter.notifyDataSetChanged();
+
                 }
                 @Override
                 public void onCancelled(@NonNull DatabaseError error) {
@@ -163,50 +215,4 @@
     }
 
 
-//    private void addData(){
-//        for (int i = 0; i < listHistoryNewsBDS.size(); i++){
-//            listHistoryNews.add(listHistoryNewsBDS.get(i));
-//        }
-//        for (int i = 0; i < listHistoryNewsGT.size(); i++){
-//
-//            listHistoryNews.add(listHistoryNewsGT.get(i));
-//        }
-//        for (int i = 0; i < listHistoryNewsTT.size(); i++){
-//            listHistoryNews.add(listHistoryNewsTT.get(i));
-//        }
-//    }
-
-//    private List<String> listChild1() {
-//        listChild.add(new String("Nhạc cụ"));
-//        listChild.add(new String("Sách"));
-//        listChild.add(new String("Đồ thể thao, Dã ngoại"));
-//        listChild.add(new String("Đồ sưu tầm  ,Đồ cổ"));
-//        listChild.add(new String("Thiết bị chơi game"));
-//        listChild.add(new String("Sở thích khác"));
-//
-//        return listChild;
-//    }
-//
-//    private List<String> listChild2() {
-//        listChild1.add(new String("Quần áo"));
-//        listChild1.add(new String("Đồng hồ"));
-//        listChild1.add(new String("Giày dép"));
-//        listChild1.add(new String("Túi xách"));
-//        listChild1.add(new String("Nước hoa"));
-//        listChild1.add(new String("Phụ kiện khác"));
-//
-//        return listChild1;
-//    }
-//
-//    private List<String> listChild3() {
-//        listChild2.add(new String("Chung cư"));
-//        listChild2.add(new String("Nhà ở"));
-//        listChild2.add(new String("Đất"));
-//        listChild2.add(new String("Văn Phòng"));
-//        listChild2.add(new String("Phòng trọ"));
-//
-//        return listChild2;
-//    }
-
-
 }
\ No newline at end of file
Index: app/src/main/java/com/example/duan1/model/giaiTriNews.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1.model;\r\n\r\npublic class giaiTriNews {\r\n    private int id;\r\n    private String title;\r\n    private String description;\r\n    private String address;\r\n    private double price;\r\n    private String typeProduct;\r\n    private int idUser;\r\n    private String nameUser;\r\n    private String tenDanhMuc;\r\n    private String date;\r\n    private String image;\r\n\r\n    public giaiTriNews() {\r\n    }\r\n\r\n    public giaiTriNews(int id, String title, String description, String address, double price,\r\n                       String typeProduct, int idUser, String nameUser, String tenDanhMuc, String date) {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.description = description;\r\n        this.address = address;\r\n        this.price = price;\r\n        this.typeProduct = typeProduct;\r\n        this.idUser = idUser;\r\n        this.nameUser = nameUser;\r\n        this.tenDanhMuc = tenDanhMuc;\r\n        this.date = date;\r\n    }\r\n\r\n    public giaiTriNews(int id, String title, String description, String address, double price,\r\n                       String typeProduct, int idUser, String nameUser, String tenDanhMuc,\r\n                       String date, String image) {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.description = description;\r\n        this.address = address;\r\n        this.price = price;\r\n        this.typeProduct = typeProduct;\r\n        this.idUser = idUser;\r\n        this.nameUser = nameUser;\r\n        this.tenDanhMuc = tenDanhMuc;\r\n        this.date = date;\r\n        this.image = image;\r\n    }\r\n\r\n    public String getDate() {\r\n        return date;\r\n    }\r\n\r\n    public void setDate(String date) {\r\n        this.date = date;\r\n    }\r\n\r\n    public String getTenDanhMuc() {\r\n        return tenDanhMuc;\r\n    }\r\n\r\n    public void setTenDanhMuc(String tenDanhMuc) {\r\n        this.tenDanhMuc = tenDanhMuc;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public String getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public void setAddress(String address) {\r\n        this.address = address;\r\n    }\r\n\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(double price) {\r\n        this.price = price;\r\n    }\r\n\r\n    public String getTypeProduct() {\r\n        return typeProduct;\r\n    }\r\n\r\n    public void setTypeProduct(String typeProduct) {\r\n        this.typeProduct = typeProduct;\r\n    }\r\n\r\n    public int getIdUser() {\r\n        return idUser;\r\n    }\r\n\r\n    public void setIdUser(int idUser) {\r\n        this.idUser = idUser;\r\n    }\r\n\r\n    public String getNameUser() {\r\n        return nameUser;\r\n    }\r\n\r\n    public void setNameUser(String nameUser) {\r\n        this.nameUser = nameUser;\r\n    }\r\n\r\n    public String getImage() {\r\n        return image;\r\n    }\r\n\r\n    public void setImage(String image) {\r\n        this.image = image;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/model/giaiTriNews.java b/app/src/main/java/com/example/duan1/model/giaiTriNews.java
--- a/app/src/main/java/com/example/duan1/model/giaiTriNews.java	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ b/app/src/main/java/com/example/duan1/model/giaiTriNews.java	(date 1671690121873)
@@ -10,29 +10,14 @@
     private int idUser;
     private String nameUser;
     private String tenDanhMuc;
+    private String danhmucchinh;
     private String date;
     private String image;
 
     public giaiTriNews() {
     }
 
-    public giaiTriNews(int id, String title, String description, String address, double price,
-                       String typeProduct, int idUser, String nameUser, String tenDanhMuc, String date) {
-        this.id = id;
-        this.title = title;
-        this.description = description;
-        this.address = address;
-        this.price = price;
-        this.typeProduct = typeProduct;
-        this.idUser = idUser;
-        this.nameUser = nameUser;
-        this.tenDanhMuc = tenDanhMuc;
-        this.date = date;
-    }
-
-    public giaiTriNews(int id, String title, String description, String address, double price,
-                       String typeProduct, int idUser, String nameUser, String tenDanhMuc,
-                       String date, String image) {
+    public giaiTriNews(int id, String title, String description, String address, double price, String typeProduct, int idUser, String nameUser, String tenDanhMuc, String danhmucchinh, String date, String image) {
         this.id = id;
         this.title = title;
         this.description = description;
@@ -42,6 +27,7 @@
         this.idUser = idUser;
         this.nameUser = nameUser;
         this.tenDanhMuc = tenDanhMuc;
+        this.danhmucchinh = danhmucchinh;
         this.date = date;
         this.image = image;
     }
@@ -133,4 +119,12 @@
     public void setImage(String image) {
         this.image = image;
     }
+
+    public String getDanhmucchinh() {
+        return danhmucchinh;
+    }
+
+    public void setDanhmucchinh(String danhmucchinh) {
+        this.danhmucchinh = danhmucchinh;
+    }
 }
Index: app/src/main/java/com/example/duan1/EditAccount.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1;\r\n\r\nimport android.Manifest;\r\nimport android.app.Activity;\r\nimport android.app.Dialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Color;\r\nimport android.graphics.drawable.ColorDrawable;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.provider.MediaStore;\r\nimport android.view.Gravity;\r\nimport android.view.View;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.result.ActivityResult;\r\nimport androidx.activity.result.ActivityResultCallback;\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\nimport androidx.annotation.NonNull;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.example.duan1.Broadcast.Broadcast;\r\nimport com.example.duan1.model.Users;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.textfield.TextInputLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.gun0912.tedpermission.PermissionListener;\r\nimport com.gun0912.tedpermission.normal.TedPermission;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.List;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\npublic class EditAccount extends AppCompatActivity {\r\n\r\n    private static final int MY_REQUEST_CODE = 12;\r\n\r\n    private TextView tvName, tvSdt, tvEmail, tvLocation, tvCCCD, tvPassword, tvSex, tvDateOfBirth\r\n            , tvHoaDon;\r\n    private CircleImageView imgImage;\r\n    private RelativeLayout imgAvatar;\r\n    private Button imgName;\r\n    private ImageButton btnBack;\r\n    private Bitmap bitmapselect;\r\n    private String strImage = \" \";\r\n    private FirebaseAuth auth;\r\n    private FirebaseUser userr;\r\n    private ProgressDialog progressDialog;\r\n    private List<Users> mListUser;\r\n    private String oldPasswordUser = \" \";\r\n    private Broadcast broadcast;\r\n\r\n    private ActivityResultLauncher<Intent> mActivityResultLauncher = registerForActivityResult(\r\n            new ActivityResultContracts.StartActivityForResult(),\r\n            new ActivityResultCallback<ActivityResult>() {\r\n                @Override\r\n                public void onActivityResult(ActivityResult result) {\r\n\r\n                    if(result.getResultCode()== Activity.RESULT_OK){\r\n                        //there are no request codes\r\n                        Intent data = result.getData();\r\n                        if(data == null){\r\n                            return;\r\n                        }\r\n                        Uri uri = data.getData();\r\n                        try {\r\n                            Calendar calendar = Calendar.getInstance();\r\n\r\n                            bitmapselect = MediaStore.Images.Media.getBitmap(getContentResolver(),uri);\r\n\r\n                            progressDialog.setTitle(\"Đang tải ảnh lên...!\");\r\n                            progressDialog.show();\r\n\r\n                            FirebaseStorage storage = FirebaseStorage.getInstance();\r\n                            StorageReference storageRef = storage.getReference();\r\n                            StorageReference mountainsRef = storageRef.child(\"AvatarUser/\"+userr.getEmail()+\"/image\"+calendar.getTimeInMillis());\r\n                            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n                            bitmapselect.compress(Bitmap.CompressFormat.JPEG, 100, baos);\r\n                            byte[] dataImage = baos.toByteArray();\r\n\r\n                            UploadTask uploadTask = mountainsRef.putBytes(dataImage);\r\n                            uploadTask.addOnFailureListener(new OnFailureListener() {\r\n                                @Override\r\n                                public void onFailure(@NonNull Exception exception) {\r\n                                    // Handle unsuccessful uploads\r\n                                    progressDialog.dismiss();\r\n                                    Toast.makeText(EditAccount.this, \"Lỗi cập nhật hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                                @Override\r\n                                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                                    // taskSnapshot.getMetadata() contains file metadata such as size, content-type, etc.\r\n\r\n                                    mountainsRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                        @Override\r\n                                        public void onSuccess(Uri uri) {\r\n                                            strImage = String.valueOf(uri);\r\n                                            UpdateImageUrl();\r\n                                            progressDialog.dismiss();\r\n                                        }\r\n                                    }).addOnFailureListener(new OnFailureListener() {\r\n                                        @Override\r\n                                        public void onFailure(@NonNull Exception exception) {\r\n                                            // Handle any errors\r\n                                            progressDialog.dismiss();\r\n                                            Toast.makeText(EditAccount.this, \"Lỗi tải URL hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                    });\r\n                                }\r\n                            });\r\n\r\n\r\n                        }catch (IOException e){\r\n                            e.printStackTrace();\r\n                            progressDialog.dismiss();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    );\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_edit_account);\r\n        initUi();\r\n        getDataUser();\r\n        progressDialog.show();\r\n        new Handler().postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                initClickListener();\r\n                progressDialog.dismiss();\r\n            }\r\n        }, 500);\r\n\r\n    }\r\n\r\n    //ánh xạ\r\n    private void initUi() {\r\n        tvName = findViewById(R.id.tv_name_activity_editaccount);\r\n        tvSdt = findViewById(R.id.tv_sdt_activity_editaccount);\r\n        tvLocation = findViewById(R.id.tv_location_activity_editaccount);\r\n        tvCCCD = findViewById(R.id.tv_cccd_activity_editaccount);\r\n        tvPassword = findViewById(R.id.tv_password_activity_editaccount);\r\n        tvSex = findViewById(R.id.tv_sex_activity_editaccount);\r\n        tvDateOfBirth = findViewById(R.id.tv_date_of_birth_activity_editaccount);\r\n        tvHoaDon = findViewById(R.id.tv_xuat_hoa_don_activity_editaccount);\r\n        imgAvatar = findViewById(R.id.img_avatar_activity_editaccount);\r\n        imgImage = findViewById(R.id.img_image);\r\n        imgName = findViewById(R.id.img_name);\r\n        btnBack = findViewById(R.id.imgbtn_back);\r\n\r\n        auth = FirebaseAuth.getInstance();\r\n        userr = auth.getCurrentUser();\r\n\r\n        progressDialog = new ProgressDialog(this);\r\n\r\n        broadcast = new Broadcast();\r\n    }\r\n\r\n    //sự kiện click\r\n    private void initClickListener() {\r\n        imgAvatar.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                requestPermissionsimage();\r\n            }\r\n        });\r\n\r\n        imgName.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog.setTitle(\"Xin chờ!...\");\r\n                progressDialog.show();\r\n                UpdateName();\r\n                progressDialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n        tvSdt.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                setSdt();\r\n            }\r\n        });\r\n\r\n        tvCCCD.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                setCCCD();\r\n            }\r\n        });\r\n\r\n        tvPassword.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                resetPassword();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void resetPassword() {\r\n        final Dialog dialog = new Dialog(EditAccount.this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.dialog_reset_password);\r\n\r\n        Window window = dialog.getWindow();\r\n        if(window == null){\r\n            return;\r\n        }\r\n        dialog.setCancelable(false);\r\n\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        window.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.CENTER;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        //initUi\r\n        EditText edtOldPassword = dialog.findViewById(R.id.edt_dialog_old_password);\r\n        EditText edtNewPassword = dialog.findViewById(R.id.edt_dialog_new_password);\r\n        Button btnUpdate = dialog.findViewById(R.id.btn_dialog_update_password);\r\n        Button btnCancal = dialog.findViewById(R.id.btn_dialog_cancel_reset_password);\r\n\r\n        btnCancal.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnUpdate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                if (userr != null){\r\n                    String strOldPassword = edtOldPassword.getText().toString().trim();\r\n                    String strNewPassword = edtNewPassword.getText().toString().trim();\r\n                    if (strOldPassword.isEmpty() || edtOldPassword == null){\r\n                        edtOldPassword.setError(\"Không được để trống\");\r\n                        return;\r\n                    }\r\n                    if (strNewPassword.isEmpty() || edtNewPassword == null){\r\n                        edtNewPassword.setError(\"Không được để trống\");\r\n                        return;\r\n                    }\r\n                    progressDialog.setTitle(\"Xin chờ...!\");\r\n                    progressDialog.show();\r\n                    if (strOldPassword.equals(oldPasswordUser)){\r\n                        userr.updatePassword(strNewPassword)\r\n                                .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                                    @Override\r\n                                    public void onComplete(@NonNull Task<Void> task) {\r\n                                        if (task.isSuccessful()) {\r\n                                            resetPasswordDatabase(strNewPassword);\r\n                                            dialog.dismiss();\r\n                                            progressDialog.dismiss();\r\n                                        }\r\n                                    }\r\n                                });\r\n                    }else{\r\n                        edtOldPassword.setError(\"Mật khẩu cũ không chính xác!\");\r\n                        progressDialog.dismiss();\r\n                    }\r\n                }\r\n\r\n            }\r\n        });\r\n        dialog.show();\r\n    }\r\n\r\n    @Nullable\r\n    private String checkname(@NonNull String s){\r\n        String name1 = \"\";\r\n        if (s.length() > 20){\r\n            for (String s1: s.split(\"\")){\r\n                name1+=s1;\r\n                if (name1.length() == 20){\r\n                    break;\r\n                }\r\n            }\r\n            return name1+\"...\";\r\n        }\r\n\r\n        return s;\r\n    }\r\n\r\n    private void getDataUser(){\r\n        FirebaseAuth auth = FirebaseAuth.getInstance();\r\n        FirebaseUser user = auth.getCurrentUser();\r\n        String email = user.getEmail();\r\n        mListUser = new ArrayList<>();\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference(\"Users\");\r\n        myRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                mListUser.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren()){\r\n                    Users user = snapshot1.getValue(Users.class);\r\n                    mListUser.add(user);\r\n                    if (user.getEmail().equals(email)){\r\n                        tvName.setText(checkname(user.getName()));\r\n                        String strImage = user.getImage().trim();\r\n                        oldPasswordUser = user.getPassword();\r\n                        if (strImage.isEmpty()){\r\n                            return;\r\n                        }\r\n                        Picasso.with(EditAccount.this)\r\n                                .load(strImage)\r\n                                .placeholder(R.drawable.user_icon)\r\n                                .error(R.drawable.user_icon)\r\n                                .into(imgImage);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void openGallery() {\r\n        Intent intent = new Intent();\r\n        intent.setType(\"image/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        mActivityResultLauncher.launch(Intent.createChooser(intent, \"Select picture\"));\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if(requestCode == MY_REQUEST_CODE){\r\n            if(grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n                openGallery();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void requestPermissionsimage() {\r\n        PermissionListener permissionlistener = new PermissionListener() {\r\n            @Override\r\n            public void onPermissionGranted() {\r\n                openGallery();\r\n            }\r\n\r\n            @Override\r\n            public void onPermissionDenied(List<String> deniedPermissions) {\r\n                Toast.makeText(EditAccount.this, \"Đã từ chối quyền truy cập\\n\" + deniedPermissions.toString(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        };\r\n        TedPermission.create()\r\n                .setPermissionListener(permissionlistener)\r\n                .setDeniedMessage(\"If you reject permission,you can not use this service\\n\\nPlease turn on permissions at [Setting] > [Permission]\")\r\n                .setPermissions(Manifest.permission.CAMERA, Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE)\r\n                .check();\r\n    }\r\n\r\n    private void UpdateImageUrl() {\r\n        if (mListUser.size() == 0){\r\n            return;\r\n        }\r\n        String email = userr.getEmail();\r\n        int index = -1;\r\n        for (int i = 0; i < mListUser.size(); i++){\r\n            if (mListUser.get(i).getEmail().equals(email)){\r\n                index = i;\r\n            }\r\n        }\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference();\r\n        myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"image\").setValue(strImage)\r\n                .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Void> task) {\r\n                        Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    private void UpdateName(){\r\n        if (mListUser.size() == 0){\r\n            finish();\r\n        }\r\n        String email = userr.getEmail();\r\n        String name = tvName.getText().toString().trim();\r\n        int index = -1;\r\n        for (int i = 0; i < mListUser.size(); i++){\r\n            if (mListUser.get(i).getEmail().equals(email)){\r\n                index = i;\r\n            }\r\n        }\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference();\r\n        myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"name\").setValue(name)\r\n                .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Void> task) {\r\n                        Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n    }\r\n\r\n    private void resetPasswordDatabase(String newPassword){\r\n        if (mListUser.size() == 0){\r\n            finish();\r\n        }\r\n        String email = userr.getEmail();\r\n        int index = -1;\r\n        for (int i = 0; i < mListUser.size(); i++){\r\n            if (mListUser.get(i).getEmail().equals(email)){\r\n                index = i;\r\n            }\r\n        }\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        DatabaseReference myRef = database.getReference();\r\n        myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"password\").setValue(newPassword)\r\n                .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Void> task) {\r\n                        Toast.makeText(EditAccount.this, \"Đã cập nhật mật khẩu\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n    }\r\n\r\n    private void setSdt() {\r\n        final Dialog dialog = new Dialog(EditAccount.this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.dialog_edit_account);\r\n\r\n        Window window = dialog.getWindow();\r\n        if(window == null){\r\n            return;\r\n        }\r\n        dialog.setCancelable(false);\r\n\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        window.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.CENTER;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        //anh xa\r\n        TextView tvTitle = dialog.findViewById(R.id.tv_title_dialog);\r\n        EditText edtSdt = dialog.findViewById(R.id.edt_dialog);\r\n        TextInputLayout tilHint = dialog.findViewById(R.id.hint);\r\n        Button btnOk = dialog.findViewById(R.id.btn_them_dialog);\r\n        Button btnCancel = dialog.findViewById(R.id.btn_cancel_dialog);\r\n\r\n        tvTitle.setText(\"Cập nhật số điện thoại\");\r\n        tilHint.setHint(\"Nhập số điện thoại...\");\r\n\r\n        btnCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnOk.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String sdt = edtSdt.getText().toString().trim();\r\n                if (edtSdt == null || sdt.isEmpty()){\r\n                    edtSdt.setError(\"không được để trống!\");\r\n                    return;\r\n                }\r\n                String email = userr.getEmail();\r\n                int index = -1;\r\n                for (int i = 0; i < mListUser.size(); i++){\r\n                    if (mListUser.get(i).getEmail().equals(email)){\r\n                        index = i;\r\n                    }\r\n                }\r\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                DatabaseReference myRef = database.getReference();\r\n                myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"sdt\").setValue(sdt)\r\n                        .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<Void> task) {\r\n                                Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        dialog.show();\r\n    }\r\n\r\n    private void setCCCD() {\r\n        final Dialog dialog = new Dialog(EditAccount.this);\r\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n        dialog.setContentView(R.layout.dialog_edit_account);\r\n\r\n        Window window = dialog.getWindow();\r\n        if(window == null){\r\n            return;\r\n        }\r\n        dialog.setCancelable(false);\r\n\r\n        window.setLayout(WindowManager.LayoutParams.MATCH_PARENT, WindowManager.LayoutParams.WRAP_CONTENT);\r\n        window.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n\r\n        WindowManager.LayoutParams windowAttributes = window.getAttributes();\r\n        windowAttributes.gravity = Gravity.CENTER;\r\n        window.setAttributes(windowAttributes);\r\n\r\n        //anh xa\r\n        TextView tvTitle = dialog.findViewById(R.id.tv_title_dialog);\r\n        EditText edtCCCD = dialog.findViewById(R.id.edt_dialog);\r\n        TextInputLayout tilHint = dialog.findViewById(R.id.hint);\r\n        Button btnOk = dialog.findViewById(R.id.btn_them_dialog);\r\n        Button btnCancel = dialog.findViewById(R.id.btn_cancel_dialog);\r\n\r\n        tvTitle.setText(\"Cập nhật số CMND/CCCD/Hộ chiếu\");\r\n        tilHint.setHint(\"CMND/CCCD/Hộ chiếu...\");\r\n\r\n        btnCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        btnOk.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String cccd = edtCCCD.getText().toString().trim();\r\n                if (edtCCCD == null || cccd.isEmpty()){\r\n                    edtCCCD.setError(\"không được để trống!\");\r\n                    return;\r\n                }\r\n                String email = userr.getEmail();\r\n                int index = -1;\r\n                for (int i = 0; i < mListUser.size(); i++){\r\n                    if (mListUser.get(i).getEmail().equals(email)){\r\n                        index = i;\r\n                    }\r\n                }\r\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                DatabaseReference myRef = database.getReference();\r\n                myRef.child(\"Users\").child(mListUser.get(index).getId()+\"\").child(\"cccd\").setValue(cccd)\r\n                        .addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<Void> task) {\r\n                                Toast.makeText(EditAccount.this, \"Đã xong!\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                dialog.dismiss();\r\n            }\r\n        });\r\n\r\n        dialog.show();\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        IntentFilter intentFilter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        registerReceiver(broadcast, intentFilter);\r\n        super.onStart();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        unregisterReceiver(broadcast);\r\n        super.onStop();\r\n    }\r\n\r\n\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/EditAccount.java b/app/src/main/java/com/example/duan1/EditAccount.java
--- a/app/src/main/java/com/example/duan1/EditAccount.java	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ b/app/src/main/java/com/example/duan1/EditAccount.java	(date 1671690142453)
@@ -144,7 +144,6 @@
                                 }
                             });
 
-
                         }catch (IOException e){
                             e.printStackTrace();
                             progressDialog.dismiss();
@@ -168,7 +167,6 @@
                 progressDialog.dismiss();
             }
         }, 500);
-
     }
 
     //ánh xạ
@@ -240,7 +238,6 @@
                 resetPassword();
             }
         });
-
     }
 
     private void resetPassword() {
Index: app/src/main/java/com/example/duan1/Fragment/FragmentTrangChu.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1.Fragment;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.app.ProgressDialog;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.widget.SearchView;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.DividerItemDecoration;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.os.Handler;\r\nimport android.os.Looper;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Spinner;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.NewsTrangChuAdapter;\r\nimport com.example.duan1.Adapter.rsSearchAdapter;\r\nimport com.example.duan1.Adapter.slidersAdapter;\r\nimport com.example.duan1.MainActivity;\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.NewsTrangChu;\r\nimport com.example.duan1.model.giaiTriNews;\r\nimport com.example.duan1.model.photosSlider;\r\nimport com.example.duan1.model.product_type;\r\nimport com.example.duan1.model.resultSearch;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Timer;\r\nimport java.util.TimerTask;\r\n\r\n\r\nimport me.relex.circleindicator.CircleIndicator;\r\n\r\n\r\npublic class FragmentTrangChu extends Fragment {\r\n    private ViewPager viewPager;\r\n    private CircleIndicator circleIndicator;\r\n    private slidersAdapter slidersAdapter;\r\n    private rsSearchAdapter rsSearchAdapter;\r\n    private List<photosSlider> mListPhoto = new ArrayList<>();\r\n    private Timer mTimer;\r\n    private String loaiTin;\r\n    private SearchView searchView;\r\n    private Spinner spn_phanLoaiTin;\r\n    public MainActivity mainActivity;\r\n    private RecyclerView rcvNewsTrangChu ,rcvFilter;\r\n    private List<NewsTrangChu> newsTrangChuList = new ArrayList<>();\r\n    private List<NewsTrangChu> newsTrangChuListBDS = new ArrayList<>();\r\n    private List<NewsTrangChu> newsTrangChuListGT = new ArrayList<>();\r\n    private List<NewsTrangChu> newsTrangChuListTT = new ArrayList<>();\r\n    private NewsTrangChuAdapter mNewsTrangChuAdapter;\r\n    private List<String> listChild = new ArrayList<>();\r\n    private List<String> listChild1 = new ArrayList<>();\r\n    private List<String> listChild2 = new ArrayList<>();\r\n    private List<resultSearch> listFilter;\r\n    DatabaseReference myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"GiaiTri\");\r\n    DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"BDS\");\r\n    DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"ThoiTrang\");\r\n\r\n    @SuppressLint(\"MissingInflatedId\")\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_trang_chu, container, false);\r\n        mainActivity = (MainActivity) getActivity();\r\n        rcvNewsTrangChu = view.findViewById(R.id.rcv_news_trangchu);\r\n        spn_phanLoaiTin = view.findViewById(R.id.spn_phanLoaiTin);\r\n        viewPager = view.findViewById(R.id.viewPager_slide);\r\n        rcvFilter = view.findViewById(R.id.rcvFilter);\r\n        circleIndicator = view.findViewById(R.id.circle_indicator);\r\n\r\n        slidersAdapter = new slidersAdapter(getContext(), getListPhoto());\r\n        viewPager.setAdapter(slidersAdapter);\r\n        searchView = view.findViewById(R.id.searchView);\r\n        circleIndicator.setViewPager(viewPager);\r\n        slidersAdapter.registerDataSetObserver(circleIndicator.getDataSetObserver());\r\n        searchView.clearFocus();\r\n        autoSliderImg();\r\n//        listChild1();\r\n//        listChild2();\r\n//        listChild3();\r\n        clickSpinerLoaiTin();\r\n//        newsTrangChuList.clear();\r\n        getListNews();\r\n//        getValuesSpinner();\r\n        searchNews();\r\n        new Handler().postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());\r\n                GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n                rcvNewsTrangChu.setLayoutManager(gridLayoutManager);\r\n                mNewsTrangChuAdapter.setDATA(newsTrangChuList);\r\n                rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);\r\n            }\r\n        }, 500);\r\n//        mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());\r\n//        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n//        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);\r\n//        mNewsTrangChuAdapter.setDATA(newsTrangChuList);\r\n//        rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);\r\n//        rcvNewsTrangChu.addOnItemTouchListener(new RecyclerView.SimpleOnItemTouchListener() {\r\n//            @Override\r\n//            public boolean onInterceptTouchEvent(@NonNull RecyclerView rv, @NonNull MotionEvent e) {\r\n//                return rv.getScrollState() == RecyclerView.SCROLL_STATE_DRAGGING;\r\n//            }\r\n//        });\r\n        return view;\r\n    }\r\n\r\n    private void searchNews() {\r\n        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {\r\n            @Override\r\n            public boolean onQueryTextSubmit(String query) {\r\n\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public boolean onQueryTextChange(String newText) {\r\n\r\n                if(newText.isEmpty()) {\r\n                    rcvFilter.setVisibility(View.INVISIBLE);\r\n                }else {\r\n                    rcvFilter.setVisibility(View.VISIBLE);\r\n                    filterList(newText);\r\n                }\r\n\r\n                return false;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void filterList(String newText) {\r\n         listFilter = new ArrayList<>();\r\n        for(int i = 0; i < newsTrangChuList.size(); i++) {\r\n            String title = newsTrangChuList.get(i).getTitle();\r\n            String product_type = newsTrangChuList.get(i).getTenDanhMuc();\r\n\r\n            if(title.toLowerCase().contains(newText.toLowerCase()) || product_type.toLowerCase().contains(newText.toLowerCase())){\r\n\r\n                listFilter.add(new resultSearch(newsTrangChuList.get(i).getTitle() ,newsTrangChuList.get(i).getTime()\r\n                , newsTrangChuList.get(i).getImage() , newsTrangChuList.get(i).getFee()));\r\n\r\n\r\n            }\r\n        }\r\n        if(listFilter.isEmpty()) {\r\n            Toast.makeText(mainActivity, \"Mời bạn nhập thông tin tìm kiếm\", Toast.LENGTH_SHORT).show();\r\n        }else {\r\n            rsSearchAdapter = new rsSearchAdapter(getContext() ,listFilter);\r\n            rcvFilter.setLayoutManager(new LinearLayoutManager(getContext()));\r\n            rcvFilter.setAdapter(rsSearchAdapter);\r\n//            RecyclerView.ItemDecoration decoration = new DividerItemDecoration(getContext() ,  DividerItemDecoration.VERTICAL);\r\n//            rcvFilter.addItemDecoration(decoration);\r\n        }\r\n    }\r\n\r\n    private void clickSpinerLoaiTin() {\r\n        product_type[] product_type = FragmentTrangChu.productType.getProductType();\r\n        ArrayAdapter<product_type> adapter = new ArrayAdapter<product_type>(getContext(),\r\n                android.R.layout.simple_spinner_item, product_type);\r\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spn_phanLoaiTin.setAdapter(adapter);\r\n\r\n        spn_phanLoaiTin.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                ProgressDialog progressDialog = new ProgressDialog(mainActivity);\r\n                progressDialog.setMessage(\"\");\r\n                progressDialog.show();\r\n                getValuesSpinner();\r\n                progressDialog.dismiss();\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void getValuesSpinner() {\r\n        loaiTin = spn_phanLoaiTin.getSelectedItem().toString();\r\n        if (loaiTin.equals(\"Bất động sản\")) {\r\n            getListBDS();\r\n        } else if (loaiTin.equals(\"Giải trí\")) {\r\n            getListGiaiTri();\r\n        } else if (loaiTin.equals(\"Thời trang\")) {\r\n\r\n            getListThoitrang();\r\n        }else {\r\n            mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());\r\n            GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n            rcvNewsTrangChu.setLayoutManager(gridLayoutManager);\r\n            mNewsTrangChuAdapter.setDATA(newsTrangChuList);\r\n            rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);\r\n        }\r\n    }\r\n\r\n    private void getListThoitrang() {\r\n        List<NewsTrangChu> listfilter = new ArrayList<>();\r\n        for (int i = 0; i < newsTrangChuList.size(); i++) {\r\n            String title = newsTrangChuList.get(i).getTenDanhMuc();\r\n            if (title.equals(\"Quần áo\") || title.equals(\"Đồng hồ\") || title.equals(\"Giày dép\")\r\n                    || title.equals(\"Túi xách\") || title.equals(\"Nước hoa\")\r\n            ) {\r\n                listfilter.add(new NewsTrangChu(newsTrangChuList.get(i).getTitle(), newsTrangChuList.get(i).getDescripsion()\r\n                        , newsTrangChuList.get(i).getTime(), newsTrangChuList.get(i).getFee(), false, newsTrangChuList.get(i).getImage(), newsTrangChuList.get(i).getTenDanhMuc()));\r\n            }\r\n        }\r\n        mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());\r\n        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);\r\n        mNewsTrangChuAdapter.setDATA(listfilter);\r\n        rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);\r\n    }\r\n\r\n\r\n    private void getListGiaiTri() {\r\n        List<NewsTrangChu> listfilter = new ArrayList<>();\r\n        for (int i = 0; i < newsTrangChuList.size(); i++) {\r\n            String title = newsTrangChuList.get(i).getTenDanhMuc();\r\n            if (title.equals(\"Nhạc cụ\") || title.equals(\"Sách\") || title.equals(\"Đồ thể thao, Dã ngoại\")\r\n                    || title.equals(\"Đồ sưu tầm  ,Đồ cổ\") || title.equals(\"Thiết bị chơi game\")\r\n            ) {\r\n                listfilter.add(new NewsTrangChu(newsTrangChuList.get(i).getTitle(), newsTrangChuList.get(i).getDescripsion()\r\n                        , newsTrangChuList.get(i).getTime(), newsTrangChuList.get(i).getFee(), false, newsTrangChuList.get(i).getImage(), newsTrangChuList.get(i).getTenDanhMuc()));\r\n            }\r\n        }\r\n        mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());\r\n        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);\r\n        mNewsTrangChuAdapter.setDATA(listfilter);\r\n        rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);\r\n    }\r\n\r\n    private void getListBDS() {\r\n        List<NewsTrangChu> listfilter = new ArrayList<>();\r\n        for (int i = 0; i < newsTrangChuList.size(); i++) {\r\n            String title = newsTrangChuList.get(i).getTenDanhMuc();\r\n            if (title.equals(\"Chung cư\") || title.equals(\"Nhà ở\") || title.equals(\"Đất\") || title.equals(\"Văn Phong\")\r\n                    || title.equals(\"Phòng trọ\")) {\r\n                listfilter.add(new NewsTrangChu(newsTrangChuList.get(i).getTitle(), newsTrangChuList.get(i).getDescripsion()\r\n                        , newsTrangChuList.get(i).getTime(), newsTrangChuList.get(i).getFee(), false, newsTrangChuList.get(i).getImage(), newsTrangChuList.get(i).getTenDanhMuc()));\r\n            }\r\n        }\r\n        mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());\r\n        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);\r\n        mNewsTrangChuAdapter.setDATA(listfilter);\r\n        rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);\r\n\r\n    }\r\n\r\n    public static class productType {\r\n        public static product_type[] getProductType() {\r\n            product_type prd1 = new product_type(\"Tất cả\");\r\n            product_type prd2 = new product_type(\"Bất động sản\");\r\n            product_type prd3 = new product_type(\"Thời trang\");\r\n            product_type prd4 = new product_type(\"Giải trí\");\r\n            return new product_type[]{prd1, prd2, prd3, prd4};\r\n        }\r\n    }\r\n\r\n    private void autoSliderImg() {\r\n\r\n        if (mTimer == null) {\r\n            mTimer = new Timer();\r\n        }\r\n\r\n        mTimer.schedule(new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                new Handler(Looper.getMainLooper()).post(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        int currentitem = viewPager.getCurrentItem();\r\n                        int totalItem = mListPhoto.size() - 1;\r\n\r\n                        if (currentitem < totalItem) {\r\n                            currentitem++;\r\n                            viewPager.setCurrentItem(currentitem);\r\n                        } else {\r\n                            viewPager.setCurrentItem(0);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }, 500, 3000);\r\n    }\r\n\r\n    @Override\r\n    public void onDestroyView() {\r\n        super.onDestroyView();\r\n\r\n        if (mTimer != null) {\r\n            mTimer.cancel();\r\n            mTimer = null;\r\n        }\r\n    }\r\n\r\n    private List<photosSlider> getListPhoto() {\r\n//    List<photosSlider> list = new ArrayList<>();\r\n\r\n        mListPhoto.add(new photosSlider(R.drawable.img_slider1));\r\n        mListPhoto.add(new photosSlider(R.drawable.img_slider2));\r\n        mListPhoto.add(new photosSlider(R.drawable.img_slider3));\r\n        mListPhoto.add(new photosSlider(R.drawable.img_slider4));\r\n\r\n        return mListPhoto;\r\n    }\r\n\r\n    private void getListNews() {\r\n\r\n        myData1.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                newsTrangChuListBDS.clear();\r\n                for (DataSnapshot snapshot1: snapshot.getChildren()){\r\n                    BDSNews bdsNews = snapshot1.getValue(BDSNews.class);\r\n\r\n                    newsTrangChuList.add(new NewsTrangChu(bdsNews.getTitle(), bdsNews.getDescription(),\r\n                            bdsNews.getDate(), bdsNews.getPrice(), true, bdsNews.getImage(),\r\n                            bdsNews.getTenDanhMuc()));\r\n                    mNewsTrangChuAdapter.notifyDataSetChanged();\r\n//                    addData();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n        myData.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                newsTrangChuListGT.clear();\r\n                for (DataSnapshot snapshot1: snapshot.getChildren()){\r\n                    giaiTriNews giaiTriNews = snapshot1.getValue(giaiTriNews.class);\r\n                    newsTrangChuList.add(new NewsTrangChu(giaiTriNews.getTitle(), giaiTriNews.getDescription(),\r\n                            giaiTriNews.getDate(), giaiTriNews.getPrice(), true,\r\n                            giaiTriNews.getImage(), giaiTriNews.getTenDanhMuc()));\r\n                    mNewsTrangChuAdapter.notifyDataSetChanged();\r\n//                    addData();\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n        myData2.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                newsTrangChuListTT.clear();\r\n                for (DataSnapshot snapshot1: snapshot.getChildren()){\r\n                    thoiTrangNews thoiTrangNews = snapshot1.getValue(thoiTrangNews.class);\r\n                    newsTrangChuList.add(new NewsTrangChu(thoiTrangNews.getTitlePost(),\r\n                            thoiTrangNews.getDescriptionPost(),\r\n                            thoiTrangNews.getDate(), thoiTrangNews.getPrice(), true,\r\n                            thoiTrangNews.getImage(), thoiTrangNews.getTenDanhMuc()));\r\n                            mNewsTrangChuAdapter.notifyDataSetChanged();\r\n//                    addData();\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n//    private void addData(){\r\n//        for (int i = 0; i < newsTrangChuListBDS.size(); i++){\r\n//            newsTrangChuList.add(newsTrangChuListBDS.get(i));\r\n//        }\r\n//        for (int i = 0; i < newsTrangChuListGT.size(); i++){\r\n//            newsTrangChuList.add(newsTrangChuListGT.get(i));\r\n//        }\r\n//        for (int i = 0; i < newsTrangChuListTT.size(); i++){\r\n//            newsTrangChuList.add(newsTrangChuListTT.get(i));\r\n//        }\r\n\r\n//    }\r\n\r\n//    private List<String> listChild1() {\r\n//        listChild.add(new String(\"NhacCu\"));\r\n//        listChild.add(new String(\"Sach\"));\r\n//        listChild.add(new String(\"DoTheThao&DaNgoai\"));\r\n//        listChild.add(new String(\"DoSuuTam&DoCo\"));\r\n//        listChild.add(new String(\"ThietBiChoiGame\"));\r\n//        listChild.add(new String(\"SoThichKhac\"));\r\n//\r\n//        return listChild;\r\n//    }\r\n//\r\n//    private List<String> listChild2() {\r\n//        listChild1.add(new String(\"QuanAo\"));\r\n//        listChild1.add(new String(\"DongHo\"));\r\n//        listChild1.add(new String(\"GiayDep\"));\r\n//        listChild1.add(new String(\"TuiXach\"));\r\n//        listChild1.add(new String(\"NuocHoa\"));\r\n//        listChild1.add(new String(\"PhuKienKhac\"));\r\n//\r\n//        return listChild1;\r\n//    }\r\n//\r\n//    private List<String> listChild3() {\r\n//        listChild2.add(new String(\"ChungCu\"));\r\n//        listChild2.add(new String(\"NhaO\"));\r\n//        listChild2.add(new String(\"Dat\"));\r\n//        listChild2.add(new String(\"VanPhong\"));\r\n//        listChild2.add(new String(\"PhongTro\"));\r\n//\r\n//        return listChild2;\r\n//\r\n//    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        newsTrangChuList.clear();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/Fragment/FragmentTrangChu.java b/app/src/main/java/com/example/duan1/Fragment/FragmentTrangChu.java
--- a/app/src/main/java/com/example/duan1/Fragment/FragmentTrangChu.java	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ b/app/src/main/java/com/example/duan1/Fragment/FragmentTrangChu.java	(date 1671690349987)
@@ -2,6 +2,7 @@
 
 import android.annotation.SuppressLint;
 import android.app.ProgressDialog;
+import android.content.Context;
 import android.os.Bundle;
 
 import androidx.annotation.NonNull;
@@ -15,6 +16,8 @@
 
 import android.os.Handler;
 import android.os.Looper;
+import android.util.AttributeSet;
+import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
@@ -43,6 +46,7 @@
 
 
 import java.util.ArrayList;
+import java.util.Collections;
 import java.util.List;
 import java.util.Timer;
 import java.util.TimerTask;
@@ -62,19 +66,15 @@
     private SearchView searchView;
     private Spinner spn_phanLoaiTin;
     public MainActivity mainActivity;
-    private RecyclerView rcvNewsTrangChu ,rcvFilter;
+    private RecyclerView rcvNewsTrangChu, rcvFilter;
     private List<NewsTrangChu> newsTrangChuList = new ArrayList<>();
-    private List<NewsTrangChu> newsTrangChuListBDS = new ArrayList<>();
-    private List<NewsTrangChu> newsTrangChuListGT = new ArrayList<>();
-    private List<NewsTrangChu> newsTrangChuListTT = new ArrayList<>();
     private NewsTrangChuAdapter mNewsTrangChuAdapter;
     private List<String> listChild = new ArrayList<>();
     private List<String> listChild1 = new ArrayList<>();
     private List<String> listChild2 = new ArrayList<>();
     private List<resultSearch> listFilter;
-    DatabaseReference myData = FirebaseDatabase.getInstance().getReference("Tin").child("GiaiTri");
-    DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference("Tin").child("BDS");
-    DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference("Tin").child("ThoiTrang");
+
+    DatabaseReference myData = FirebaseDatabase.getInstance().getReference("Tin");
 
     @SuppressLint("MissingInflatedId")
     @Override
@@ -94,36 +94,23 @@
         circleIndicator.setViewPager(viewPager);
         slidersAdapter.registerDataSetObserver(circleIndicator.getDataSetObserver());
         searchView.clearFocus();
+
+        getListNews();
+
         autoSliderImg();
-//        listChild1();
-//        listChild2();
-//        listChild3();
+
         clickSpinerLoaiTin();
-//        newsTrangChuList.clear();
-        getListNews();
-//        getValuesSpinner();
+
         searchNews();
-        new Handler().postDelayed(new Runnable() {
-            @Override
-            public void run() {
-                mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
-                GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-                rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
-                mNewsTrangChuAdapter.setDATA(newsTrangChuList);
-                rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
-            }
-        }, 500);
-//        mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
-//        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-//        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
-//        mNewsTrangChuAdapter.setDATA(newsTrangChuList);
-//        rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
-//        rcvNewsTrangChu.addOnItemTouchListener(new RecyclerView.SimpleOnItemTouchListener() {
-//            @Override
-//            public boolean onInterceptTouchEvent(@NonNull RecyclerView rv, @NonNull MotionEvent e) {
-//                return rv.getScrollState() == RecyclerView.SCROLL_STATE_DRAGGING;
-//            }
-//        });
+
+        mNewsTrangChuAdapter = new NewsTrangChuAdapter(mainActivity);
+        mNewsTrangChuAdapter.setDATA(newsTrangChuList);
+        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
+        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
+        rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
+        rcvNewsTrangChu.getRecycledViewPool().setMaxRecycledViews(2 , 10);
+        mNewsTrangChuAdapter.notifyItemInserted(newsTrangChuList.size());
+//
         return view;
     }
 
@@ -138,9 +125,9 @@
             @Override
             public boolean onQueryTextChange(String newText) {
 
-                if(newText.isEmpty()) {
+                if (newText.isEmpty()) {
                     rcvFilter.setVisibility(View.INVISIBLE);
-                }else {
+                } else {
                     rcvFilter.setVisibility(View.VISIBLE);
                     filterList(newText);
                 }
@@ -148,31 +135,29 @@
                 return false;
             }
         });
-
     }
 
     private void filterList(String newText) {
-         listFilter = new ArrayList<>();
-        for(int i = 0; i < newsTrangChuList.size(); i++) {
+        listFilter = new ArrayList<>();
+        for (int i = 0; i < newsTrangChuList.size(); i++) {
             String title = newsTrangChuList.get(i).getTitle();
             String product_type = newsTrangChuList.get(i).getTenDanhMuc();
 
-            if(title.toLowerCase().contains(newText.toLowerCase()) || product_type.toLowerCase().contains(newText.toLowerCase())){
+            if (title.toLowerCase().contains(newText.toLowerCase()) || product_type.toLowerCase().contains(newText.toLowerCase())) {
 
-                listFilter.add(new resultSearch(newsTrangChuList.get(i).getTitle() ,newsTrangChuList.get(i).getTime()
-                , newsTrangChuList.get(i).getImage() , newsTrangChuList.get(i).getFee()));
-
-
+                listFilter.add(new resultSearch(newsTrangChuList.get(i).getTitle(), newsTrangChuList.get(i).getTime()
+                        , newsTrangChuList.get(i).getImage(), newsTrangChuList.get(i).getFee()));
             }
         }
-        if(listFilter.isEmpty()) {
+        if (listFilter.isEmpty()) {
             Toast.makeText(mainActivity, "Mời bạn nhập thông tin tìm kiếm", Toast.LENGTH_SHORT).show();
-        }else {
-            rsSearchAdapter = new rsSearchAdapter(getContext() ,listFilter);
+        } else {
+            rsSearchAdapter = new rsSearchAdapter(getContext(), listFilter);
             rcvFilter.setLayoutManager(new LinearLayoutManager(getContext()));
             rcvFilter.setAdapter(rsSearchAdapter);
-//            RecyclerView.ItemDecoration decoration = new DividerItemDecoration(getContext() ,  DividerItemDecoration.VERTICAL);
-//            rcvFilter.addItemDecoration(decoration);
+
+            RecyclerView.ItemDecoration decoration = new DividerItemDecoration(getContext(), DividerItemDecoration.VERTICAL);
+            rcvFilter.addItemDecoration(decoration);
         }
     }
 
@@ -209,11 +194,10 @@
         } else if (loaiTin.equals("Thời trang")) {
 
             getListThoitrang();
-        }else {
+        } else {
             mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
-            GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-            rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
             mNewsTrangChuAdapter.setDATA(newsTrangChuList);
+            rcvNewsTrangChu.setLayoutManager(new WrapContentLinearLayoutManager(getContext(), 2));
             rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
         }
     }
@@ -230,9 +214,9 @@
             }
         }
         mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
-        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
         mNewsTrangChuAdapter.setDATA(listfilter);
+        rcvNewsTrangChu.setLayoutManager(new GridLayoutManager(getContext() , 2));
+        rcvNewsTrangChu.getRecycledViewPool().clear();
         rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
     }
 
@@ -249,10 +233,11 @@
             }
         }
         mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
-        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
         mNewsTrangChuAdapter.setDATA(listfilter);
+        rcvNewsTrangChu.setLayoutManager(new GridLayoutManager(getContext() , 2));
+        rcvNewsTrangChu.getRecycledViewPool().clear();
         rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
+
     }
 
     private void getListBDS() {
@@ -261,16 +246,17 @@
             String title = newsTrangChuList.get(i).getTenDanhMuc();
             if (title.equals("Chung cư") || title.equals("Nhà ở") || title.equals("Đất") || title.equals("Văn Phong")
                     || title.equals("Phòng trọ")) {
+
                 listfilter.add(new NewsTrangChu(newsTrangChuList.get(i).getTitle(), newsTrangChuList.get(i).getDescripsion()
                         , newsTrangChuList.get(i).getTime(), newsTrangChuList.get(i).getFee(), false, newsTrangChuList.get(i).getImage(), newsTrangChuList.get(i).getTenDanhMuc()));
+
             }
         }
         mNewsTrangChuAdapter = new NewsTrangChuAdapter(getContext());
-        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-        rcvNewsTrangChu.setLayoutManager(gridLayoutManager);
         mNewsTrangChuAdapter.setDATA(listfilter);
+        rcvNewsTrangChu.setLayoutManager(new GridLayoutManager(getContext() , 2));
+        rcvNewsTrangChu.getRecycledViewPool().clear();
         rcvNewsTrangChu.setAdapter(mNewsTrangChuAdapter);
-
     }
 
     public static class productType {
@@ -333,19 +319,19 @@
 
     private void getListNews() {
 
-        myData1.addValueEventListener(new ValueEventListener() {
+        myData.addValueEventListener(new ValueEventListener() {
             @Override
             public void onDataChange(@NonNull DataSnapshot snapshot) {
-                newsTrangChuListBDS.clear();
-                for (DataSnapshot snapshot1: snapshot.getChildren()){
+                newsTrangChuList.clear();
+                for (DataSnapshot snapshot1 : snapshot.getChildren()) {
                     BDSNews bdsNews = snapshot1.getValue(BDSNews.class);
 
                     newsTrangChuList.add(new NewsTrangChu(bdsNews.getTitle(), bdsNews.getDescription(),
                             bdsNews.getDate(), bdsNews.getPrice(), true, bdsNews.getImage(),
                             bdsNews.getTenDanhMuc()));
-                    mNewsTrangChuAdapter.notifyDataSetChanged();
-//                    addData();
-                }
+                }
+                Collections.reverse(newsTrangChuList);
+                mNewsTrangChuAdapter.notifyDataSetChanged();
             }
 
             @Override
@@ -353,98 +339,71 @@
 
             }
         });
-        myData.addValueEventListener(new ValueEventListener() {
-            @Override
-            public void onDataChange(@NonNull DataSnapshot snapshot) {
-                newsTrangChuListGT.clear();
-                for (DataSnapshot snapshot1: snapshot.getChildren()){
-                    giaiTriNews giaiTriNews = snapshot1.getValue(giaiTriNews.class);
-                    newsTrangChuList.add(new NewsTrangChu(giaiTriNews.getTitle(), giaiTriNews.getDescription(),
-                            giaiTriNews.getDate(), giaiTriNews.getPrice(), true,
-                            giaiTriNews.getImage(), giaiTriNews.getTenDanhMuc()));
-                    mNewsTrangChuAdapter.notifyDataSetChanged();
-//                    addData();
-                }
+//        myData.addValueEventListener(new ValueEventListener() {
+//            @Override
+//            public void onDataChange(@NonNull DataSnapshot snapshot) {
+////                newsTrangChuListGT.clear();
+//                for (DataSnapshot snapshot1 : snapshot.getChildren()) {
+//                    giaiTriNews giaiTriNews = snapshot1.getValue(giaiTriNews.class);
+//                    newsTrangChuList.add(new NewsTrangChu(giaiTriNews.getTitle(), giaiTriNews.getDescription(),
+//                            giaiTriNews.getDate(), giaiTriNews.getPrice(), true,
+//                            giaiTriNews.getImage(), giaiTriNews.getTenDanhMuc()));
+//                    mNewsTrangChuAdapter.notifyDataSetChanged();
+////                    addData();
+//                }
+//
+//            }
+//
+//            @Override
+//            public void onCancelled(@NonNull DatabaseError error) {
+//
+//            }
+//        });
+//        myData2.addValueEventListener(new ValueEventListener() {
+//            @Override
+//            public void onDataChange(@NonNull DataSnapshot snapshot) {
+////                newsTrangChuListTT.clear();
+//                for (DataSnapshot snapshot1 : snapshot.getChildren()) {
+//                    thoiTrangNews thoiTrangNews = snapshot1.getValue(thoiTrangNews.class);
+//                    newsTrangChuList.add(new NewsTrangChu(thoiTrangNews.getTitlePost(),
+//                            thoiTrangNews.getDescriptionPost(),
+//                            thoiTrangNews.getDate(), thoiTrangNews.getPrice(), true,
+//                            thoiTrangNews.getImage(), thoiTrangNews.getTenDanhMuc()));
+//                    mNewsTrangChuAdapter.notifyDataSetChanged();
+//                }
+//
+//            }
+//
+//            @Override
+//            public void onCancelled(@NonNull DatabaseError error) {
+//
+//            }
+//        });
+    }
+
+    public class WrapContentLinearLayoutManager extends GridLayoutManager {
+
+
+        public WrapContentLinearLayoutManager(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
+            super(context, attrs, defStyleAttr, defStyleRes);
+        }
 
-            }
+        public WrapContentLinearLayoutManager(Context context, int spanCount) {
+            super(context, spanCount);
+        }
+
+        public WrapContentLinearLayoutManager(Context context, int spanCount, int orientation, boolean reverseLayout) {
+            super(context, spanCount, orientation, reverseLayout);
+        }
 
-            @Override
-            public void onCancelled(@NonNull DatabaseError error) {
-
+        @Override
+        public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) {
+            try {
+                super.onLayoutChildren(recycler, state);
+            } catch (IndexOutOfBoundsException e) {
+                Log.e("TAG", "meet a IOOBE in RecyclerView");
             }
-        });
-        myData2.addValueEventListener(new ValueEventListener() {
-            @Override
-            public void onDataChange(@NonNull DataSnapshot snapshot) {
-                newsTrangChuListTT.clear();
-                for (DataSnapshot snapshot1: snapshot.getChildren()){
-                    thoiTrangNews thoiTrangNews = snapshot1.getValue(thoiTrangNews.class);
-                    newsTrangChuList.add(new NewsTrangChu(thoiTrangNews.getTitlePost(),
-                            thoiTrangNews.getDescriptionPost(),
-                            thoiTrangNews.getDate(), thoiTrangNews.getPrice(), true,
-                            thoiTrangNews.getImage(), thoiTrangNews.getTenDanhMuc()));
-                            mNewsTrangChuAdapter.notifyDataSetChanged();
-//                    addData();
-                }
-
-            }
-
-            @Override
-            public void onCancelled(@NonNull DatabaseError error) {
-
-            }
-        });
+        }
     }
 
-//    private void addData(){
-//        for (int i = 0; i < newsTrangChuListBDS.size(); i++){
-//            newsTrangChuList.add(newsTrangChuListBDS.get(i));
-//        }
-//        for (int i = 0; i < newsTrangChuListGT.size(); i++){
-//            newsTrangChuList.add(newsTrangChuListGT.get(i));
-//        }
-//        for (int i = 0; i < newsTrangChuListTT.size(); i++){
-//            newsTrangChuList.add(newsTrangChuListTT.get(i));
-//        }
-
-//    }
-
-//    private List<String> listChild1() {
-//        listChild.add(new String("NhacCu"));
-//        listChild.add(new String("Sach"));
-//        listChild.add(new String("DoTheThao&DaNgoai"));
-//        listChild.add(new String("DoSuuTam&DoCo"));
-//        listChild.add(new String("ThietBiChoiGame"));
-//        listChild.add(new String("SoThichKhac"));
-//
-//        return listChild;
-//    }
-//
-//    private List<String> listChild2() {
-//        listChild1.add(new String("QuanAo"));
-//        listChild1.add(new String("DongHo"));
-//        listChild1.add(new String("GiayDep"));
-//        listChild1.add(new String("TuiXach"));
-//        listChild1.add(new String("NuocHoa"));
-//        listChild1.add(new String("PhuKienKhac"));
-//
-//        return listChild1;
-//    }
-//
-//    private List<String> listChild3() {
-//        listChild2.add(new String("ChungCu"));
-//        listChild2.add(new String("NhaO"));
-//        listChild2.add(new String("Dat"));
-//        listChild2.add(new String("VanPhong"));
-//        listChild2.add(new String("PhongTro"));
-//
-//        return listChild2;
-//
-//    }
-
-    @Override
-    public void onResume() {
-        super.onResume();
-        newsTrangChuList.clear();
-    }
 }
\ No newline at end of file
Index: app/src/main/java/com/example/duan1/dagTinGiaiTriActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.Manifest;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.photoAdapter;\r\nimport com.example.duan1.Broadcast.Broadcast;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.direction;\r\nimport com.example.duan1.model.giaiTriNews;\r\nimport com.example.duan1.model.product_type;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\npublic class dagTinGiaiTriActivity extends AppCompatActivity implements com.example.duan1.Adapter.photoAdapter.CountOfImageWhenRemove {\r\n    private TextView tvTenDanhMuc;\r\n    private ImageView imgBackPage;\r\n    private Spinner spn_product_type;\r\n    private LinearLayout layout_spnTypeProduct, addImageProduct;\r\n    private EditText edtTitlePost, edtDescription, edtPrice, edtAddress ;\r\n    private Button btnDangTin ,btnSuaTinGT;\r\n\r\n    private String date , strTitlePost , strDescription , strPrice , strAddress ,strLoaiSanPham , nameUser ,tenDanhMuc ,title_Post = null;\r\n    private double dbPrice;\r\n    private com.example.duan1.Adapter.photoAdapter photoAdapter;\r\n    private RecyclerView rcvView_select_img_GiaiTri;\r\n    private ArrayList<Uri> imageUri;\r\n    private int REQUEST_PERMISSION_CODE = 35;\r\n    private int PICK_IMAGE = 1;\r\n    private int update_count = 0 , maxID  , idUser , id;\r\n    private ProgressDialog progressDialog;\r\n    private List<giaiTriNews> listGiaiTri;\r\n    MainActivity mainActivity;\r\n    giaiTriNews giaiTriNewsId;\r\n    giaiTriNews giaiTriNewsIdEdit;\r\n    private DatabaseReference myData;\r\n    private StorageReference imageFolder;\r\n    private Bitmap bitmapselect;\r\n    private Calendar calendar = Calendar.getInstance();\r\n    private Broadcast broadcast;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_dag_tin_giai_tri);\r\n\r\n        imageFolder = FirebaseStorage.getInstance().getReference().child(\"Image.jpg\");\r\n        myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"GiaiTri\");\r\n        imageUri = new ArrayList<>();\r\n\r\n        idUser = mainActivity.id;\r\n        nameUser = mainActivity.name;\r\n\r\n        initUi();\r\n        clickBackPage();\r\n        eventClickSPN();\r\n        clickAddImageFashion();\r\n        getListGiaiTri();\r\n        clickDangTin();\r\n        getCurrentDate();\r\n        if(title_Post == null || title_Post.equals(\"\")) {\r\n            btnDangTin.setVisibility(View.VISIBLE);\r\n           btnSuaTinGT.setVisibility(View.INVISIBLE);\r\n        }else {\r\n            btnSuaTinGT.setVisibility(View.VISIBLE);\r\n            btnDangTin.setVisibility(View.INVISIBLE);\r\n            setTextInput();\r\n            btnSuaTinGT.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    editNews();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private void getCurrentDate() {\r\n        SimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n        Calendar c = Calendar.getInstance();\r\n        date = sdf.format(c.getTime());\r\n    }\r\n\r\n    private void editNews() {\r\n        btnSuaTinGT.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog = new ProgressDialog(dagTinGiaiTriActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strLoaiSanPham = spn_product_type.getSelectedItem().toString().trim();\r\n                strAddress = edtAddress.getText().toString().trim();\r\n                strPrice = edtPrice.getText().toString();\r\n\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n\r\n                } catch(Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty() ||  strLoaiSanPham.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dagTinGiaiTriActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n                    id = giaiTriNewsIdEdit.getId();\r\n\r\n                    upImage(id);\r\n\r\n                    String strId = String.valueOf(id);\r\n                    myData.child(strId ).setValue(new giaiTriNews(id ,strTitlePost , strDescription ,strAddress, dbPrice\r\n                                    ,strLoaiSanPham ,idUser ,nameUser , tenDanhMuc, date))\r\n                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dagTinGiaiTriActivity.this, \"Sửa tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setTextInput() {\r\n        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n        DatabaseReference databaseReference = firebaseDatabase.getReference(\"Tin\").child(\"GiaiTri\");\r\n        databaseReference.addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                giaiTriNews giaiTriNews = snapshot.getValue(com.example.duan1.model.giaiTriNews.class);\r\n                if(giaiTriNews.getTitle().equals(title_Post)) {\r\n                    edtTitlePost.setText(giaiTriNews.getTitle());\r\n                    edtDescription.setText(giaiTriNews.getDescription());\r\n                    String price = String.valueOf(giaiTriNews.getPrice());\r\n                    edtPrice.setText(price);\r\n                    edtAddress.setText(giaiTriNews.getAddress());\r\n                    giaiTriNewsIdEdit = giaiTriNews;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickBackPage() {\r\n        imgBackPage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void eventClickSPN() {\r\n        product_type[] product_type = dagTinGiaiTriActivity.productType.getProductType();\r\n        ArrayAdapter<product_type> adapter = new ArrayAdapter<product_type>(this, android.R.layout.simple_spinner_item, product_type);\r\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spn_product_type.setAdapter(adapter);\r\n\r\n        spn_product_type.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                Toast.makeText(dagTinGiaiTriActivity.this, \"Loại sản phẩm \" + i, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void clickAddImageFashion() {\r\n        photoAdapter = new photoAdapter(imageUri, this, this);\r\n        rcvView_select_img_GiaiTri.setLayoutManager(new GridLayoutManager(dagTinGiaiTriActivity.this, 1));\r\n        rcvView_select_img_GiaiTri.setAdapter(photoAdapter);\r\n\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n                    REQUEST_PERMISSION_CODE);\r\n            return;\r\n        }\r\n\r\n        addImageProduct.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                intent.setType(\"image/*\");\r\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR2) {\r\n                    intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n                }\r\n                startActivityForResult(Intent.createChooser(intent, \"select Picture\"), PICK_IMAGE);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == PICK_IMAGE && resultCode == RESULT_OK && data != null) {\r\n            if (data.getClipData() != null) {\r\n                int count = data.getClipData().getItemCount();\r\n\r\n                for (int i = 0; i < count; i++) {\r\n                    if (imageUri.size() < 9) {\r\n                        Uri imgUri = (data.getClipData().getItemAt(i).getUri());\r\n                        imageUri.add(imgUri);\r\n                    } else {\r\n                        Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                photoAdapter.notifyDataSetChanged();\r\n            } else {\r\n                if (imageUri.size() < 9) {\r\n                    Uri imgUri = data.getData();\r\n                    imageUri.add(imgUri);\r\n                } else {\r\n                    Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n\r\n            }\r\n            photoAdapter.notifyDataSetChanged();\r\n        } else {\r\n            Toast.makeText(this, \"you haven't pick any Image\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n\r\n    private void clickDangTin() {\r\n\r\n        btnDangTin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog = new ProgressDialog(dagTinGiaiTriActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strLoaiSanPham = spn_product_type.getSelectedItem().toString().trim();\r\n                strAddress = edtAddress.getText().toString().trim();\r\n                strPrice = edtPrice.getText().toString();\r\n\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n\r\n                } catch(Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty() ||  strLoaiSanPham.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dagTinGiaiTriActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n\r\n                    if(giaiTriNewsId == null) {\r\n                        maxID = 0;\r\n                    }else {\r\n                        maxID = giaiTriNewsId.getId() +1;\r\n                    }\r\n\r\n                    upImage(maxID);\r\n\r\n                    String strId = String.valueOf(maxID);\r\n                    myData.child(strId ).setValue(new giaiTriNews(maxID ,strTitlePost , strDescription ,strAddress, dbPrice\r\n                                      ,strLoaiSanPham ,idUser ,nameUser , tenDanhMuc ,date))\r\n                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dagTinGiaiTriActivity.this, \"Đăng tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    private List<giaiTriNews> getListGiaiTri() {\r\n        listGiaiTri = new ArrayList<>();\r\n        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n        DatabaseReference databaseReference = firebaseDatabase.getReference(\"Tin\").child(\"GiaiTri\");\r\n        databaseReference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                listGiaiTri.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren() ){\r\n                    giaiTriNews giaiTriNews = snapshot1.getValue(giaiTriNews.class);\r\n                    listGiaiTri.add(giaiTriNews);\r\n                    giaiTriNewsId = giaiTriNews;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Toast.makeText(dagTinGiaiTriActivity.this, \"Load data Error\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return listGiaiTri;\r\n\r\n    }\r\n\r\n    private void initUi() {\r\n        tvTenDanhMuc = findViewById(R.id.tvTenDanhMuc);\r\n        Intent intent = getIntent();\r\n        title_Post = intent.getStringExtra(\"title\");\r\n        tvTenDanhMuc.setText(\"Danh Mục - \" + intent.getStringExtra(\"tenDanhMuc\"));\r\n        imgBackPage = findViewById(R.id.icon_back);\r\n        spn_product_type = findViewById(R.id.spn_product_type);\r\n        layout_spnTypeProduct = findViewById(R.id.layout_spnTypeProduct);\r\n\r\n        edtTitlePost = findViewById(R.id.title_post);\r\n        edtDescription = findViewById(R.id.description_post);\r\n        edtPrice = findViewById(R.id.price);\r\n        edtAddress = findViewById(R.id.address);\r\n        btnDangTin = findViewById(R.id.btnSubmit);\r\n        addImageProduct = findViewById(R.id.addImageProduct);\r\n        btnSuaTinGT = findViewById(R.id.btnSuaTinGT);\r\n        rcvView_select_img_GiaiTri = findViewById(R.id.rcvView_select_img_GiaiTri);\r\n\r\n        Intent intent1 = getIntent();\r\n       tenDanhMuc = intent1.getStringExtra(\"tenDanhMuc\");\r\n\r\n       broadcast = new Broadcast();\r\n\r\n    }\r\n\r\n    @Override\r\n    public void clicked(int getSize) {\r\n\r\n    }\r\n\r\n    public static class productType {\r\n        public static product_type[] getProductType() {\r\n            product_type prd1 = new product_type(\"Thạch,đá quí\");\r\n            product_type prd2 = new product_type(\"Tranh ảnh,khung tranh\");\r\n            product_type prd3 = new product_type(\"Bật lửa\");\r\n            product_type prd4 = new product_type(\"Đồ gốm sứ\");\r\n            product_type prd5 = new product_type(\"Tường trang trí\");\r\n            return new product_type[]{prd1, prd2, prd3, prd4, prd5};\r\n\r\n\r\n        }\r\n    }\r\n\r\n    private void upImage(int id) {\r\n        if (imageUri.size() == 0){\r\n            return;\r\n        }\r\n        Uri uri = imageUri.get(0);\r\n        try {\r\n            bitmapselect = MediaStore.Images.Media.getBitmap(getContentResolver(),uri);\r\n            FirebaseStorage storage = FirebaseStorage.getInstance();\r\n            StorageReference storageRef = storage.getReference();\r\n            StorageReference mountainsRef = storageRef.child(tenDanhMuc+\"/image\"+calendar.getTimeInMillis());\r\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n            bitmapselect.compress(Bitmap.CompressFormat.JPEG, 100, baos);\r\n            byte[] dataImage = baos.toByteArray();\r\n\r\n            UploadTask uploadTask = mountainsRef.putBytes(dataImage);\r\n            uploadTask.addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception exception) {\r\n                    // Handle unsuccessful uploads\r\n                    progressDialog.dismiss();\r\n                    Toast.makeText(dagTinGiaiTriActivity.this, \"Lỗi cập nhật hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                @Override\r\n                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                    // taskSnapshot.getMetadata() contains file metadata such as size, content-type, etc.\r\n\r\n                    mountainsRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                        @Override\r\n                        public void onSuccess(Uri uri) {\r\n                            String strImage = String.valueOf(uri);\r\n                            UpdateImageUrl(strImage, id);\r\n                            progressDialog.dismiss();\r\n                        }\r\n                    }).addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception exception) {\r\n                            // Handle any errors\r\n                            progressDialog.dismiss();\r\n                            Toast.makeText(dagTinGiaiTriActivity.this, \"Lỗi tải URL hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        } catch (IOException e) {\r\n            Toast.makeText(mainActivity, \"Lỗi try-catch\", Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n    }\r\n\r\n    private void UpdateImageUrl(String url, int id) {\r\n        myData.child(id+\"/image\").setValue(url);\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        IntentFilter intentFilter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        registerReceiver(broadcast, intentFilter);\r\n        super.onStart();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        unregisterReceiver(broadcast);\r\n        super.onStop();\r\n    }\r\n\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/dagTinGiaiTriActivity.java b/app/src/main/java/com/example/duan1/dagTinGiaiTriActivity.java
--- a/app/src/main/java/com/example/duan1/dagTinGiaiTriActivity.java	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ b/app/src/main/java/com/example/duan1/dagTinGiaiTriActivity.java	(date 1671690033710)
@@ -71,12 +71,11 @@
     private ArrayList<Uri> imageUri;
     private int REQUEST_PERMISSION_CODE = 35;
     private int PICK_IMAGE = 1;
-    private int update_count = 0 , maxID  , idUser , id;
+    private int maxID  , idUser , idEdit;
     private ProgressDialog progressDialog;
     private List<giaiTriNews> listGiaiTri;
     MainActivity mainActivity;
     giaiTriNews giaiTriNewsId;
-    giaiTriNews giaiTriNewsIdEdit;
     private DatabaseReference myData;
     private StorageReference imageFolder;
     private Bitmap bitmapselect;
@@ -89,12 +88,15 @@
         setContentView(R.layout.activity_dag_tin_giai_tri);
 
         imageFolder = FirebaseStorage.getInstance().getReference().child("Image.jpg");
-        myData = FirebaseDatabase.getInstance().getReference("Tin").child("GiaiTri");
+        myData = FirebaseDatabase.getInstance().getReference("Tin");
         imageUri = new ArrayList<>();
 
         idUser = mainActivity.id;
         nameUser = mainActivity.name;
 
+        Intent intentID = getIntent();
+        idEdit = intentID.getIntExtra("idGT", 0);
+
         initUi();
         clickBackPage();
         eventClickSPN();
@@ -150,16 +152,14 @@
 
                 } else {
                     progressDialog.show();
-                    id = giaiTriNewsIdEdit.getId();
 
-                    upImage(id);
-
-                    String strId = String.valueOf(id);
-                    myData.child(strId ).setValue(new giaiTriNews(id ,strTitlePost , strDescription ,strAddress, dbPrice
-                                    ,strLoaiSanPham ,idUser ,nameUser , tenDanhMuc, date))
+                    String strId = String.valueOf(idEdit);
+                    myData.child(strId ).setValue(new giaiTriNews(idEdit ,strTitlePost , strDescription ,strAddress, dbPrice
+                                    ,strLoaiSanPham ,idUser ,nameUser , tenDanhMuc, "GiaiTri", date, " "))
                             .addOnSuccessListener(new OnSuccessListener<Void>() {
                                 @Override
                                 public void onSuccess(Void unused) {
+                                    upImage(idEdit);
                                     Toast.makeText(dagTinGiaiTriActivity.this, "Sửa tin thành công", Toast.LENGTH_SHORT).show();
                                     progressDialog.dismiss();
                                 }
@@ -172,18 +172,17 @@
 
     private void setTextInput() {
         FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();
-        DatabaseReference databaseReference = firebaseDatabase.getReference("Tin").child("GiaiTri");
+        DatabaseReference databaseReference = firebaseDatabase.getReference("Tin");
         databaseReference.addChildEventListener(new ChildEventListener() {
             @Override
             public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
-                giaiTriNews giaiTriNews = snapshot.getValue(com.example.duan1.model.giaiTriNews.class);
-                if(giaiTriNews.getTitle().equals(title_Post)) {
+                giaiTriNews giaiTriNews = snapshot.getValue(giaiTriNews.class);
+                if(giaiTriNews.getId() == idEdit) {
                     edtTitlePost.setText(giaiTriNews.getTitle());
                     edtDescription.setText(giaiTriNews.getDescription());
                     String price = String.valueOf(giaiTriNews.getPrice());
                     edtPrice.setText(price);
                     edtAddress.setText(giaiTriNews.getAddress());
-                    giaiTriNewsIdEdit = giaiTriNews;
                 }
             }
 
@@ -331,14 +330,15 @@
                         maxID = giaiTriNewsId.getId() +1;
                     }
 
-                    upImage(maxID);
 
                     String strId = String.valueOf(maxID);
+
                     myData.child(strId ).setValue(new giaiTriNews(maxID ,strTitlePost , strDescription ,strAddress, dbPrice
-                                      ,strLoaiSanPham ,idUser ,nameUser , tenDanhMuc ,date))
+                                      ,strLoaiSanPham ,idUser ,nameUser , tenDanhMuc, "GiaiTri",date, " "))
                             .addOnSuccessListener(new OnSuccessListener<Void>() {
                                 @Override
                                 public void onSuccess(Void unused) {
+                                    upImage(maxID);
                                     Toast.makeText(dagTinGiaiTriActivity.this, "Đăng tin thành công", Toast.LENGTH_SHORT).show();
                                     progressDialog.dismiss();
                                 }
@@ -350,11 +350,10 @@
 
     }
 
-
     private List<giaiTriNews> getListGiaiTri() {
         listGiaiTri = new ArrayList<>();
         FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();
-        DatabaseReference databaseReference = firebaseDatabase.getReference("Tin").child("GiaiTri");
+        DatabaseReference databaseReference = firebaseDatabase.getReference("Tin");
         databaseReference.addValueEventListener(new ValueEventListener() {
             @Override
             public void onDataChange(@NonNull DataSnapshot snapshot) {
@@ -381,6 +380,7 @@
         Intent intent = getIntent();
         title_Post = intent.getStringExtra("title");
         tvTenDanhMuc.setText("Danh Mục - " + intent.getStringExtra("tenDanhMuc"));
+
         imgBackPage = findViewById(R.id.icon_back);
         spn_product_type = findViewById(R.id.spn_product_type);
         layout_spnTypeProduct = findViewById(R.id.layout_spnTypeProduct);
@@ -450,7 +450,7 @@
                         @Override
                         public void onSuccess(Uri uri) {
                             String strImage = String.valueOf(uri);
-                            UpdateImageUrl(strImage, id);
+                            myData.child(id+"/image").setValue(strImage);
                             progressDialog.dismiss();
                         }
                     }).addOnFailureListener(new OnFailureListener() {
@@ -469,9 +469,6 @@
 
     }
 
-    private void UpdateImageUrl(String url, int id) {
-        myData.child(id+"/image").setValue(url);
-    }
 
     @Override
     protected void onStart() {
Index: app/src/main/java/com/example/duan1/model/BDSNews.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1.model;\r\n\r\npublic class BDSNews {\r\n    private int id;\r\n    private String title;\r\n    private String description;\r\n    private double price;\r\n    private String dienTich ;\r\n    private String adress;\r\n    private String tenPhanKhu;\r\n    private String loaiDat;\r\n    private String direction;\r\n    private String soPhongNgu;\r\n    private String soPhongWc;\r\n    private int idUser;\r\n    private String nameUser;\r\n    private String tenDanhMuc;\r\n    private String date;\r\n    private String image;\r\n\r\n    public BDSNews(int maxID, String strTitlePost, String strDescription, double dbPrice, String strDienTich,\r\n                   String strAddress, String strTenKhu, String strLoaiHinhDat, String strSoPhongNgu,\r\n                   String strSoPhongWc, int idUser, String nameUser, String tenDanhMuc, String date, String s) {\r\n    }\r\n\r\n    public BDSNews() {\r\n    }\r\n\r\n    public BDSNews(int id, String title, String description, double price, String dienTich, String adress, String tenPhanKhu, String loaiDat, String direction, String soPhongNgu, String soPhongWc, int idUser, String nameUser, String tenDanhMuc, String date, String image) {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.description = description;\r\n        this.price = price;\r\n        this.dienTich = dienTich;\r\n        this.adress = adress;\r\n        this.tenPhanKhu = tenPhanKhu;\r\n        this.loaiDat = loaiDat;\r\n        this.direction = direction;\r\n        this.soPhongNgu = soPhongNgu;\r\n        this.soPhongWc = soPhongWc;\r\n        this.idUser = idUser;\r\n        this.nameUser = nameUser;\r\n        this.tenDanhMuc = tenDanhMuc;\r\n        this.date = date;\r\n        this.image = image;\r\n    }\r\n\r\n        public BDSNews(int maxID, String strTitlePost, String strDescription, double dbPrice, String strDienTich,\r\n                   String strAddress, String strTenKhu, String strLoaiHinhDat,\r\n                   String strSoPhongNgu, String strSoPhongWc, int idUser, String nameUser , String tenDanhMuc, String date ) {\r\n        this.id = maxID;\r\n        this.title = strTitlePost;\r\n        this.description = strDescription;\r\n        this.price = dbPrice;\r\n        this.dienTich = strDienTich;\r\n        this.adress = strAddress;\r\n        this.tenPhanKhu = strTenKhu;\r\n        this.loaiDat = strLoaiHinhDat;\r\n        this.soPhongNgu = strSoPhongNgu;\r\n        this.soPhongWc = strSoPhongWc;\r\n        this.idUser = idUser;\r\n        this.nameUser = nameUser;\r\n        this.tenDanhMuc = tenDanhMuc;\r\n        this.date = date;\r\n\r\n\r\n    }\r\n\r\n\r\n    public BDSNews(int id, String title, String description, double price,\r\n                   String dienTich, String adress\r\n                  , int idUser, String nameUser , String tenDanhMuc, String date\r\n    ) {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.description = description;\r\n        this.price = price;\r\n        this.dienTich = dienTich;\r\n        this.adress = adress;\r\n        this.idUser = idUser;\r\n        this.nameUser = nameUser;\r\n        this.tenDanhMuc = tenDanhMuc;\r\n        this.date = date;\r\n    }\r\n\r\n    public BDSNews(int id, String title, String description, double price,\r\n                   String dienTich, String adress, String tenPhanKhu, String loaiDat, String direction\r\n            , int idUser, String nameUser,String tenDanhMuc, String date ) {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.description = description;\r\n        this.price = price;\r\n        this.dienTich = dienTich;\r\n        this.adress = adress;\r\n        this.tenPhanKhu = tenPhanKhu;\r\n        this.loaiDat = loaiDat;\r\n        this.direction = direction;\r\n        this.idUser = idUser;\r\n        this.nameUser = nameUser;\r\n        this.tenDanhMuc = tenDanhMuc;\r\n        this.date = date;\r\n    }\r\n\r\n    public String getDate() {\r\n        return date;\r\n    }\r\n\r\n    public void setDate(String date) {\r\n        this.date = date;\r\n    }\r\n\r\n    public String getTenDanhMuc() {\r\n        return tenDanhMuc;\r\n    }\r\n\r\n    public void setTenDanhMuc(String tenDanhMuc) {\r\n        this.tenDanhMuc = tenDanhMuc;\r\n    }\r\n\r\n    public int getIdUser() {\r\n        return idUser;\r\n    }\r\n\r\n    public void setIdUser(int idUser) {\r\n        this.idUser = idUser;\r\n    }\r\n\r\n    public String getNameUser() {\r\n        return nameUser;\r\n    }\r\n\r\n    public void setNameUser(String nameUser) {\r\n        this.nameUser = nameUser;\r\n    }\r\n\r\n    public String getSoPhongNgu() {\r\n        return soPhongNgu;\r\n    }\r\n\r\n    public void setSoPhongNgu(String soPhongNgu) {\r\n        this.soPhongNgu = soPhongNgu;\r\n    }\r\n\r\n    public String getSoPhongWc() {\r\n        return soPhongWc;\r\n    }\r\n\r\n    public void setSoPhongWc(String soPhongWc) {\r\n        this.soPhongWc = soPhongWc;\r\n    }\r\n\r\n    public String getTenPhanKhu() {\r\n        return tenPhanKhu;\r\n    }\r\n\r\n    public void setTenPhanKhu(String tenPhanKhu) {\r\n        this.tenPhanKhu = tenPhanKhu;\r\n    }\r\n\r\n    public String getLoaiDat() {\r\n        return loaiDat;\r\n    }\r\n\r\n    public void setLoaiDat(String loaiDat) {\r\n        this.loaiDat = loaiDat;\r\n    }\r\n\r\n    public String getDirection() {\r\n        return direction;\r\n    }\r\n\r\n    public void setDirection(String direction) {\r\n        this.direction = direction;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(double price) {\r\n        this.price = price;\r\n    }\r\n\r\n    public String getDienTich() {\r\n        return dienTich;\r\n    }\r\n\r\n    public void setDienTich(String dienTich) {\r\n        this.dienTich = dienTich;\r\n    }\r\n\r\n    public String getAdress() {\r\n        return adress;\r\n    }\r\n\r\n    public void setAdress(String adress) {\r\n        this.adress = adress;\r\n    }\r\n\r\n    public String getImage() {\r\n        return image;\r\n    }\r\n\r\n    public void setImage(String image) {\r\n        this.image = image;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/model/BDSNews.java b/app/src/main/java/com/example/duan1/model/BDSNews.java
--- a/app/src/main/java/com/example/duan1/model/BDSNews.java	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ b/app/src/main/java/com/example/duan1/model/BDSNews.java	(date 1671690121890)
@@ -15,39 +15,16 @@
     private int idUser;
     private String nameUser;
     private String tenDanhMuc;
+    private String danhMucChinh;
     private String date;
     private String image;
 
-    public BDSNews(int maxID, String strTitlePost, String strDescription, double dbPrice, String strDienTich,
-                   String strAddress, String strTenKhu, String strLoaiHinhDat, String strSoPhongNgu,
-                   String strSoPhongWc, int idUser, String nameUser, String tenDanhMuc, String date, String s) {
-    }
-
     public BDSNews() {
     }
 
-    public BDSNews(int id, String title, String description, double price, String dienTich, String adress, String tenPhanKhu, String loaiDat, String direction, String soPhongNgu, String soPhongWc, int idUser, String nameUser, String tenDanhMuc, String date, String image) {
-        this.id = id;
-        this.title = title;
-        this.description = description;
-        this.price = price;
-        this.dienTich = dienTich;
-        this.adress = adress;
-        this.tenPhanKhu = tenPhanKhu;
-        this.loaiDat = loaiDat;
-        this.direction = direction;
-        this.soPhongNgu = soPhongNgu;
-        this.soPhongWc = soPhongWc;
-        this.idUser = idUser;
-        this.nameUser = nameUser;
-        this.tenDanhMuc = tenDanhMuc;
-        this.date = date;
-        this.image = image;
-    }
-
-        public BDSNews(int maxID, String strTitlePost, String strDescription, double dbPrice, String strDienTich,
+    public BDSNews(int maxID, String strTitlePost, String strDescription, double dbPrice, String strDienTich,
                    String strAddress, String strTenKhu, String strLoaiHinhDat,
-                   String strSoPhongNgu, String strSoPhongWc, int idUser, String nameUser , String tenDanhMuc, String date ) {
+                   String strSoPhongNgu, String strSoPhongWc, int idUser, String nameUser , String tenDanhMuc, String danhMucChinh, String date ) {
         this.id = maxID;
         this.title = strTitlePost;
         this.description = strDescription;
@@ -61,9 +38,8 @@
         this.idUser = idUser;
         this.nameUser = nameUser;
         this.tenDanhMuc = tenDanhMuc;
+        this.danhMucChinh = danhMucChinh;
         this.date = date;
-
-
     }
 
 
@@ -101,6 +77,13 @@
         this.date = date;
     }
 
+    public BDSNews(String date, int idUser, double dbPrice, String strDescription, String strLoaiHinhDat, String strTitlePost, String strSoPhongWc, String strTenKhu, String strTenKhu1, String bds, String strDienTich, String nameUser, String strSoPhongNgu, String tenDanhMuc, int maxID) {
+
+    }
+
+    public BDSNews(int idEdit, String strTitlePost, int idUser, String bds, String strAddress, String date, String date1, String strDescription, String tenDanhMuc, String strDienTich, String strSoPhongNgu, String nameUser, String strSoPhongWc, String strLoaiHinhDat, String strTenKhu) {
+    }
+
     public String getDate() {
         return date;
     }
@@ -228,4 +211,12 @@
     public void setImage(String image) {
         this.image = image;
     }
+
+    public String getDanhMucChinh() {
+        return danhMucChinh;
+    }
+
+    public void setDanhMucChinh(String danhMucChinh) {
+        this.danhMucChinh = danhMucChinh;
+    }
 }
Index: app/src/main/java/com/example/duan1/dangTinBDSActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.Manifest;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.net.ConnectivityManager;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.photoAdapter;\r\nimport com.example.duan1.Broadcast.Broadcast;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.direction;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\npublic class dangTinBDSActivity extends AppCompatActivity implements com.example.duan1.Adapter.photoAdapter.CountOfImageWhenRemove {\r\n    private Spinner spn_Direction;\r\n    private TextView tvTenDanhMuc;\r\n    private ImageView imgBackPage, iconCloser;\r\n    private EditText edtTitlePost, edtDescription, edtTenKhuDanCu, edtAddress, edtLoaiHinh, edtSoPhongNgu,\r\n            edtSoPhongWc, edtPrice, edtDienTich;\r\n    private LinearLayout addImageProduct;\r\n    private Button btnDangTin, suaTinBDS;\r\n    private String date, strTitlePost, strDescription, strTenKhu, strAddress, strLoaiHinhDat, strSoPhongNgu, strSoPhongWc, strPrice, strDienTich, nameUser, tenDanhMuc;\r\n    private double dbPrice;\r\n    private int maxID;\r\n    private String title_Post = null;\r\n    private com.example.duan1.Adapter.photoAdapter photoAdapter;\r\n    private RecyclerView rcvView_select_img_BDS;\r\n    private ArrayList<Uri> imageUri;\r\n    private int REQUEST_PERMISSION_CODE = 35;\r\n    private int PICK_IMAGE = 1;\r\n    private int update_count = 0, idUser, idEdit;\r\n    private List<BDSNews> listBDS;\r\n    private MainActivity mainActivity;\r\n    BDSNews bdsNewsId;\r\n    private ProgressDialog progressDialog;\r\n    DatabaseReference myData;\r\n    StorageReference imageFolder;\r\n    private Bitmap bitmapselect;\r\n    private Calendar calendar = Calendar.getInstance();\r\n    private Broadcast broadcast;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_dang_tin_bdsactivity);\r\n\r\n        imageFolder = FirebaseStorage.getInstance().getReference().child(\"Image.jpg\");\r\n        myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"BDS\");\r\n        imageUri = new ArrayList<>();\r\n\r\n        nameUser = mainActivity.name;\r\n        idUser = mainActivity.id;\r\n        initUi();\r\n        eventClickSpinner();\r\n        getListBds();\r\n        clickBackPage();\r\n        clickAddImageFashion();\r\n        clickDangTin();\r\n        getCurrentDate();\r\n        if (title_Post == null) {\r\n            btnDangTin.setVisibility(View.VISIBLE);\r\n            suaTinBDS.setVisibility(View.INVISIBLE);\r\n        } else {\r\n            suaTinBDS.setVisibility(View.VISIBLE);\r\n            btnDangTin.setVisibility(View.INVISIBLE);\r\n            setTextInput();\r\n            editNews();\r\n        }\r\n    }\r\n    private void getCurrentDate() {\r\n\r\n        SimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n        Calendar c = Calendar.getInstance();\r\n        date = sdf.format(c.getTime());\r\n    }\r\n    private void editNews() {\r\n        suaTinBDS.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog = new ProgressDialog(dangTinBDSActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strTenKhu = edtTenKhuDanCu.getText().toString().trim();\r\n                strLoaiHinhDat = edtLoaiHinh.getText().toString().trim();\r\n                strAddress = edtAddress.getText().toString().trim();\r\n                strPrice = edtPrice.getText().toString();\r\n                strDienTich = edtDienTich.getText().toString().trim();\r\n                strSoPhongNgu = edtSoPhongNgu.getText().toString().trim();\r\n                strSoPhongWc = edtSoPhongWc.getText().toString().trim();\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n\r\n                } catch(Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty() ||  strTenKhu.isEmpty()|| strLoaiHinhDat.isEmpty() ||strDienTich.isEmpty()\r\n                        ||strSoPhongWc.isEmpty() || strSoPhongNgu.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dangTinBDSActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n\r\n                    upImage(idEdit);\r\n\r\n                    String strId = String.valueOf(idEdit);\r\n                    myData.child(strId ).setValue(\r\n                                    new BDSNews(idEdit ,strTitlePost , strDescription , dbPrice\r\n                                            ,strDienTich ,strAddress ,strTenKhu ,strLoaiHinhDat ,\r\n                                            strSoPhongNgu,strSoPhongWc ,idUser,nameUser ,tenDanhMuc, date ))\r\n                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dangTinBDSActivity.this, \"Sửa tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setTextInput() {\r\n        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n        DatabaseReference databaseReference = firebaseDatabase.getReference(\"Tin\").child(\"BDS\");\r\n        databaseReference.addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                BDSNews bdsNews = snapshot.getValue(BDSNews.class);\r\n                if (title_Post.equals(bdsNews.getTitle())) {\r\n                    edtTitlePost.setText(bdsNews.getTitle());\r\n                    edtAddress.setText(bdsNews.getAdress());\r\n                    edtDienTich.setText(bdsNews.getDienTich());\r\n                    edtDescription.setText(bdsNews.getDescription());\r\n                    edtLoaiHinh.setText(bdsNews.getLoaiDat());\r\n                    edtSoPhongNgu.setText(bdsNews.getSoPhongNgu());\r\n                    edtSoPhongWc.setText(bdsNews.getSoPhongWc());\r\n                    edtTenKhuDanCu.setText(bdsNews.getTenPhanKhu());\r\n                    String price = String.valueOf(bdsNews.getPrice());\r\n                    edtPrice.setText(price);\r\n\r\n                    idEdit = bdsNews.getId();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickBackPage() {\r\n        imgBackPage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n        iconCloser.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void eventClickSpinner() {\r\n        direction[] directions = EmployeeDataUtils.getEmployees();\r\n        ArrayAdapter<direction> adapter = new ArrayAdapter<direction>(this, android.R.layout.simple_spinner_item, directions);\r\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spn_Direction.setAdapter(adapter);\r\n\r\n        spn_Direction.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                Toast.makeText(dangTinBDSActivity.this, \"Hướng \" + i, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickDangTin() {\r\n        btnDangTin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog = new ProgressDialog(dangTinBDSActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strTenKhu = edtTenKhuDanCu.getText().toString().trim();\r\n                strLoaiHinhDat = edtLoaiHinh.getText().toString().trim();\r\n                strAddress = edtAddress.getText().toString().trim();\r\n                strPrice = edtPrice.getText().toString();\r\n                strDienTich = edtDienTich.getText().toString().trim();\r\n                strSoPhongNgu = edtSoPhongNgu.getText().toString().trim();\r\n                strSoPhongWc = edtSoPhongWc.getText().toString().trim();\r\n\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n\r\n                } catch (Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty() || strTenKhu.isEmpty() || strLoaiHinhDat.isEmpty() || strDienTich.isEmpty()\r\n                        || strSoPhongWc.isEmpty() || strSoPhongNgu.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dangTinBDSActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n                    if (bdsNewsId == null) {\r\n                        maxID = 0;\r\n                    } else {\r\n                        maxID = bdsNewsId.getId() + 1;\r\n                    }\r\n\r\n                    upImage(maxID);\r\n\r\n                    String strId = String.valueOf(maxID);\r\n                    myData.child(strId).setValue(\r\n                                    new BDSNews(maxID, strTitlePost, strDescription, dbPrice\r\n                                            , strDienTich, strAddress, strTenKhu, strLoaiHinhDat,\r\n                                            strSoPhongNgu, strSoPhongWc, idUser, nameUser, tenDanhMuc, date))\r\n                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dangTinBDSActivity.this, \"Đăng tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                    finish();\r\n                                }\r\n                            });\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n    private List<BDSNews> getListBds() {\r\n        listBDS = new ArrayList<>();\r\n        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n        DatabaseReference databaseReference = firebaseDatabase.getReference(\"Tin\").child(\"BDS\");\r\n        databaseReference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                listBDS.clear();\r\n                for (DataSnapshot snapshot1 : snapshot.getChildren()) {\r\n                    BDSNews bdsNews = snapshot1.getValue(BDSNews.class);\r\n                    listBDS.add(bdsNews);\r\n                    bdsNewsId = bdsNews;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                Toast.makeText(dangTinBDSActivity.this, \"Load data Error\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return listBDS;\r\n\r\n    }\r\n\r\n    private void initUi() {\r\n        spn_Direction = findViewById(R.id.spn_Direction);\r\n        tvTenDanhMuc = findViewById(R.id.tvTenDanhMuc);\r\n        Intent intent = getIntent();\r\n        title_Post = intent.getStringExtra(\"title\");\r\n        tvTenDanhMuc.setText(\"Danh Mục - \" + intent.getStringExtra(\"tenDanhMuc\"));\r\n        imgBackPage = findViewById(R.id.icon_back);\r\n        addImageProduct = findViewById(R.id.addImageProduct);\r\n        edtTitlePost = findViewById(R.id.title_post);\r\n        edtDescription = findViewById(R.id.description_post);\r\n        edtTenKhuDanCu = findViewById(R.id.tenKhuDanCu);\r\n        edtAddress = findViewById(R.id.address);\r\n        edtLoaiHinh = findViewById(R.id.loaiHinh);\r\n        edtSoPhongNgu = findViewById(R.id.soPhongNgu);\r\n        edtSoPhongWc = findViewById(R.id.soPhongWc);\r\n        edtPrice = findViewById(R.id.price);\r\n        edtDienTich = findViewById(R.id.dienTich);\r\n        btnDangTin = findViewById(R.id.dangTinBDS);\r\n        iconCloser = findViewById(R.id.iconCloser);\r\n        suaTinBDS = findViewById(R.id.suaTinBDS);\r\n\r\n        rcvView_select_img_BDS = findViewById(R.id.rcvView_select_img_BDS);\r\n        Intent intent1 = getIntent();\r\n        tenDanhMuc = intent1.getStringExtra(\"tenDanhMuc\");\r\n\r\n        broadcast = new Broadcast();\r\n\r\n    }\r\n\r\n    private void clickAddImageFashion() {\r\n        photoAdapter = new photoAdapter(imageUri, this, this);\r\n        rcvView_select_img_BDS.setLayoutManager(new GridLayoutManager(dangTinBDSActivity.this, 1));\r\n        rcvView_select_img_BDS.setAdapter(photoAdapter);\r\n\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n                    REQUEST_PERMISSION_CODE);\r\n            return;\r\n        }\r\n\r\n        addImageProduct.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                intent.setType(\"image/*\");\r\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR2) {\r\n                    intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n                }\r\n                startActivityForResult(Intent.createChooser(intent, \"select Picture\"), PICK_IMAGE);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == PICK_IMAGE && resultCode == RESULT_OK && data != null) {\r\n            if (data.getClipData() != null) {\r\n                int count = data.getClipData().getItemCount();\r\n\r\n                for (int i = 0; i < count; i++) {\r\n                    if (imageUri.size() < 9) {\r\n                        Uri imgUri = (data.getClipData().getItemAt(i).getUri());\r\n                        imageUri.add(imgUri);\r\n                    } else {\r\n                        Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                photoAdapter.notifyDataSetChanged();\r\n            } else {\r\n                if (imageUri.size() < 9) {\r\n                    Uri imgUri = data.getData();\r\n                    imageUri.add(imgUri);\r\n                } else {\r\n                    Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n\r\n            }\r\n            photoAdapter.notifyDataSetChanged();\r\n        } else {\r\n            Toast.makeText(this, \"you haven't pick any Image\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void clicked(int getSize) {\r\n\r\n    }\r\n\r\n    public static class EmployeeDataUtils {\r\n        public static direction[] getEmployees() {\r\n            direction drt1 = new direction(\"Nam\");\r\n            direction drt2 = new direction(\"Bắc\");\r\n            direction drt3 = new direction(\"Đông\");\r\n            direction drt4 = new direction(\"Tây\");\r\n            direction drt5 = new direction(\"Đông-Nam\");\r\n            direction drt6 = new direction(\"Tây-Băc\");\r\n            direction drt7 = new direction(\"Đông-Bắc\");\r\n            direction drt8 = new direction(\"Tây-Nam\");\r\n            return new direction[]{drt1, drt2, drt3, drt4, drt5, drt6, drt7, drt8};\r\n        }\r\n    }\r\n\r\n    private void upImage(int id) {\r\n        if (imageUri.size() == 0){\r\n            return;\r\n        }else{\r\n            Uri uri = imageUri.get(0);\r\n            try {\r\n                bitmapselect = MediaStore.Images.Media.getBitmap(getContentResolver(),uri);\r\n                FirebaseStorage storage = FirebaseStorage.getInstance();\r\n                StorageReference storageRef = storage.getReference();\r\n                StorageReference mountainsRef = storageRef.child(tenDanhMuc+\"/image\"+calendar.getTimeInMillis());\r\n                ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n                bitmapselect.compress(Bitmap.CompressFormat.JPEG, 100, baos);\r\n                byte[] dataImage = baos.toByteArray();\r\n\r\n                UploadTask uploadTask = mountainsRef.putBytes(dataImage);\r\n                uploadTask.addOnFailureListener(new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception exception) {\r\n                        // Handle unsuccessful uploads\r\n                        progressDialog.dismiss();\r\n                        Toast.makeText(dangTinBDSActivity.this, \"Lỗi cập nhật hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                        // taskSnapshot.getMetadata() contains file metadata such as size, content-type, etc.\r\n\r\n                        mountainsRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                            @Override\r\n                            public void onSuccess(Uri uri) {\r\n                                String strImage = String.valueOf(uri);\r\n                                UpdateImageUrl(strImage, id);\r\n                                progressDialog.dismiss();\r\n                            }\r\n                        }).addOnFailureListener(new OnFailureListener() {\r\n                            @Override\r\n                            public void onFailure(@NonNull Exception exception) {\r\n                                // Handle any errors\r\n                                progressDialog.dismiss();\r\n                                Toast.makeText(dangTinBDSActivity.this, \"Lỗi tải URL hình ảnh!\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            } catch (IOException e) {\r\n                Toast.makeText(mainActivity, \"Lỗi try-catch\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private void UpdateImageUrl(String url, int id) {\r\n        myData.child(id+\"/image\").setValue(url);\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        IntentFilter intentFilter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        registerReceiver(broadcast, intentFilter);\r\n        super.onStart();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        unregisterReceiver(broadcast);\r\n        super.onStop();\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/dangTinBDSActivity.java b/app/src/main/java/com/example/duan1/dangTinBDSActivity.java
--- a/app/src/main/java/com/example/duan1/dangTinBDSActivity.java	(revision 282f03237a7fa135d1737a3363b0ca90fa19ce3a)
+++ b/app/src/main/java/com/example/duan1/dangTinBDSActivity.java	(date 1671690121785)
@@ -19,6 +19,7 @@
 import android.os.Build;
 import android.os.Bundle;
 import android.provider.MediaStore;
+import android.util.Log;
 import android.view.View;
 import android.widget.AdapterView;
 import android.widget.ArrayAdapter;
@@ -71,7 +72,7 @@
     private ArrayList<Uri> imageUri;
     private int REQUEST_PERMISSION_CODE = 35;
     private int PICK_IMAGE = 1;
-    private int update_count = 0, idUser, idEdit;
+    private int update_count = 0, idUser;
     private List<BDSNews> listBDS;
     private MainActivity mainActivity;
     BDSNews bdsNewsId;
@@ -81,6 +82,8 @@
     private Bitmap bitmapselect;
     private Calendar calendar = Calendar.getInstance();
     private Broadcast broadcast;
+    private int idEdit = 0;
+    private String urlImage;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -88,11 +91,12 @@
         setContentView(R.layout.activity_dang_tin_bdsactivity);
 
         imageFolder = FirebaseStorage.getInstance().getReference().child("Image.jpg");
-        myData = FirebaseDatabase.getInstance().getReference("Tin").child("BDS");
+        myData = FirebaseDatabase.getInstance().getReference("Tin");
         imageUri = new ArrayList<>();
 
         nameUser = mainActivity.name;
         idUser = mainActivity.id;
+
         initUi();
         eventClickSpinner();
         getListBds();
@@ -145,16 +149,15 @@
                 } else {
                     progressDialog.show();
 
-                    upImage(idEdit);
-
                     String strId = String.valueOf(idEdit);
-                    myData.child(strId ).setValue(
+                    myData.child(strId).setValue(
                                     new BDSNews(idEdit ,strTitlePost , strDescription , dbPrice
                                             ,strDienTich ,strAddress ,strTenKhu ,strLoaiHinhDat ,
-                                            strSoPhongNgu,strSoPhongWc ,idUser,nameUser ,tenDanhMuc, date ))
+                                            strSoPhongNgu,strSoPhongWc ,idUser,nameUser ,tenDanhMuc,"BDS", date ))
                             .addOnSuccessListener(new OnSuccessListener<Void>() {
                                 @Override
                                 public void onSuccess(Void unused) {
+                                    upImage(idEdit);
                                     Toast.makeText(dangTinBDSActivity.this, "Sửa tin thành công", Toast.LENGTH_SHORT).show();
                                     progressDialog.dismiss();
                                 }
@@ -166,12 +169,13 @@
 
     private void setTextInput() {
         FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();
-        DatabaseReference databaseReference = firebaseDatabase.getReference("Tin").child("BDS");
+        DatabaseReference databaseReference = firebaseDatabase.getReference("Tin");
         databaseReference.addChildEventListener(new ChildEventListener() {
             @Override
             public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {
                 BDSNews bdsNews = snapshot.getValue(BDSNews.class);
-                if (title_Post.equals(bdsNews.getTitle())) {
+                if (idEdit == bdsNews.getId()) {
+                    Toast.makeText(dangTinBDSActivity.this, "In set data", Toast.LENGTH_SHORT).show();
                     edtTitlePost.setText(bdsNews.getTitle());
                     edtAddress.setText(bdsNews.getAdress());
                     edtDienTich.setText(bdsNews.getDienTich());
@@ -182,8 +186,7 @@
                     edtTenKhuDanCu.setText(bdsNews.getTenPhanKhu());
                     String price = String.valueOf(bdsNews.getPrice());
                     edtPrice.setText(price);
-
-                    idEdit = bdsNews.getId();
+                    urlImage = bdsNews.getImage();
                 }
             }
 
@@ -233,7 +236,7 @@
         spn_Direction.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
             @Override
             public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {
-                Toast.makeText(dangTinBDSActivity.this, "Hướng " + i, Toast.LENGTH_SHORT).show();
+                //code hướng
             }
 
             @Override
@@ -286,7 +289,7 @@
                     myData.child(strId).setValue(
                                     new BDSNews(maxID, strTitlePost, strDescription, dbPrice
                                             , strDienTich, strAddress, strTenKhu, strLoaiHinhDat,
-                                            strSoPhongNgu, strSoPhongWc, idUser, nameUser, tenDanhMuc, date))
+                                            strSoPhongNgu, strSoPhongWc, idUser, nameUser, tenDanhMuc,"BDS", date))
                             .addOnSuccessListener(new OnSuccessListener<Void>() {
                                 @Override
                                 public void onSuccess(Void unused) {
@@ -295,7 +298,6 @@
                                     finish();
                                 }
                             });
-
                 }
             }
         });
@@ -307,7 +309,7 @@
     private List<BDSNews> getListBds() {
         listBDS = new ArrayList<>();
         FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();
-        DatabaseReference databaseReference = firebaseDatabase.getReference("Tin").child("BDS");
+        DatabaseReference databaseReference = firebaseDatabase.getReference("Tin");
         databaseReference.addValueEventListener(new ValueEventListener() {
             @Override
             public void onDataChange(@NonNull DataSnapshot snapshot) {
@@ -334,6 +336,8 @@
         tvTenDanhMuc = findViewById(R.id.tvTenDanhMuc);
         Intent intent = getIntent();
         title_Post = intent.getStringExtra("title");
+        idEdit = intent.getIntExtra("idBDS", 0);
+
         tvTenDanhMuc.setText("Danh Mục - " + intent.getStringExtra("tenDanhMuc"));
         imgBackPage = findViewById(R.id.icon_back);
         addImageProduct = findViewById(R.id.addImageProduct);
@@ -408,7 +412,6 @@
                     Toast.makeText(this, "Chỉ đăng tối đa 9 hình ảnh", Toast.LENGTH_SHORT).show();
                 }
 
-
             }
             photoAdapter.notifyDataSetChanged();
         } else {
diff --git a/.idea/shelf/Uncommitted_changes_before_Merge_at_10_12_2022_10_17_SA_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Merge_at_10_12_2022_10_17_SA_[Changes]/shelved.patch
deleted file mode 100644
