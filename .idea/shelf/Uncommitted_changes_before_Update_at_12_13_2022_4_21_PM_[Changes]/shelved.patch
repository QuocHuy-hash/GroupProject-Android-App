Index: app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1.Fragment;\r\n\r\n\r\nimport android.content.Context;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.DividerItemDecoration;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.os.Handler;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.historyNewsAdapter;\r\nimport com.example.duan1.MainActivity;\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.giaiTriNews;\r\nimport com.example.duan1.model.historyNews;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\n\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class FragmentQuanLiTin extends Fragment {\r\n    private RecyclerView rcvQuanLyTinDang;\r\n    private historyNewsAdapter historyNewsAdapter;\r\n    private List<historyNews> listHistoryNews;\r\n    private Context mContext;\r\n\r\n    private String nameUser;\r\n    private int idUser;\r\n    private List<String> listChild = new ArrayList<>();\r\n    private List<String> listChild1 = new ArrayList<>();\r\n    private List<String> listChild2 = new ArrayList<>();\r\n\r\n    int id = 0;\r\n\r\n    DatabaseReference myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"GiaiTri\");\r\n    DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"BDS\");\r\n    DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"ThoiTrang\");\r\n    MainActivity mainActivity;\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_quan_li_tin, container, false);\r\n\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        if (user != null){\r\n            rcvQuanLyTinDang = view.findViewById(R.id.rcvQuanLyTin);\r\n            mainActivity = (MainActivity) getActivity();\r\n            listHistoryNews = new ArrayList<>();\r\n            idUser = mainActivity.id;\r\n            nameUser = mainActivity.name;\r\n            listChild1();\r\n            listChild2();\r\n            listChild3();\r\n            getListHistoryNews();\r\n            new Handler().postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    historyNewsAdapter = new historyNewsAdapter(getContext(),mainActivity, listHistoryNews);\r\n                    rcvQuanLyTinDang.setLayoutManager(new LinearLayoutManager(getContext()));\r\n                    rcvQuanLyTinDang.setAdapter(historyNewsAdapter);\r\n                    RecyclerView.ItemDecoration decoration = new DividerItemDecoration(getContext() , DividerItemDecoration.VERTICAL);\r\n                    rcvQuanLyTinDang.addItemDecoration(decoration);\r\n                }\r\n            }, 500);\r\n        }\r\n\r\n        return view;\r\n    }\r\n\r\n    public void getListHistoryNews() {\r\n        for (int i = 0; i < listChild.size(); i++) {\r\n            myData.child(listChild.get(i)).addChildEventListener(new ChildEventListener() {\r\n                @Override\r\n                public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                    giaiTriNews giaiTriNews = snapshot.getValue(giaiTriNews.class);\r\n\r\n                    if (giaiTriNews.getIdUser() == idUser) {\r\n\r\n                        listHistoryNews.add(new historyNews(id, giaiTriNews.getTitle(), giaiTriNews.getDescription() , giaiTriNews.getDate(), giaiTriNews.getTenDanhMuc()));\r\n                        id++;\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n        }\r\n        for (int i = 0; i < listChild1.size(); i++) {\r\n            myData2.child(listChild1.get(i)).addChildEventListener(new ChildEventListener() {\r\n                @Override\r\n                public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                    thoiTrangNews thoiTrangNews = snapshot.getValue(com.example.duan1.model.thoiTrangNews.class);\r\n                    if (thoiTrangNews.getIdUser() == idUser) {\r\n\r\n                        listHistoryNews.add(new historyNews(id, thoiTrangNews.getTitlePost(), thoiTrangNews.getDescriptionPost(), thoiTrangNews.getDate(),thoiTrangNews.getTenDanhMuc()));\r\n                        id++;\r\n                    }\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n        }\r\n        for (int i = 0; i < listChild2.size(); i++) {\r\n            myData1.child(listChild2.get(i)).addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    for (DataSnapshot snapshot1: snapshot.getChildren()){\r\n                        BDSNews bdsNews = snapshot1.getValue(BDSNews.class);\r\n                        if (bdsNews.getIdUser() == idUser) {\r\n                            listHistoryNews.add(new historyNews(id, bdsNews.getTitle(), bdsNews.getDescription() , bdsNews.getDate(), bdsNews.getTenDanhMuc(), bdsNews.getImage()));\r\n                            id++;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private List<String> listChild1() {\r\n        listChild.add(new String(\"Nhạc cụ\"));\r\n        listChild.add(new String(\"Sách\"));\r\n        listChild.add(new String(\"Đồ thể thao, Dã ngoại\"));\r\n        listChild.add(new String(\"Đồ sưu tầm  ,Đồ cổ\"));\r\n        listChild.add(new String(\"Thiết bị chơi game\"));\r\n        listChild.add(new String(\"Sở thích khác\"));\r\n\r\n        return listChild;\r\n    }\r\n\r\n    private List<String> listChild2() {\r\n        listChild1.add(new String(\"Quần áo\"));\r\n        listChild1.add(new String(\"Đồng hồ\"));\r\n        listChild1.add(new String(\"Giày dép\"));\r\n        listChild1.add(new String(\"Túi xách\"));\r\n        listChild1.add(new String(\"Nước hoa\"));\r\n        listChild1.add(new String(\"Phụ kiện khác\"));\r\n\r\n        return listChild1;\r\n    }\r\n\r\n    private List<String> listChild3() {\r\n        listChild2.add(new String(\"Chung cư\"));\r\n        listChild2.add(new String(\"Nhà ở\"));\r\n        listChild2.add(new String(\"Đất\"));\r\n        listChild2.add(new String(\"Văn Phòng\"));\r\n        listChild2.add(new String(\"Phòng trọ\"));\r\n\r\n        return listChild2;\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java b/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java
--- a/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java	(revision 6a14d04cc9ea5cc38c2c3d0b79f62adbd0bee7e5)
+++ b/app/src/main/java/com/example/duan1/Fragment/FragmentQuanLiTin.java	(date 1670923013753)
@@ -99,6 +99,10 @@
 
                         listHistoryNews.add(new historyNews(id, giaiTriNews.getTitle(), giaiTriNews.getDescription() , giaiTriNews.getDate(), giaiTriNews.getTenDanhMuc()));
                         id++;
+                    }else if(nameUser.equals("Admin")){
+                        listHistoryNews.add(new historyNews(id, giaiTriNews.getTitle(), giaiTriNews.getDescription() , giaiTriNews.getDate(), giaiTriNews.getTenDanhMuc()));
+                        id++;
+
                     }
                 }
 
@@ -132,6 +136,10 @@
 
                         listHistoryNews.add(new historyNews(id, thoiTrangNews.getTitlePost(), thoiTrangNews.getDescriptionPost(), thoiTrangNews.getDate(),thoiTrangNews.getTenDanhMuc()));
                         id++;
+                    }else if(nameUser.equals("Admin")){
+                        listHistoryNews.add(new historyNews(id, thoiTrangNews.getTitlePost(), thoiTrangNews.getDescriptionPost() , thoiTrangNews.getDate(), thoiTrangNews.getTenDanhMuc()));
+                        id++;
+
                     }
 
                 }
@@ -166,6 +174,10 @@
                         if (bdsNews.getIdUser() == idUser) {
                             listHistoryNews.add(new historyNews(id, bdsNews.getTitle(), bdsNews.getDescription() , bdsNews.getDate(), bdsNews.getTenDanhMuc(), bdsNews.getImage()));
                             id++;
+                        }else if(nameUser.equals("Admin")){
+                            listHistoryNews.add(new historyNews(id, bdsNews.getTitle(), bdsNews.getDescription() , bdsNews.getDate(), bdsNews.getTenDanhMuc()));
+                            id++;
+
                         }
                     }
                 }
Index: app/src/main/java/com/example/duan1/Login.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1;\r\n\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.IntentFilter;\r\nimport android.graphics.Color;\r\nimport android.net.ConnectivityManager;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\n\r\nimport android.os.PersistableBundle;\r\nimport android.text.Editable;\r\nimport android.text.TextUtils;\r\nimport android.text.TextWatcher;\r\nimport android.util.Patterns;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Broadcast.Broadcast;\r\nimport com.example.duan1.model.Users;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.login.LoginManager;\r\nimport com.facebook.login.LoginResult;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\n\r\npublic class Login extends AppCompatActivity {\r\n\r\n    private static final int RC_SIGN_IN = 1000;\r\n    private ImageView imgBack;\r\n    private CircleImageView imgLoginFacebook, imgLoginGoole, imgLoginZalo;\r\n    private TextView tvResetPassword, tvRegister;\r\n    private EditText edtNumberPhone, edtPassword;\r\n    private Button btnLogin;\r\n\r\n    private FirebaseAuth mAuth;\r\n    private CallbackManager callbackManager;\r\n    private GoogleSignInClient mGoogleSignInClient;\r\n    private GoogleSignInOptions gso;\r\n    private Broadcast broadcast;\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n        initUi();\r\n\r\n        //login Facebook\r\n        callbackManager = CallbackManager.Factory.create();\r\n        LoginManager.getInstance().registerCallback(callbackManager,\r\n                new FacebookCallback<LoginResult>() {\r\n                    @Override\r\n                    public void onSuccess(LoginResult loginResult) {\r\n                        Toast.makeText(Login.this, \"Đăng nhập thành công!\", Toast.LENGTH_SHORT).show();\r\n                        Intent intent = new Intent(Login.this, MainActivity.class);\r\n                        setResult(RESULT_OK, intent);\r\n                        finish();\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancel() {\r\n                        // App code\r\n                    }\r\n\r\n                    @Override\r\n                    public void onError(FacebookException exception) {\r\n                        // App code\r\n                    }\r\n                });\r\n\r\n        //login Goolgle\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n                .requestEmail()\r\n                .build();\r\n        mGoogleSignInClient = GoogleSignIn.getClient(this, gso);\r\n\r\n        initListenerClick();\r\n        initListenerTextChange();\r\n\r\n\r\n    }\r\n\r\n\r\n    private void initUi() {\r\n        imgBack = findViewById(R.id.img_back);\r\n        imgLoginFacebook = findViewById(R.id.img_login_facebook);\r\n        imgLoginGoole = findViewById(R.id.img_login_google);\r\n        imgLoginZalo = findViewById(R.id.img_login_zalo);\r\n        tvResetPassword = findViewById(R.id.tv_reset_password);\r\n        tvRegister = findViewById(R.id.tv_register);\r\n        edtNumberPhone = findViewById(R.id.edt_numberphone);\r\n        edtPassword = findViewById(R.id.edt_password);\r\n        btnLogin = findViewById(R.id.btn_login);\r\n\r\n        // Initialize Firebase Auth\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n        broadcast = new Broadcast();\r\n\r\n    }\r\n\r\n    private void initListenerClick() {\r\n        //click back\r\n        imgBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code back\r\n                finish();\r\n            }\r\n        });\r\n\r\n        //click login facebook\r\n        imgLoginFacebook.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login facebook\r\n                LoginManager.getInstance().logInWithReadPermissions(Login.this, Arrays.asList(\"public_profile\"));\r\n            }\r\n        });\r\n\r\n        //click login google\r\n        imgLoginGoole.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login google\r\n                LoginGoogle();\r\n            }\r\n        });\r\n\r\n        //click login zalo\r\n        imgLoginZalo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login zalo\r\n                Toast.makeText(Login.this, \"Login zalo from Login\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        //click reset password\r\n        tvResetPassword.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code reset password\r\n                Toast.makeText(Login.this, \"reset Password from Login\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        //click register\r\n        tvRegister.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code register\r\n                startActivity(new Intent(Login.this, Register.class));\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void initListenerTextChange() {\r\n        edtNumberPhone.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n                if (edtNumberPhone.getText().toString().trim().equals(\"\") || edtPassword.getText().toString().trim().equals(\"\")) {\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_login);\r\n                    return;\r\n                } else {\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_register);\r\n                    OnLogin();\r\n                }\r\n            }\r\n        });\r\n\r\n        edtPassword.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable editable) {\r\n                if (edtNumberPhone.getText().toString().trim().equals(\"\") || edtPassword.getText().toString().trim().equals(\"\")) {\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_login);\r\n                    return;\r\n                } else {\r\n                    btnLogin.setBackgroundResource(R.drawable.bg_button_register);\r\n                    OnLogin();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public static boolean isValidEmail(CharSequence target) {\r\n        return (!TextUtils.isEmpty(target) && Patterns.EMAIL_ADDRESS.matcher(target).matches());\r\n    }\r\n\r\n    private void OnLogin() {\r\n\r\n        //click login\r\n        btnLogin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //code login\r\n                ProgressDialog progressDialog = new ProgressDialog(Login.this);\r\n                String email = edtNumberPhone.getText().toString().trim();\r\n                if (!isValidEmail(email)) {\r\n                    edtNumberPhone.setError(\"Email không đúng!\");\r\n                    return;\r\n                }\r\n                String password = edtPassword.getText().toString().trim();\r\n                if (password.length() < 6) {\r\n                    edtPassword.setError(\"Mật khẩu phải bằng hoặc trên 6 kí tự\");\r\n                    return;\r\n                }\r\n\r\n                progressDialog.setTitle(\"Xin chờ\");\r\n                progressDialog.show();\r\n\r\n                mAuth.signInWithEmailAndPassword(email, password)\r\n                        .addOnCompleteListener(Login.this, new OnCompleteListener<AuthResult>() {\r\n                            @Override\r\n                            public void onComplete(@NonNull Task<AuthResult> task) {\r\n\r\n                                Handler handler = new Handler();\r\n                                handler.postDelayed(new Runnable() {\r\n                                    @Override\r\n                                    public void run() {\r\n\r\n                                        if (task.isSuccessful()) {\r\n                                            // Sign in success, update UI with the signed-in user's information\r\n                                            List<Users> mListUser = new ArrayList<>();\r\n                                            FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                                            DatabaseReference myRef = database.getReference(\"Users\");\r\n\r\n                                            myRef.addValueEventListener(new ValueEventListener() {\r\n                                                @Override\r\n                                                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                                    mListUser.clear();\r\n                                                    for (DataSnapshot snapshot1 : snapshot.getChildren()) {\r\n                                                        Users user = snapshot1.getValue(Users.class);\r\n                                                        mListUser.add(user);\r\n\r\n                                                    }\r\n                                                }\r\n\r\n                                                @Override\r\n                                                public void onCancelled(@NonNull DatabaseError error) {\r\n                                                    FirebaseAuth.getInstance().signOut();\r\n                                                    Toast.makeText(Login.this, \"Đăng nhập thất bại!\", Toast.LENGTH_SHORT).show();\r\n                                                }\r\n                                            });\r\n\r\n                                            handler.postDelayed(new Runnable() {\r\n                                                @Override\r\n                                                public void run() {\r\n                                                    for (int i = 0; i < mListUser.size(); i++) {\r\n                                                        if (mListUser.get(i).getEmail().equals(email) && mListUser.get(i).getPassword().equals(password)) {\r\n                                                            Toast.makeText(Login.this, \"Đăng nhập thành công!\", Toast.LENGTH_SHORT).show();\r\n                                                            Intent intent = new Intent(Login.this, MainActivity.class);\r\n                                                            intent.putExtra(\"statusLogin\", 1);\r\n                                                            setResult(RESULT_OK, intent);\r\n                                                            finish();\r\n\r\n                                                        }\r\n                                                    }\r\n                                                }\r\n                                            },1500);\r\n\r\n\r\n                                        } else {\r\n                                            // If sign in fails, display a message to the user.\r\n                                            Toast.makeText(Login.this, \"Đăng nhập thất bại, tài khoản hoặc mật khẩu không đúng!\", Toast.LENGTH_SHORT).show();\r\n                                        }\r\n                                        progressDialog.dismiss();\r\n                                    }\r\n                                }, 2000);\r\n                            }\r\n                        });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void LoginGoogle() {\r\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\r\n        startActivityForResult(signInIntent, RC_SIGN_IN);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        // Pass the activity result back to the Facebook SDK\r\n        callbackManager.onActivityResult(requestCode, resultCode, data);\r\n\r\n        //google\r\n        if (requestCode == RC_SIGN_IN) {\r\n            Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n            try {\r\n                task.getResult(ApiException.class);\r\n                Toast.makeText(Login.this, \"Đăng nhập thành công!\", Toast.LENGTH_SHORT).show();\r\n                Intent intent = new Intent(Login.this, MainActivity.class);\r\n                setResult(RESULT_OK, intent);\r\n                intent.putExtra(\"statusLogin\", 1);\r\n                startActivity(intent);\r\n//                finish();\r\n            } catch (ApiException e) {\r\n                Toast.makeText(this, \"signInResult:failed code=\" + e.getStatusCode(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n\r\n        GoogleSignInAccount account = GoogleSignIn.getLastSignedInAccount(this);\r\n        if (account != null) {\r\n            finish();\r\n        }\r\n\r\n        IntentFilter intentFilter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        registerReceiver(broadcast, intentFilter);\r\n        super.onStart();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        unregisterReceiver(broadcast);\r\n        super.onStop();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/Login.java b/app/src/main/java/com/example/duan1/Login.java
--- a/app/src/main/java/com/example/duan1/Login.java	(revision 6a14d04cc9ea5cc38c2c3d0b79f62adbd0bee7e5)
+++ b/app/src/main/java/com/example/duan1/Login.java	(date 1670923013776)
@@ -85,6 +85,7 @@
                         Toast.makeText(Login.this, "Đăng nhập thành công!", Toast.LENGTH_SHORT).show();
                         Intent intent = new Intent(Login.this, MainActivity.class);
                         setResult(RESULT_OK, intent);
+
                         finish();
                     }
 
@@ -259,6 +260,7 @@
                     return;
                 }
 
+
                 progressDialog.setTitle("Xin chờ");
                 progressDialog.show();
 
Index: app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1.Adapter;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.duan1.MainActivity;\r\nimport com.example.duan1.R;\r\nimport com.example.duan1.dagTinGiaiTriActivity;\r\nimport com.example.duan1.dangTinBDSActivity;\r\nimport com.example.duan1.dangTinBDSDatActivity;\r\nimport com.example.duan1.dangTinBDSPhongTroActivity;\r\nimport com.example.duan1.dangTinThoiTrangActivity;\r\nimport com.example.duan1.model.BDSNews;\r\nimport com.example.duan1.model.giaiTriNews;\r\nimport com.example.duan1.model.historyNews;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.firebase.database.ChildEventListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.squareup.picasso.Picasso;\r\n\r\nimport java.text.NumberFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\npublic class historyNewsAdapter extends RecyclerView.Adapter<historyNewsAdapter.HolderView>  {\r\n    private Context mContext;\r\n    private List<historyNews> listHistory;\r\n    private List<String> listChild = new ArrayList<>();\r\n    private List<String> listChild1 = new ArrayList<>();\r\n    private List<String> listChild2 = new ArrayList<>();\r\n    private String title_News;\r\n    private int id;\r\n    private MainActivity mainActivity;\r\n\r\n    DatabaseReference myData = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"GiaiTri\");\r\n    DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"BDS\");\r\n    DatabaseReference myData2 = FirebaseDatabase.getInstance().getReference(\"Tin\").child(\"ThoiTrang\");\r\n\r\n    public historyNewsAdapter(Context mContext, MainActivity mainActivity, List<historyNews> listHistory) {\r\n        this.mContext = mContext;\r\n        this.listHistory =listHistory;\r\n        this.mainActivity = mainActivity;\r\n        notifyDataSetChanged();\r\n    }\r\npublic void setFilter(List<historyNews> listFilter){\r\n        this.listHistory = listFilter;\r\n        notifyDataSetChanged();\r\n}\r\n\r\n    @NonNull\r\n    @Override\r\n    public HolderView onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_quan_ly_tin_dang, parent, false);\r\n\r\n        return new HolderView(view);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull HolderView holder,final int position) {\r\n        historyNews giaiTriNews =  listHistory.get(position);\r\n        String tenDanhMuc = giaiTriNews.getTenDanhMuc();\r\n        String Title_Post = giaiTriNews.getTitle_historyNews();\r\n        Locale localeEN = new Locale(\"en\", \"EN\");\r\n        NumberFormat en = NumberFormat.getInstance(localeEN);\r\n        listChild1();\r\n        listChild2();\r\n        listChild3();\r\n        holder.title_historyNews.setText(giaiTriNews.getTitle_historyNews());\r\n        holder.desc_historyNews.setText(giaiTriNews.getDesc_historyNews());\r\n        holder.time_historyNews.setText(giaiTriNews.getTime_historyNews());\r\n        String strImage = giaiTriNews.getImage();\r\n        Picasso.with(mContext)\r\n                .load(strImage)\r\n                .placeholder(R.drawable.ic_message)\r\n                .error(R.drawable.ic_message)\r\n                .into(holder.imgSP);\r\n        holder.icon_option.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                XoaTin(giaiTriNews.getTitle_historyNews());\r\n//                System.out.println(giaiTriNews.getTitle_historyNews());\r\n            }\r\n        });\r\n        int id = giaiTriNews.getId();\r\n        holder.layout_item.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                if(tenDanhMuc.equals(\"Quần áo\") || tenDanhMuc.equals(\"Đồng hồ\") || tenDanhMuc.equals(\"Giày dép\") ||tenDanhMuc.equals(\"Túi xách\")\r\n                || tenDanhMuc.equals(\"Nước hoa\") ){\r\n                    Intent intent = new Intent(mContext , dangTinThoiTrangActivity.class);\r\n                    intent.putExtra(\"title1\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n\r\n                    mContext.startActivity(intent);\r\n                }else if(tenDanhMuc.equals(\"Phòng trọ\")) {\r\n                    Intent intent = new Intent(mContext , dangTinBDSPhongTroActivity.class);\r\n                    intent.putExtra(\"title1\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    mContext.startActivity(intent);\r\n                }else if(tenDanhMuc.equals(\"Đất\")) {\r\n                    Intent intent = new Intent(mContext , dangTinBDSDatActivity.class);\r\n                    intent.putExtra(\"title\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    intent.putExtra(\"id\", id);\r\n                    mContext.startActivity(intent);\r\n                }else if(tenDanhMuc.equals(\"Văn Phòng\")\r\n                        || tenDanhMuc.equalsIgnoreCase(\"Nhà ở\")\r\n                        || tenDanhMuc.equalsIgnoreCase(\"Chung cư\")){\r\n                    Intent intent = new Intent(mContext , dangTinBDSActivity.class);\r\n                    intent.putExtra(\"title\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    mContext.startActivity(intent);\r\n                }else {\r\n                    Intent intent = new Intent(mContext , dagTinGiaiTriActivity.class);\r\n                    intent.putExtra(\"title\" , Title_Post);\r\n                    intent.putExtra(\"tenDanhMuc\" , tenDanhMuc);\r\n                    mContext.startActivity(intent);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    @Override\r\n    public int getItemCount() {\r\n        if (listHistory != null) {\r\n            return listHistory.size();\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\nprivate void XoaTin(String title){\r\n    ProgressDialog progressDialog = new ProgressDialog(mainActivity);\r\n    progressDialog.show();\r\n    for(int i = 0 ; i < listChild.size() ;i++) {\r\n        myData.child(listChild.get(i)).addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                giaiTriNews giaiTriNew = snapshot.getValue(giaiTriNews.class);\r\n                if(giaiTriNew.getTitle().equals(title)){\r\n                    String id = String.valueOf(giaiTriNew.getId());\r\n                    String tenDanhMuc = String.valueOf(giaiTriNew.getTenDanhMuc());\r\n                        myData.child(tenDanhMuc).child(id).removeValue();\r\n                        Toast.makeText(mContext.getApplicationContext(), \"Đã xóa Tin\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n        progressDialog.dismiss();\r\n    }\r\n\r\n    for (int i = 0; i< listChild2.size() ;i++) {\r\n        myData1.child(listChild2.get(i)).addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                BDSNews bdsNews = snapshot.getValue(BDSNews.class);\r\n                if(bdsNews.getTitle().equals(title)){\r\n                    String id = String.valueOf(bdsNews.getId());\r\n                    String tenDanhMuc = String.valueOf(bdsNews.getTenDanhMuc());\r\n                    System.out.println(tenDanhMuc);\r\n                    myData1.child(tenDanhMuc).child(id).removeValue();\r\n                    notifyDataSetChanged();\r\n                    Toast.makeText(mContext.getApplicationContext(), \"Đã xóa Tin\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    for(int i = 0; i < listChild1.size();i++){\r\n        myData2.child(listChild1.get(i)).addChildEventListener(new ChildEventListener() {\r\n            @Override\r\n            public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n                thoiTrangNews thoiTrangNews = snapshot.getValue(com.example.duan1.model.thoiTrangNews.class);\r\n                if(thoiTrangNews.getTitlePost().equals(title)){\r\n                    String id = String.valueOf(thoiTrangNews.getId());\r\n                    String tenDanhMuc = String.valueOf(thoiTrangNews.getTenDanhMuc());\r\n                    \r\n                    myData2.child(tenDanhMuc).child(id).removeValue();\r\n                    notifyDataSetChanged();\r\n                    Toast.makeText(mContext, \"Xóa Thành công\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildRemoved(@NonNull DataSnapshot snapshot) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n    public class HolderView extends RecyclerView.ViewHolder {\r\n        private TextView title_historyNews, desc_historyNews, time_historyNews;\r\n        private ImageView icon_option, imgSP;\r\n    private RelativeLayout layout_item;\r\n        public HolderView(@NonNull View itemView) {\r\n            super(itemView);\r\n            title_historyNews = itemView.findViewById(R.id.title_historyNews);\r\n            desc_historyNews = itemView.findViewById(R.id.desc_historyNews);\r\n            time_historyNews = itemView.findViewById(R.id.time_historyNews);\r\n            icon_option = itemView.findViewById(R.id.icon_option);\r\n            layout_item = itemView.findViewById(R.id.layout_item);\r\n            imgSP = itemView.findViewById(R.id.imgTinDang);\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    private void suaTin() {\r\n    }\r\n\r\n    private List<String> listChild1() {\r\n        listChild.add(new String(\"Nhạc cụ\"));\r\n        listChild.add(new String(\"Sách\"));\r\n        listChild.add(new String(\"Đồ thể thao, Dã ngoại\"));\r\n        listChild.add(new String(\"Đồ sưu tầm  ,Đồ cổ\"));\r\n        listChild.add(new String(\"Thiết bị chơi game\"));\r\n        listChild.add(new String(\"Sở thích khác\"));\r\n\r\n        return listChild;\r\n    }\r\n\r\n    private List<String> listChild2() {\r\n        listChild1.add(new String(\"Quần áo\"));\r\n        listChild1.add(new String(\"Đồng hồ\"));\r\n        listChild1.add(new String(\"Giày dép\"));\r\n        listChild1.add(new String(\"Túi xách\"));\r\n        listChild1.add(new String(\"Nước hoa\"));\r\n        listChild1.add(new String(\"Phụ kiện khác\"));\r\n\r\n        return listChild1;\r\n    }\r\n\r\n    private List<String> listChild3() {\r\n        listChild2.add(new String(\"Chung cư\"));\r\n        listChild2.add(new String(\"Nhà ở\"));\r\n        listChild2.add(new String(\"Đất\"));\r\n        listChild2.add(new String(\"Văn Phòng\"));\r\n        listChild2.add(new String(\"Phòng trọ\"));\r\n\r\n        return listChild2;\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java b/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java
--- a/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java	(revision 6a14d04cc9ea5cc38c2c3d0b79f62adbd0bee7e5)
+++ b/app/src/main/java/com/example/duan1/Adapter/historyNewsAdapter.java	(date 1670923013800)
@@ -45,8 +45,8 @@
     private List<String> listChild1 = new ArrayList<>();
     private List<String> listChild2 = new ArrayList<>();
     private String title_News;
-    private int id;
     private MainActivity mainActivity;
+    private String name = mainActivity.name;
 
     DatabaseReference myData = FirebaseDatabase.getInstance().getReference("Tin").child("GiaiTri");
     DatabaseReference myData1 = FirebaseDatabase.getInstance().getReference("Tin").child("BDS");
@@ -77,8 +77,7 @@
         historyNews giaiTriNews =  listHistory.get(position);
         String tenDanhMuc = giaiTriNews.getTenDanhMuc();
         String Title_Post = giaiTriNews.getTitle_historyNews();
-        Locale localeEN = new Locale("en", "EN");
-        NumberFormat en = NumberFormat.getInstance(localeEN);
+        System.out.println("");
         listChild1();
         listChild2();
         listChild3();
@@ -99,6 +98,15 @@
             }
         });
         int id = giaiTriNews.getId();
+        if(name.equals("Admin")){
+            holder.layout_item.setOnClickListener(new View.OnClickListener() {
+                @Override
+                public void onClick(View view) {
+                    Toast.makeText(mContext, "Đang Chờ Layout", Toast.LENGTH_SHORT).show();
+                }
+            });
+        }else {
+
         holder.layout_item.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View view) {
@@ -128,7 +136,10 @@
                     intent.putExtra("title" , Title_Post);
                     intent.putExtra("tenDanhMuc" , tenDanhMuc);
                     mContext.startActivity(intent);
-                }else {
+                }else if(mainActivity.name.equals("Admin")){
+                    Toast.makeText(mContext, "đang chờ layout", Toast.LENGTH_SHORT).show();
+                }
+                else {
                     Intent intent = new Intent(mContext , dagTinGiaiTriActivity.class);
                     intent.putExtra("title" , Title_Post);
                     intent.putExtra("tenDanhMuc" , tenDanhMuc);
@@ -136,6 +147,8 @@
                 }
             }
         });
+        }
+
     }
     @Override
     public int getItemCount() {
