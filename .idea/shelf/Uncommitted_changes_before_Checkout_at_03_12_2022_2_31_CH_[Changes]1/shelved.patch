Index: app/src/main/res/layout/item_trangchu_news.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    android:padding=\"10dp\">\r\n\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"350dp\">\r\n        <ImageView\r\n            android:id=\"@+id/img_item_trangchu_news_Pic\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:src=\"@color/gray_1\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/layout_item_trangchu_news_SLA\"\r\n            android:layout_width=\"40dp\"\r\n            android:layout_height=\"35dp\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:background=\"@drawable/ic_item_trangchu_news_cameratest\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/tv_item_trangchu_news_SoLuongAnh\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"match_parent\"\r\n                android:gravity=\"center\"\r\n                android:maxLength=\"99\"\r\n                android:text=\"10\"\r\n                android:textColor=\"@color/white\"\r\n                android:textStyle=\"bold\" />\r\n\r\n        </LinearLayout>\r\n\r\n        <ImageView\r\n            android:id=\"@+id/img_item_trangchu_news_favorite\"\r\n            android:layout_width=\"40dp\"\r\n            android:layout_height=\"35dp\"\r\n            android:layout_marginEnd=\"10dp\"\r\n            android:layout_marginBottom=\"10dp\"\r\n            android:src=\"@drawable/ic_item_trangchu_unfavorite\"\r\n            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\" />\r\n\r\n\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\"\r\n        >\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_item_trangchu_title\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n\r\n            android:maxLength=\"55\"\r\n            android:text=\"TITLE\"\r\n            android:textColor=\"@color/black\"\r\n            android:textSize=\"25dp\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_item_trangchu_descripsion\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:maxLength=\"29\"\r\n            android:text=\"descripsion\"\r\n            android:textColor=\"@color/gray_1\"\r\n            android:textSize=\"25dp\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_item_trangchu_fee\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:maxLength=\"29\"\r\n            android:text=\"FEE\"\r\n            android:textColor=\"@color/red\"\r\n            android:textSize=\"25dp\"\r\n            android:textStyle=\"bold\" />\r\n        <LinearLayout\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            >\r\n            <ImageView\r\n                android:id=\"@+id/img_item_trangchu_news_LoaiTin\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"match_parent\"\r\n                android:src=\"@drawable/ic_item_trangchu_news_cameratest\"\r\n                android:layout_gravity=\"center\"/>\r\n            <TextView\r\n                android:id=\"@+id/tv_item_trangchu_news_Time\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"match_parent\"\r\n                android:text=\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\r\n                android:maxLength=\"45\"/>\r\n\r\n\r\n        </LinearLayout>\r\n    </LinearLayout>\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/item_trangchu_news.xml b/app/src/main/res/layout/item_trangchu_news.xml
--- a/app/src/main/res/layout/item_trangchu_news.xml	
+++ b/app/src/main/res/layout/item_trangchu_news.xml	
@@ -9,7 +9,7 @@
 
     <androidx.constraintlayout.widget.ConstraintLayout
         android:layout_width="match_parent"
-        android:layout_height="350dp">
+        android:layout_height="80dp">
         <ImageView
             android:id="@+id/img_item_trangchu_news_Pic"
             android:layout_width="match_parent"
Index: build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>buildscript {\r\n    dependencies {\r\n        classpath 'com.google.gms:google-services:4.3.10'\r\n\r\n    }\r\n}// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nplugins {\r\n    id 'com.android.application' version '7.2.1' apply false\r\n    id 'com.android.library' version '7.2.1' apply false\r\n\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/build.gradle b/build.gradle
--- a/build.gradle	
+++ b/build.gradle	
@@ -1,6 +1,6 @@
 buildscript {
     dependencies {
-        classpath 'com.google.gms:google-services:4.3.10'
+        classpath 'com.google.gms:google-services:4.3.14'
 
     }
 }// Top-level build file where you can add configuration options common to all sub-projects/modules.
Index: app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.duan1;\r\n\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\n\r\nimport android.Manifest;\r\nimport android.app.AlertDialog;\r\nimport android.app.ProgressDialog;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.duan1.Adapter.photoAdapter;\r\nimport com.example.duan1.model.Users;\r\nimport com.example.duan1.model.product_type;\r\nimport com.example.duan1.model.thoiTrangNews;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\n\r\n\r\npublic class dangTinThoiTrangActivity extends AppCompatActivity implements photoAdapter.CountOfImageWhenRemove {\r\n    private TextView tvTenDanhMuc;\r\n    private ImageView imgBackPage, addImageProduct;\r\n    private Spinner spn_product_type;\r\n    private EditText edtTitlePost, edtDescription, edtPrice, edtAddress;\r\n    private Button btnDangTin;\r\n    private com.example.duan1.Adapter.photoAdapter photoAdapter;\r\n    private RecyclerView rcvView_select_img_fashion;\r\n    StorageReference imageFolder;\r\n    private String strTitlePost, strDescription, strPrice, strLoaiSanPham, strAddress;\r\n    private double dbPrice;\r\n\r\n\r\n    private int REQUEST_PERMISSION_CODE = 35;\r\n    private int PICK_IMAGE = 1;\r\n    private int update_count = 0;\r\n    private ArrayList<Uri> imageUri;\r\n    private ProgressDialog progressDialog;\r\n    DatabaseReference myData;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_dang_tin_thoi_trang);\r\n        imageFolder = FirebaseStorage.getInstance().getReference().child(\"Image.jpg\");\r\n        myData = FirebaseDatabase.getInstance().getReference(\"Tin\");\r\n        initUi();\r\n        clickBAckPage();\r\n        eventClickSPN();\r\n        clickAddImageFashion();\r\n        clickDangTin();\r\n\r\n    }\r\n\r\n    private void clickDangTin() {\r\n        Intent intent = getIntent();\r\n        String tenDanhMuc = intent.getStringExtra(\"tenDanhMuc\");\r\n\r\n\r\n        btnDangTin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                progressDialog = new ProgressDialog(dangTinThoiTrangActivity.this);\r\n                progressDialog.setMessage(\"Please wait for save\");\r\n\r\n                strTitlePost = edtTitlePost.getText().toString().trim();\r\n                strDescription = edtDescription.getText().toString();\r\n                strPrice = edtPrice.getText().toString();\r\n                try {\r\n                    dbPrice = Double.parseDouble(strPrice);\r\n                } catch(Exception e) {\r\n                    System.err.println(\"Lỗi Parse kiểu dữ liệu\");\r\n                }\r\n\r\n                strLoaiSanPham = spn_product_type.getSelectedItem().toString();\r\n                strAddress = edtAddress.getText().toString();\r\n\r\n                System.err.println(\"Sản phẩm : \" +strTitlePost + \" - \" +  strDescription + \" - \" + strPrice + \"- \" + strAddress);\r\n                if (strTitlePost.isEmpty() || strDescription.isEmpty() || strPrice.isEmpty()\r\n                        || strAddress.isEmpty()) {\r\n                    MainActivity.showDiaLogWarning(dangTinThoiTrangActivity.this, \"vui lòng nhập đầy đủ thông tin\");\r\n\r\n                } else {\r\n                    progressDialog.show();\r\n                    for (update_count = 0; update_count < imageUri.size(); update_count++) {\r\n                        Uri indexImage = imageUri.get(update_count);\r\n                        StorageReference imageName = imageFolder.child(\"Image \" + indexImage.getLastPathSegment());\r\n                        imageName.child(strTitlePost).putFile(indexImage).addOnSuccessListener(new OnSuccessListener<UploadTask.TaskSnapshot>() {\r\n                            @Override\r\n                            public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                                imageName.getDownloadUrl().addOnSuccessListener(new OnSuccessListener<Uri>() {\r\n                                    @Override\r\n                                    public void onSuccess(Uri uri) {\r\n                                        String Url = String.valueOf(uri);\r\n                                        StoreLick(Url);\r\n\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                    int size = imageUri.size() + 1;\r\n                    String strId = String.valueOf(size);\r\n                    myData.child(tenDanhMuc).child(strId + 1).setValue(new thoiTrangNews(0,\r\n                                    strTitlePost,\r\n                                    strDescription,\r\n                                    strLoaiSanPham,\r\n                                    dbPrice,\r\n                                    strAddress))\r\n                            .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                @Override\r\n                                public void onSuccess(Void unused) {\r\n                                    Toast.makeText(dangTinThoiTrangActivity.this, \"Đăng tin thành công\", Toast.LENGTH_SHORT).show();\r\n                                    progressDialog.dismiss();\r\n                                }\r\n                            });\r\n\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void StoreLick(String url) {\r\n        DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReference().child(\"List Image\");\r\n        HashMap<String, String> hashMap = new HashMap<>();\r\n        hashMap.put(\"Imglink\", url);\r\n        databaseReference.push().setValue(hashMap);\r\n\r\n    }\r\n//    private List<thoiTrangNews> getListFashion() {\r\n//        List<thoiTrangNews> listFashion = new ArrayList<>();\r\n//        FirebaseDatabase firebaseDatabase = FirebaseDatabase.getInstance();\r\n//        DatabaseReference databaseReference = firebaseDatabase.getReference(\"ThoiTrangNews\");\r\n//        databaseReference.addValueEventListener(new ValueEventListener() {\r\n//            @Override\r\n//            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n//                listFashion.clear();\r\n//                for (DataSnapshot snapshot1 : snapshot.getChildren() ){\r\n//                    thoiTrangNews thoiTrangNews = snapshot1.getValue(thoiTrangNews.class);\r\n//                    listFashion.add(thoiTrangNews);\r\n//                }\r\n//            }\r\n//\r\n//            @Override\r\n//            public void onCancelled(@NonNull DatabaseError error) {\r\n//                Toast.makeText(dangTinThoiTrangActivity.this, \"Load data Error\", Toast.LENGTH_SHORT).show();\r\n//            }\r\n//        });\r\n//\r\n//        return listFashion;\r\n//\r\n//    }\r\n\r\n    /*\r\n     * @Override\r\n     * public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n     *  Task<Uri> urlTask = taskSnapshot.getStorage().getDownloadUrl();\r\n     * while (!urlTask.isSuccessful());\r\n     * Uri downloadUrl = urlTask.getResult();\r\n     *  FriendlyMessage friendlyMessage = new FriendlyMessage(null, mUsername, downloadUrl.toString());\r\n     *  mDatabaseReference.push().setValue(friendlyMessage); }\r\n     * */\r\n    private void clickAddImageFashion() {\r\n        photoAdapter = new photoAdapter(imageUri, this, this);\r\n        rcvView_select_img_fashion.setLayoutManager(new GridLayoutManager(dangTinThoiTrangActivity.this, 6));\r\n        rcvView_select_img_fashion.setAdapter(photoAdapter);\r\n\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.READ_EXTERNAL_STORAGE)\r\n                != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n                    REQUEST_PERMISSION_CODE);\r\n            return;\r\n        }\r\n\r\n        addImageProduct.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);\r\n                intent.setType(\"image/*\");\r\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR2) {\r\n                    intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true);\r\n                }\r\n                startActivityForResult(Intent.createChooser(intent, \"select Picture\"), PICK_IMAGE);\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == PICK_IMAGE && resultCode == RESULT_OK && data != null) {\r\n            if (data.getClipData() != null) {\r\n                int count = data.getClipData().getItemCount();\r\n\r\n                for (int i = 0; i < count; i++) {\r\n                    if (imageUri.size() < 9) {\r\n                        Uri imgUri = (data.getClipData().getItemAt(i).getUri());\r\n                        imageUri.add(imgUri);\r\n                    } else {\r\n                        Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n                photoAdapter.notifyDataSetChanged();\r\n            } else {\r\n                if (imageUri.size() < 9) {\r\n                    Uri imgUri = data.getData();\r\n                    imageUri.add(imgUri);\r\n                } else {\r\n                    Toast.makeText(this, \"Chỉ đăng tối đa 9 hình ảnh\", Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n\r\n            }\r\n            photoAdapter.notifyDataSetChanged();\r\n        } else {\r\n            Toast.makeText(this, \"you haven't pick any Image\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private void eventClickSPN() {\r\n        product_type[] product_type = dangTinThoiTrangActivity.productType.getProductType();\r\n        ArrayAdapter<product_type> adapter = new ArrayAdapter<product_type>(this, android.R.layout.simple_spinner_item, product_type);\r\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spn_product_type.setAdapter(adapter);\r\n\r\n        spn_product_type.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                Toast.makeText(dangTinThoiTrangActivity.this, \"Loại sản phẩm \" + i, Toast.LENGTH_SHORT).show();\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView<?> adapterView) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private void clickBAckPage() {\r\n        imgBackPage.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void initUi() {\r\n        tvTenDanhMuc = findViewById(R.id.tvTenDanhMucTT);\r\n        Intent intent = getIntent();\r\n        tvTenDanhMuc.setText(\"Danh Mục - \" + intent.getStringExtra(\"tenDanhMuc\"));\r\n        imgBackPage = findViewById(R.id.icon_backTT);\r\n        spn_product_type = findViewById(R.id.spn_product_type);\r\n        edtTitlePost = findViewById(R.id.title_postTT);\r\n        edtDescription = findViewById(R.id.description_postTT);\r\n        edtPrice = findViewById(R.id.priceTT);\r\n        edtAddress = findViewById(R.id.addressTT);\r\n        btnDangTin = findViewById(R.id.btnDangTinTT);\r\n        rcvView_select_img_fashion = findViewById(R.id.rcvView_select_img_fashion);\r\n        addImageProduct = findViewById(R.id.addImageProductTT);\r\n\r\n\r\n        imageUri = new ArrayList<>();\r\n    }\r\n\r\n    @Override\r\n    public void clicked(int getSize) {\r\n\r\n    }\r\n\r\n    public static class productType {\r\n        public static product_type[] getProductType() {\r\n            product_type prd1 = new product_type(\"Nam\");\r\n            product_type prd2 = new product_type(\"Nữ\");\r\n            product_type prd3 = new product_type(\"Cả hai\");\r\n            return new product_type[]{prd1, prd2, prd3};\r\n\r\n\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java b/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java
--- a/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java	
+++ b/app/src/main/java/com/example/duan1/dangTinThoiTrangActivity.java	
@@ -281,7 +281,7 @@
         tvTenDanhMuc = findViewById(R.id.tvTenDanhMucTT);
         Intent intent = getIntent();
         tvTenDanhMuc.setText("Danh Mục - " + intent.getStringExtra("tenDanhMuc"));
-        imgBackPage = findViewById(R.id.icon_backTT);
+        imgBackPage = findViewById(R.id.icon_back);
         spn_product_type = findViewById(R.id.spn_product_type);
         edtTitlePost = findViewById(R.id.title_postTT);
         edtDescription = findViewById(R.id.description_postTT);
